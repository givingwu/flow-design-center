{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/design-center/_condition-settings.vue?9dc5","webpack:///./src/plugins/ElementUI/index.js","webpack:///./src/App.vue?09a5","webpack:///./src/components/design-center/index.vue?4778","webpack:///./src/components/design-center/components/flow/helpers/NodeManager.js","webpack:///./src/components/design-center/components/flow/constants/FLOW_NODE_TYPE_ENUM.js","webpack:///./src/components/design-center/components/flow/constants/FLOW_NODE_TYPE_MODEL.js","webpack:///./src/components/design-center/constants/ENUM_DEFINITIONS.js","webpack:///./src/components/design-center/components/flow/constants/FLOW_NODE_TYPE_PROPS.js","webpack:///./src/components/design-center/utils/index.js","webpack:///./src/components/design-center/components/flow/helpers/Flow.js","webpack:///./src/components/design-center/components/flow/constants/CONDITION_TYPE.js","webpack:///./src/components/design-center/components/flow/helpers/NodeUtils.js","webpack:///./src/components/design-center/constants/LOGICAL_SIGN.js","webpack:///./src/components/design-center/components/flow/helpers/Node.js","webpack:///./src/components/design-center/components/flow/helpers/FlowGraph.js","webpack:///./src/components/design-center/constants/OPTIONAL_PERSONAL.js","webpack:///./src/components/design-center/utils/adapterHelpers.js","webpack:///./src/components/design-center/utils/fieldsHelpers.js","webpack:///./src/components/design-center/constants/CONDITION_ADDITION.js","webpack:///./src/components/design-center/adapters/toModel.js","webpack:///./src/components/design-center/utils/checkFlowModel.js","webpack:///./src/components/design-center/components/flow/components/nodes/sponsor.vue","webpack:///./src/components/design-center/components/flow/components/nodes/approver.vue","webpack:///./src/components/design-center/components/flow/components/nodes/notifier.vue","webpack:///./src/components/design-center/components/flow/components/nodes/condition.vue","webpack:///./src/components/design-center/components/flow/components/nodes/parallel.vue","webpack:///./src/components/design-center/adapters/toJSON.js","webpack:///./src/components/design-center/components/panel/index.vue?335b","webpack:///./src/components/design-center/components/panel/_base-block.vue?2408","webpack:///src/components/design-center/components/panel/_base-block.vue","webpack:///./src/components/design-center/components/panel/_base-block.vue?b9f4","webpack:///./src/components/design-center/components/panel/_base-block.vue","webpack:///./src/components/design-center/components/panel/_base-permission-table.vue?a65f","webpack:///./src/components/design-center/constants/FLOW_TYPE.js","webpack:///src/components/design-center/components/panel/_base-permission-table.vue","webpack:///./src/components/design-center/components/panel/_base-permission-table.vue?11d8","webpack:///./src/components/design-center/components/panel/_base-permission-table.vue","webpack:///./src/components/design-center/components/panel/sponsor.vue?a577","webpack:///src/components/design-center/components/panel/sponsor.vue","webpack:///./src/components/design-center/components/panel/sponsor.vue?c752","webpack:///./src/components/design-center/components/panel/sponsor.vue","webpack:///./src/components/design-center/components/panel/approver.vue?f2ba","webpack:///./src/components/design-center/components/panel/_base-submit-picker.vue?576a","webpack:///src/components/design-center/components/panel/_base-submit-picker.vue","webpack:///./src/components/design-center/components/panel/_base-submit-picker.vue?48ea","webpack:///./src/components/design-center/components/panel/_base-submit-picker.vue","webpack:///./src/components/design-center/constants/ROLLBACK_ENUM.js","webpack:///./src/components/design-center/service/index.js","webpack:///./src/components/design-center/utils/objectToOptions.js","webpack:///./src/components/design-center/constants/POSITION_LABEL_SELECTION.js","webpack:///src/components/design-center/components/panel/approver.vue","webpack:///./src/components/design-center/components/panel/approver.vue?2ee6","webpack:///./src/components/design-center/components/panel/approver.vue?267f","webpack:///./src/components/design-center/components/panel/notifier.vue?260a","webpack:///src/components/design-center/components/panel/notifier.vue","webpack:///./src/components/design-center/components/panel/notifier.vue?795a","webpack:///./src/components/design-center/components/panel/notifier.vue","webpack:///./src/components/design-center/components/panel/parallel.vue?c9d0","webpack:///src/components/design-center/components/panel/parallel.vue","webpack:///./src/components/design-center/components/panel/parallel.vue?e7ff","webpack:///./src/components/design-center/components/panel/parallel.vue","webpack:///./src/components/design-center/components/panel/condition.vue?043a","webpack:///src/components/design-center/components/panel/condition.vue","webpack:///./src/components/design-center/components/panel/condition.vue?6c1c","webpack:///./src/components/design-center/components/panel/condition.vue","webpack:///src/components/design-center/components/panel/index.vue","webpack:///./src/components/design-center/components/panel/index.vue?1528","webpack:///./src/components/design-center/components/panel/index.vue?d7f7","webpack:///./src/components/design-center/components/flow/components/flow-node.vue?7e3b","webpack:///./src/components/design-center/components/flow/components/_base-add-btn.vue?478d","webpack:///./src/components/design-center/components/flow/constants/FLOW_ADD_BTN_TYPES.js","webpack:///src/components/design-center/components/flow/components/_base-add-btn.vue","webpack:///./src/components/design-center/components/flow/components/_base-add-btn.vue?9748","webpack:///./src/components/design-center/components/flow/components/_base-add-btn.vue","webpack:///./src/components/design-center/components/flow/components/nodes/_base-node.vue?b492","webpack:///src/components/design-center/components/flow/components/nodes/_base-node.vue","webpack:///./src/components/design-center/components/flow/components/nodes/_base-node.vue?3995","webpack:///./src/components/design-center/components/flow/components/nodes/_base-node.vue","webpack:///src/components/design-center/components/flow/components/nodes/sponsor.vue","webpack:///./src/components/design-center/components/flow/components/nodes/sponsor.vue?35ab","webpack:///src/components/design-center/components/flow/components/nodes/approver.vue","webpack:///./src/components/design-center/components/flow/components/nodes/approver.vue?6f1b","webpack:///src/components/design-center/components/flow/components/nodes/notifier.vue","webpack:///./src/components/design-center/components/flow/components/nodes/notifier.vue?b7af","webpack:///./src/components/design-center/components/flow/components/nodes/_base-branch-node.vue?f70d","webpack:///src/components/design-center/components/flow/components/nodes/_base-branch-node.vue","webpack:///./src/components/design-center/components/flow/components/nodes/_base-branch-node.vue?b938","webpack:///./src/components/design-center/components/flow/components/nodes/_base-branch-node.vue","webpack:///src/components/design-center/components/flow/components/nodes/condition.vue","webpack:///./src/components/design-center/components/flow/components/nodes/condition.vue?ded8","webpack:///src/components/design-center/components/flow/components/nodes/parallel.vue","webpack:///./src/components/design-center/components/flow/components/nodes/parallel.vue?9bb6","webpack:///./src/components/design-center/components/flow/components/nodes/end.vue?ad34","webpack:///src/components/design-center/components/flow/components/nodes/end.vue","webpack:///./src/components/design-center/components/flow/components/nodes/end.vue?78a5","webpack:///./src/components/design-center/components/flow/components/nodes/end.vue","webpack:///src/components/design-center/components/flow/components/flow-node.vue","webpack:///./src/components/design-center/components/flow/components/flow-node.vue?897f","webpack:///./src/components/design-center/components/flow/components/flow-node.vue","webpack:///./src/components/design-center/components/flow/components/flow-branch-col.vue?3d96","webpack:///src/components/design-center/components/flow/components/flow-branch-col.vue","webpack:///./src/components/design-center/components/flow/components/flow-branch-col.vue?04b3","webpack:///./src/components/design-center/components/flow/components/flow-branch-col.vue","webpack:///./src/components/design-center/components/flow/components/flow-branch-node.vue?c751","webpack:///src/components/design-center/components/flow/components/flow-branch-node.vue","webpack:///./src/components/design-center/components/flow/components/flow-branch-node.vue?3716","webpack:///./src/components/design-center/components/flow/components/flow-branch-node.vue","webpack:///./src/components/design-center/components/flow/index.js","webpack:///./src/components/design-center/_condition-settings.vue?d805","webpack:///./src/components/design-center/utils/conditionAdapters.js","webpack:///./src/enums/orgNodeType.js","webpack:///./src/components/design-center/constants/CONDITION_LEVEL.js","webpack:///./src/components/design-center/utils/pickerDataAdapters.js","webpack:///./src/directives/ref.js","webpack:///src/components/design-center/_condition-settings.vue","webpack:///./src/components/design-center/_condition-settings.vue?2654","webpack:///./src/components/design-center/_condition-settings.vue","webpack:///src/components/design-center/index.vue","webpack:///./src/components/design-center/index.vue?3110","webpack:///./src/components/design-center/index.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/App.vue?c650","webpack:///./src/components/design-center/components/panel/approver.vue?82a7","webpack:///./src/components/design-center/components/panel/index.vue?8d57","webpack:///./src/components/design-center/components/panel/approver.vue?0544"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Vue","use","Element","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","directives","rawName","isReady","expression","modifiers","staticClass","flowFields","startNode","currNode","on","handleClickNode","handleUpdateNode","ref","projectSysNo","joinPlan","visible","$event","conditionVisible","conditionFields","usingConditionFields","slot","_v","staticStyle","_e","handleSave","nodesMap","Map","NodeManager","nodeOrNodeId","has","_getNodeId","isExist","Error","node","Node","set","nodeId","removeChild","getNode","childNode","removeNode","delete","clear","addNode","SPONSOR_NODE","APPROVER_NODE","CONDITION_BRANCH","CONDITION_NODE","CONDITION_BRANCH_END","PARALLEL_BRANCH","PARALLEL_NODE","PARALLEL_BRANCH_END","NOTIFIER_NODE","END_NODE","FLOW_NODE_TYPE","title","content","contentIcon","customTitleStyle","backgroundColor","placeholder","titleIcon","errorState","btnText","desc","color","fontSize","FLOW_NODE_TYPES","OPERATION","AUDIT","CC","START","END","START_EXCLUSIVE_GATEWAY","END_EXCLUSIVE_GATEWAY","START_PARALLEL_GATEWAY","END_PARALLEL_GATEWAY","PARTICIPANT_TYPES","POSITION","DEPARTMENT","ASSIGN","OPTIONAL_PERSONNEL","POSITION_LABEL","DEPARTMENT_LABEL","INITIATOR","POSITION_OF_FORM","DEPARTMENT_OF_FORM","DEPARTMENT_POSITION_OF_FORM","ORGANIZATION_POSITION_OF_FORM","SUBMIT_PICKER_TYPES","ROLE","USER","PROJECT","ORGANIZATION","TRANSFER_TYPE","PARTICIPANT_PICKER_TYPES","USER_KEYS","type","PARTICIPANT_PICKER_KEYS","parentName","organizationType","FORM_FIELDS_KEYS","DEPT","COMPANY","JOB","FORM_FIELDS_TYPES","PARTICIPANT_TYPES_NAME","PARTICIPANT_TYPES_MODEL","list","userName","userSysNo","positionName","positionSysNo","formFieldKey","departmentName","departmentSysNo","optionalScope","optionalType","sysNo","positionLabelName","positionLabelSysNo","LEVEL_TYPES","SELF_DEPARTMENT","SELF","UPPER_FIRST","UPPER_SECOND","BRANCH_ORGANIZATION","AUDIT_TYPES","CANDIDATE","COUNTERSIGN","AUDIT_TYPES_NAME","NO_AUDIT_TYPES","AUTO_COMPLETE","CANNOT_SUBMIT","TIME_TYPES","SECOND","MINUTE","HOUR","DAY","CC_TYPES_NAME","PEOPLE_TYPES","PEOPLE_TYPES_KEY_MAP","PEOPLE_PICKER_TYPES","PEOPLE_TYPES_TITLE","CONDITION_TYPES","STRING","TEXT","TEXTAREA","RADIO","COMBO","LIST","NUMBER","MONEY","SERIAL","CONDITION_PEOPLE_TYPES","CONDITION_FIELD_TYPES","NUMBER_CONDITION","EQUAL","NE","LT","LTE","GT","GTE","NUMBER_SELECTION_MAP","STRING_CONDITION","CONTAINS","NOT_CONTAINS","STRING_SELECTION_MAP","SELECTION_MAP","EQUAL_ANY_ONE","NE_ANY_ONE","COMBO_SELECTION_MAP","RADIO_SELECTION_MAP","CONDITION_CODE_TYPES","formFieldList","opinionSetting","textOpinionName","textOpinionEnabled","textOpinionRequired","textOpinionTip","writeSignatureName","writeSignatureEnabled","writeSignatureRequired","writeSignatureCanUseLast","taskRule","canTransfer","transfer","canRollback","participantEmptyRule","initiatorAutoComplete","participant","deepCopy","obj","Date","getTime","Array","reduce","arr","item","keys","newObj","deepMerge","ks","k","Flow","model","props","NODE_MAP","opts","base","ReferenceError","values","FlowNodeType","forEach","registerNode","FlowNodeModel","FlowNodeProps","GENERAL_CONDITION","OTHER_CONDITION","createChildNode","parentNode","TypeError","newChildNode","isBranchNode","isConditionBranchNode","createConditionBranchNode","isParallelBranchNode","createParallelBranchNode","isBranchChildNode","prevId","childrenNodes","getChildrenNodes","isConditionNode","createConditionNode","isLastConditionNode","conditionType","isParallelNode","createParallelNode","createNode","getChildNode","resetChildNode","next","fixNodeRef","oldChildNode","firstChildNode","conditionBranchNode","TYPE","conditionChildrenNodes","conditionBranchEndNode","oppositeTaskId","parallelBranchNode","parallelChildrenNodes","parallelBranchEndNode","alias","removeOldNode","needRemoveParent","deletedNodeIndex","findIndex","grandParentNode","reservedNodeIndex","filter","_","index","reservedChild","grandChildNode","getLastNode","getNodeType","getNextSiblingNode","getNodeTypeByBranch","branchType","needMergeFields","includes","nodeDeepIterator","cb","children","currentIndex","indexOf","AND","OR","LOGIC_SIGN_NAME","getUUID","isArray","updateNode","val","undefined","update","map","parentFullName","join","conditions","fields","fieldNames","fieldTypes","fieldOptions","fieldKey","fieldName","fieldType","options","condition","conditionCode","unionLogic","leftBracket","rightBracket","str","find","label","every","Boolean","trim","i1","i2","prevNode","temp1","temp2","updateModel","arguments","prefix","replace","Math","random","v","toString","FlowGraph","vertices","edges","vertexKey","getVertexKey","vertex","adjacentVertex","pop","removeEdge","w","startVertex","getVertexByKey","endVertex","addVertex","console","warn","getEdgesByKey","vertexV","vertexW","fn","queue","visited","curr","neighbors","getNeighbors","traverseDFS","log","OPTIONAL_SCOPE_KEYS","TENANT_ORGANIZATION","UPPER_LEVEL_ORGANIZATION","LOWER_LEVEL_ORGANIZATION","THIS_LEVEL_ORGANIZATION","ASSIGN_POSITION_LABEL","ASSIGN_POSITION","ASSIGN_USER","OPTIONAL_TYPE_ENUM","OPTIONAL_SCOPE_ENUM","createFlowGraph","getSourceNode","graph","getTargetNode","getServerType","SERVER_NODE_TYPE","convertParticipant","PICKER_KEY","FORM_KEY","generateParticipantModal","isAssignType","pickerKey","scope","field","hasUser","unitType","updateFieldsWithMerge","newFields","nodeFields","nodeType","mergeFields","canWrite","canView","require","nodeCanWrite","fieldCanWrite","updateFieldsWhenCreate","newFieldsMap","geneFieldsKeyMap","nodeFieldsMap","newKeys","START_INITIATOR","START_USER_ORG","START_USER_DEPARTMENT","START_USER_POST","START_USER_PROJECT","START_USER_POST_LABEL","SPONSOR_TYPE_NAME","SPONSOR_PICKER_TYPE","toModel","taskList","sequenceList","isBusinessFlow","connectGraphEdges","findTask","findTaskById","sourceTaskId","targetTaskId","conditionList","sourceNode","toNode","targetNode","filterConditions","conditionNode","read","addEdge","drawNodeLinesByGraph","commonNodeMap","taskNodeId","taskNodeName","taskType","needConvert","tasks","cachedTasks","cache","task","id","isSponsor","checkGraphAndNodeState","hasApproverNode","traverseBFS","errorMessage","checkNodeState","defaultTitle","FlowNodeTypeModel","text","endsWith","startsWith","defaultModel","nodeTitle","checkParticipantStatus","checkConditionStatus","level","substring","haveConditions","hasMissedFieldKey","checkBracketPairs","items","leftStack","rightQueue","leftPointer","rightPointer","last","graphMap","toJSON","ignoreError","connectGraphEdge","createDFSGraphConnector","genSequenceItems","createSequenceGenerator","concat","toTask","END_NODES_STACK","connect","pushedIntoStack","createSequenceItem","createUniqueSequenceItem","push2sequenceList","neighbor","taskNode","taskNodeDescription","buttonList","participantProps","cached","JSON","stringify","END_TASK_NODE","_g","_b","$attrs","$listeners","callback","$$v","activeName","computedNode","tag","canCallbackFormData","getFlowFormInfo","flowType","getFlowBaseInfo","$slots","_t","_s","String","default","component","BUSINESS_FLOW","FORM_FLOW","handleChange","$set","FLOW_NODE_TYPE_ENUM","components","PanelBlock","methods","_l","option","handleAddPeople","participantTypes","handleClearTags","selectOptions","APPROVE_ORDER_TYPE","PRIORITY","showAddBtn","isDraggable","class","handleDeleteTag","showClearBtn","generateBtnName","handleOptional","user","handleScopeClose","isOptionalPersonal","isDirectRollback","pickerVisible","pickerType","computedParticipantsList","handleConfirmPicker","stationVisible","handleCallBack","computedTitle","handlePickerConfirm","ROLLBACK_ENUM","SEQUENCE","BACK_TRACKED","CHECK_USER_EXIST_URL","checkUserExistsOrNot","Http","post","checkDoesUserExist","participantType","sysNoList","then","users","userExistStatus","status","existsUser","objectToOptions","entries","isNaN","ALL","APPROVE_ORDER_ENUM","computedListeners","handleAddNode","editable","icon","styles","style","FLOW_NODE_MODEL","showRemove","stopPropagation","handleRemoveNode","inheritAttrs","$emit","getRootNode","BaseNode","render","h","computedNodeTitle","handleMoveForward","priority","handleMoveBackward","movable","total","computed","settings","showArrowLeft","showArrowRight","watch","move","BaseBranchNode","isLast","isPrevOfLast","nextSiblingNode","nodeProps","left","right","adapters","FlowNode","FlowBranchCol","FlowBranchNode","rootNode","PropTypes","instanceOf","required","bool","def","mounted","renderNode","attributes","click","renderBranchNode","nodes","form","handleClickConfirm","group","groupIndex","LOGIC_SIGNS","handleRemoveConditionGroup","message","trigger","handleConditionTypeChange","getConditionTypes","getPickerType","getFieldOptions","handleConditionPickerRef","isMultipleType","handleConitionValueChange","isPosition","nativeOn","handleClickPickerInput","handleRemoveCondition","handleAddCondition","handleAddConditionGroup","isSubmitterPickerVisible","computedPickerTitle","computedPickerValue","isTabTreePickerVisible","OrgNodeType","Department","ConstructUnit","ConstructUnitGroup","positionVisible","computedPositionPickerValue","handleClickCancel","conditionToGroup","foundLeftBracketFlag","cacheItems","groupToCondition","groups","order","lastIndex","Platform","Company","SubCompany","Project","Role","User","SubCompanyGroup","ProjectGroup","DepartmentGroup","CompanyDepartmentGroup","CompanyProjectGroup","CURRENT_AND_SUBORDINATE","CURRENT","SUBORDINATE","getDefaultNodeType","orgNodeType","getConditionLevelByNodeType","CONDITION_LEVEL","el","binding","vnode","nextTick","componentInstance","oldVnode","oldBinding","directive","elm","unbind","nodeName","config","productionTip","App","$mount"],"mappings":"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","file":"js/app.ec2dc1b8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_condition-settings.vue?vue&type=style&index=0&id=f908b5ce&lang=scss&scoped=true&\"","import Vue from 'vue'\nimport Element from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\n\nVue.use(Element)\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('DesignCenter')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.lock\",value:(!_vm.isReady),expression:\"!isReady\",modifiers:{\"lock\":true}}],staticClass:\"flow-container\"},[_c('FlowLayout',{attrs:{\"fields\":_vm.flowFields,\"root-node\":_vm.startNode,\"curr-node\":_vm.currNode},on:{\"click-node\":_vm.handleClickNode,\"update-node\":_vm.handleUpdateNode}}),_c('SidePanel',{ref:\"panel\",attrs:{\"node\":_vm.currNode,\"project-only\":!!_vm.projectSysNo,\"join-plan\":_vm.joinPlan,\"fields\":_vm.flowFields,\"visible\":_vm.visible},on:{\"update:visible\":function($event){_vm.visible=$event}}}),(_vm.currNode && _vm.conditionVisible)?_c('ConditionSettings',{attrs:{\"node\":_vm.currNode,\"fields\":_vm.conditionFields,\"using-condition-fields\":_vm.usingConditionFields,\"visible\":_vm.conditionVisible},on:{\"update:visible\":function($event){_vm.conditionVisible=$event}}},[_c('template',{slot:\"title\"},[_vm._v(\" 流转条件设置 \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"(表单必填字段可作为审批条件)\")])])],2):_vm._e(),(_vm.isDev)?_c('el-button',{staticStyle:{\"position\":\"fixed\",\"right\":\"20px\",\"bottom\":\"20px\"},on:{\"click\":function($event){return _vm.handleSave(true)}}},[_vm._v(\"TO JSON\")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Node from './Node'\n\n/* the Map used for Cache all nodes */\n/** @type {Map<string, Node>} nodesMap */\nconst nodesMap = new Map()\n\n/**\n * @class NodeManager\n */\nexport default class NodeManager {\n  /**\n   * @static\n   * @memberof NodeManager\n   * @method isExist\n   * @param {Node|string} node\n   * @returns {boolean}\n   */\n  static isExist(nodeOrNodeId) {\n    return nodesMap.has(this._getNodeId(nodeOrNodeId))\n  }\n\n  /**\n   * @static\n   * @memberof NodeManager\n   * @method getNode\n   * @param {Node|string} nodeOrNodeId\n   * @returns {Node}\n   */\n  static getNode(nodeOrNodeId) {\n    if (!NodeManager.isExist(this._getNodeId(nodeOrNodeId))) {\n      throw new Error(\n        `The node ${this._getNodeId(nodeOrNodeId)} was not found in NodeManager`\n      )\n    }\n\n    return nodesMap.get(this._getNodeId(nodeOrNodeId))\n  }\n\n  /**\n   * @static\n   * @memberof NodeManager\n   * @method addNode\n   * @param {Node} node\n   */\n  static addNode(node) {\n    if (!(node instanceof Node)) return\n    nodesMap.set(node.nodeId, node)\n  }\n\n  static updateNode = this.addNode\n\n  /**\n   * @static\n   * @memberof NodeManager\n   * @method removeNode DFS 删除分子节点及其所有子节点\n   * @param {Node|string} nodeOrNodeId\n   * @param {boolean} removeChild 递归删除子节点\n   */\n  static removeNode(nodeOrNodeId, removeChild = true) {\n    let node = NodeManager.getNode(nodeOrNodeId)\n\n    if (!node || !(node instanceof Node)) return\n\n    if (node.childNode && removeChild) {\n      NodeManager.removeNode(node.childNode, removeChild)\n    }\n\n    nodesMap.delete(node.nodeId)\n\n    if (process.env.NODE_ENV === 'development') {\n      console.log(\n        'Deleted node.nodeId is: ',\n        node.nodeId,\n        '\\nnodesMap: ',\n        nodesMap\n      )\n    }\n\n    node = null\n  }\n\n  static clear() {\n    nodesMap.clear()\n  }\n\n  /**\n   * _getNodeId\n   * @private\n   * @protected\n   * @param {Node|string} nodeOrNodeId\n   * @returns {string}\n   */\n  static _getNodeId(nodeOrNodeId) {\n    let nodeId = nodeOrNodeId\n\n    if (nodeOrNodeId instanceof Node) {\n      nodeId = nodeOrNodeId.nodeId\n    }\n\n    return nodeId\n  }\n}\n","/**\n * @readonly\n * @enum\n */\nexport default {\n  // 发起人: Sponsor node => type: 'sponsor'\n  SPONSOR_NODE: 'sponsor',\n\n  // 审批人: Approver node => type: 'approver'\n  APPROVER_NODE: 'approver',\n\n  // 条件分支: Condition Branch node => type: 'condition-branch'\n  CONDITION_BRANCH: 'cbs',\n  CONDITION_NODE: 'condition',\n  CONDITION_BRANCH_END: 'cbe',\n\n  // 并行分支: ParallelBranch node => type: 'parallel-branch'\n  PARALLEL_BRANCH: 'pbs',\n  PARALLEL_NODE: 'parallel',\n  PARALLEL_BRANCH_END: 'pbe',\n\n  // 抄送/通知人: Carbon copy node => type: 'notifier'\n  NOTIFIER_NODE: 'notifier',\n\n  // 结束: End node => type: 'node'\n  END_NODE: 'end',\n}\n","import FLOW_NODE_TYPE from './FLOW_NODE_TYPE_ENUM'\n\n/**\n * @readonly\n * @enum\n */\nexport default {\n  [FLOW_NODE_TYPE.SPONSOR_NODE]: {\n    title: '发起人',\n    content: '所有人',\n    // titleIcon: 'el-icon-user-solid',\n    contentIcon: 'el-icon-arrow-right',\n    customTitleStyle: {\n      backgroundColor: '#2172C8',\n    },\n  },\n  [FLOW_NODE_TYPE.APPROVER_NODE]: {\n    title: '审批人',\n    content: '',\n    placeholder: '请选择审批人',\n    titleIcon: 'el-icon-s-check',\n    contentIcon: 'el-icon-arrow-right',\n    customTitleStyle: {\n      backgroundColor: '#F49150',\n    },\n    errorState: false\n  },\n\n  [FLOW_NODE_TYPE.CONDITION_BRANCH]: {\n    title: '条件分支',\n    btnText: '添加条件',\n    titleIcon: 'el-icon-s-grid',\n  },\n  [FLOW_NODE_TYPE.CONDITION_NODE]: {\n    title: '条件节点',\n    desc: '优先级',\n    placeholder: '请设置条件',\n    customTitleStyle: {\n      color: '#67C23A',\n      backgroundColor: 'rgb(255, 255, 255)',\n    },\n    errorState: false\n  },\n  [FLOW_NODE_TYPE.CONDITION_BRANCH_END]: {\n    title: '条件结束'\n  },\n\n  [FLOW_NODE_TYPE.PARALLEL_BRANCH]: {\n    title: '并行分支',\n    btnText: '添加并行分支',\n    titleIcon: 'el-icon-plus',\n  },\n  [FLOW_NODE_TYPE.PARALLEL_NODE]: {\n    title: '并行分支',\n    content: '',\n    // desc: '',\n    // content: '请设置条件',\n    customTitleStyle: {\n      color: '#F49150',\n      fontSize: '13px',\n      backgroundColor: 'rgb(255, 255, 255)',\n    },\n  },\n  [FLOW_NODE_TYPE.PARALLEL_BRANCH_END]: {\n    title: '并行结束',\n  },\n\n  [FLOW_NODE_TYPE.NOTIFIER_NODE]: {\n    title: '抄送人',\n    content: '',\n    placeholder: '请选择抄送人',\n    titleIcon: 'el-icon-message-solid',\n    contentIcon: 'el-icon-arrow-right',\n    customTitleStyle: {\n      backgroundColor: '#5AAAFF',\n    },\n    errorState: false\n  },\n\n  [FLOW_NODE_TYPE.END_NODE]: {\n    content: '流程结束',\n  },\n}\n","/**\n * @readonly\n * @description 节点类型常量\n */\nexport const FLOW_NODE_TYPES = {\n  /**\n   * 经办节点\n   */\n  OPERATION: 'operation', // \"经办\"\n\n  /**\n   * 审批节点\n   */\n  AUDIT: 'audit', // \"审批\"\n\n  /**\n   * 抄送节点\n   */\n  CC: 'cc', // \"抄送\"\n\n  /**\n   * 开始\n   */\n  START: 'start', // \"开始\"\n\n  /**\n   * 结束\n   */\n  END: 'end', // \"结束\"\n\n  /**\n   * 条件开始\n   */\n  START_EXCLUSIVE_GATEWAY: 'start_exclusive_gateway', // \"条件开始\"\n\n  /**\n   * 条件结束\n   */\n  END_EXCLUSIVE_GATEWAY: 'end_exclusive_gateway', // \"条件结束\"\n\n  /**\n   * 开始并行网关\n   */\n  START_PARALLEL_GATEWAY: 'start_parallel_gateway', // \"开始并行网关\"\n\n  /**\n   * 结束并行网关\n   */\n  END_PARALLEL_GATEWAY: 'end_parallel_gateway', // \"结束并行网关\"\n}\n\n/**\n * @readonly\n * @enum\n * @description 节点 Map 枚举 => { [key: string] => string }\n */\n/* export const FLOW_NODE_TYPES_NAME = {\n  [FLOW_NODE_TYPES.OPERATION]: '经办',\n  [FLOW_NODE_TYPES.AUDIT]: '审批',\n  [FLOW_NODE_TYPES.CC]: '抄送',\n  [FLOW_NODE_TYPES.START]: '开始',\n  [FLOW_NODE_TYPES.END]: '结束',\n  [FLOW_NODE_TYPES.EXCLUSIVE_GATEWAY]: '条件分支',\n  [FLOW_NODE_TYPES.START_PARALLEL_GATEWAY]: '开始并行网关',\n  [FLOW_NODE_TYPES.END_PARALLEL_GATEWAY]: '结束并行网关',\n} */\n\n/**\n * @readonly\n * @enum\n * @description 参与人类型枚举 => { [key: string] => string }\n */\nexport const PARTICIPANT_TYPES = {\n  /**\n   * 任务参与人-角色\n   */\n  POSITION: 'position', // \"角色\" role\n\n  /**\n   * 任务参与人-部门\n   */\n  DEPARTMENT: 'department', // \"部门\" department\n\n  /**\n   * 任务参与人-指定人\n   */\n  ASSIGN: 'assign', // \"指定人员\" user\n\n  /**\n   * 任务参与人-发起人自选\n   */\n  OPTIONAL_PERSONNEL: 'optional_personnel', // \"发起人自选\"\n\n  /**\n   * 任务参与人-角色标签\n   */\n  POSITION_LABEL: 'position_label', // \"角色标签\"\n\n  /**\n   * 任务参与人-部门标签\n   */\n  DEPARTMENT_LABEL: 'department_label', // \"部门标签\"\n\n  /**\n   * 任务参与人-发起人自己\n   */\n  INITIATOR: 'initiator', // \"发起人自己\" // 不选，直接勾选\n\n  /**\n   * 任务参与人-表单里的角色\n   */\n  POSITION_OF_FORM: 'position_of_form', // \"表单里的角色\"\n\n  /**\n   * 任务参与人-表单里的部门\n   */\n  DEPARTMENT_OF_FORM: 'department_of_form', // \"表单里的部门\"\n\n  /**\n   * 任务参与人-表单部门中的角色\n   */\n  DEPARTMENT_POSITION_OF_FORM: 'department_position_of_form', // \"表单部门中的角色\"\n\n  /**\n   * 任务参与人-表单公司中的角色\n   */\n  ORGANIZATION_POSITION_OF_FORM: 'organization_position_of_form', // \"表单公司中的角色\"\n}\n\n/**\n * @readonly\n * @enum\n * @description 选择审批人弹层 picker 的类型枚举\n */\nexport const SUBMIT_PICKER_TYPES = {\n  ROLE: 'role',\n  USER: 'user',\n  PROJECT: 'project',\n  DEPARTMENT: 'department',\n  ORGANIZATION: 'company',\n}\n\n/**\n * @readonly\n * @enum\n * @description 选择审批人弹层 picker 的 key 枚举\n */\nexport const SUBMIT_PICKER_KEYS = {\n  [PARTICIPANT_TYPES.POSITION]: 'positionList',\n  [PARTICIPANT_TYPES.POSITION_LABEL]: '',\n  [PARTICIPANT_TYPES.POSITION_OF_FORM]: '',\n  [PARTICIPANT_TYPES.DEPARTMENT]: 'departmentList',\n  [PARTICIPANT_TYPES.DEPARTMENT_LABEL]: '',\n  [PARTICIPANT_TYPES.DEPARTMENT_OF_FORM]: '',\n  [PARTICIPANT_TYPES.DEPARTMENT_POSITION_OF_FORM]: '',\n  [PARTICIPANT_TYPES.INITIATOR]: '',\n  [PARTICIPANT_TYPES.ASSIGN]: 'userList',\n  [PARTICIPANT_TYPES.OPTIONAL_PERSONNEL]: '',\n}\n\nexport const TRANSFER_TYPE = SUBMIT_PICKER_TYPES.USER\n\n/**\n * @readonly\n * @enum\n * @description 参与人对应的各个弹层 picker 的类型枚举\n */\nexport const PARTICIPANT_PICKER_TYPES = {\n  [PARTICIPANT_TYPES.POSITION]: SUBMIT_PICKER_TYPES.ROLE,\n  [PARTICIPANT_TYPES.DEPARTMENT]: SUBMIT_PICKER_TYPES.DEPARTMENT,\n  [PARTICIPANT_TYPES.ASSIGN]: SUBMIT_PICKER_TYPES.USER,\n  [TRANSFER_TYPE]: SUBMIT_PICKER_TYPES.USER,\n}\n\nconst USER_KEYS = {\n  name: 'userName',\n  value: 'userSysNo',\n  type: SUBMIT_PICKER_TYPES.USER,\n}\n\n/**\n * @readonly\n * @enum\n * @description 参与人对应的各个弹层 picker 不同 type 的不同 key 枚举\n */\nexport const PARTICIPANT_PICKER_KEYS = {\n  [PARTICIPANT_TYPES.POSITION]: {\n    name: 'positionName',\n    value: 'positionSysNo',\n    type: SUBMIT_PICKER_TYPES.ROLE,\n  },\n  [PARTICIPANT_TYPES.DEPARTMENT]: {\n    name: 'departmentName',\n    value: 'departmentSysNo',\n    type: SUBMIT_PICKER_TYPES.DEPARTMENT,\n  },\n  [PARTICIPANT_TYPES.ASSIGN]: USER_KEYS,\n  [TRANSFER_TYPE]: USER_KEYS,\n  [SUBMIT_PICKER_TYPES.ORGANIZATION]: {\n    name: 'organizationName',\n    value: 'organizationSysNo',\n    type: SUBMIT_PICKER_TYPES.ORGANIZATION,\n  },\n  [PARTICIPANT_TYPES.POSITION_LABEL]: {\n    name: 'positionLabelName',\n    value: 'positionLabelSysNo',\n    parentName: 'parentFullName',\n    organizationType: 'organizationType',\n    type: PARTICIPANT_TYPES.POSITION_LABEL,\n  },\n}\n\n/**\n * @readonly\n * @description 表单字段类 key\n * @from 贺双双\n */\nexport const FORM_FIELDS_KEYS = {\n  USER: 'user', // 选择人员\n  DEPT: 'dept', // \"选择部门\"\n  DEPARTMENT: 'department', // \"选择部门\"\n  PROJECT: 'project', // \"选择项目\"\n  COMPANY: 'company', // \"选择公司\"\n  JOB: 'job', // \"选择角色\"\n}\n\n/**\n * @readonly\n * @enum\n * @description 表单字段类型 枚举\n * @from 贺双双\n */\nexport const FORM_FIELDS_TYPES = {\n  // 表单里的角色\n  [PARTICIPANT_TYPES.POSITION_OF_FORM]: FORM_FIELDS_KEYS.JOB,\n  // 表单里的部门\n  [PARTICIPANT_TYPES.DEPARTMENT_OF_FORM]: FORM_FIELDS_KEYS.DEPARTMENT,\n  // 表单部门中的角色\n  [PARTICIPANT_TYPES.DEPARTMENT_POSITION_OF_FORM]: FORM_FIELDS_KEYS.DEPT,\n  // 表单公司中的角色\n  [PARTICIPANT_TYPES.ORGANIZATION_POSITION_OF_FORM]: FORM_FIELDS_KEYS.JOB,\n}\n\n/**\n * @readonly\n * @enum\n * @description 参与人 Map 枚举 => { [key: string] => string }\n */\nexport const PARTICIPANT_TYPES_NAME = {\n  [PARTICIPANT_TYPES.POSITION_LABEL]: '岗位标签',\n  [PARTICIPANT_TYPES.POSITION]: '岗位',\n  // [PARTICIPANT_TYPES.DEPARTMENT]: '部门',\n  [PARTICIPANT_TYPES.ASSIGN]: '指定人员',\n  /* TODO: 暂时禁用 */\n  [PARTICIPANT_TYPES.OPTIONAL_PERSONNEL]: '发起人自选',\n  // [PARTICIPANT_TYPES.DEPARTMENT_LABEL]: '部门标签',\n  [PARTICIPANT_TYPES.INITIATOR]: '发起人自己',\n  // [PARTICIPANT_TYPES.POSITION_OF_FORM]: '表单里的角色',\n  // [PARTICIPANT_TYPES.DEPARTMENT_OF_FORM]: '表单里的部门',\n  // [PARTICIPANT_TYPES.DEPARTMENT_POSITION_OF_FORM]: '表单部门中的角色',\n  // [PARTICIPANT_TYPES.ORGANIZATION_POSITION_OF_FORM]: '表单公司中的角色',\n}\n\n/**\n * @readonly\n * @enum\n * @description 参与人数据模型 Map  => { [key: string] => Model<T> }\n */\nexport const PARTICIPANT_TYPES_MODEL = {\n  /* 发起人自己： */\n  [PARTICIPANT_TYPES.INITIATOR]: {\n    type: PARTICIPANT_TYPES.INITIATOR,\n  },\n  /* 指定人员： */\n  [PARTICIPANT_TYPES.ASSIGN]: {\n    type: PARTICIPANT_TYPES.ASSIGN,\n    /* [SUBMIT_PICKER_KEYS[PARTICIPANT_TYPES.ASSIGN]] */\n    list: [\n      {\n        userName: '',\n        userSysNo: 0,\n      },\n    ],\n  },\n\n  /* 角色： */\n  [PARTICIPANT_TYPES.POSITION]: {\n    /* [SUBMIT_PICKER_KEYS[PARTICIPANT_TYPES.POSITION]] */\n    list: [\n      {\n        positionName: '', // roleName\n        positionSysNo: 0, // roleSysNo\n      },\n    ],\n    type: PARTICIPANT_TYPES.POSITION,\n  },\n  /* 表单中的角色： */\n  [PARTICIPANT_TYPES.POSITION_OF_FORM]: {\n    formFieldKey: 'required',\n    type: PARTICIPANT_TYPES.POSITION_OF_FORM,\n  },\n\n  /* 部门： */\n  [PARTICIPANT_TYPES.DEPARTMENT]: {\n    /* [SUBMIT_PICKER_KEYS[PARTICIPANT_TYPES.DEPARTMENT]] */\n    list: [\n      {\n        departmentName: '',\n        departmentSysNo: 0,\n      },\n    ],\n    type: PARTICIPANT_TYPES.DEPARTMENT,\n  },\n  /* 表单中的部门： */\n  [PARTICIPANT_TYPES.DEPARTMENT_OF_FORM]: {\n    formFieldKey: 'required' /* must be truly value */,\n    type: PARTICIPANT_TYPES.DEPARTMENT_OF_FORM,\n  },\n\n  /* 表单部门中的角色： */\n  [PARTICIPANT_TYPES.DEPARTMENT_POSITION_OF_FORM]: {\n    formFieldKey: 'required' /* must be truly value */,\n    type: PARTICIPANT_TYPES.DEPARTMENT_POSITION_OF_FORM,\n  },\n  /* 表单公司中的角色： */\n  [PARTICIPANT_TYPES.ORGANIZATION_POSITION_OF_FORM]: {\n    formFieldKey: 'required' /* must be truly value */,\n    type: PARTICIPANT_TYPES.ORGANIZATION_POSITION_OF_FORM,\n  },\n  /* 发起人自选： */\n  [PARTICIPANT_TYPES.OPTIONAL_PERSONNEL]: {\n    optionalScope: 'organization',\n    optionalType: 'single',\n    // specifiedList:\n    list: [\n      {\n        name: 'string',\n        sysNo: 0,\n      },\n    ],\n    type: PARTICIPANT_TYPES.OPTIONAL_PERSONNEL,\n  },\n  /* 角色标签： */\n  [PARTICIPANT_TYPES.POSITION_LABEL]: {\n    // level: 'self_department',\n    // positionLabelList\n    list: [\n      {\n        positionLabelName: 'string',\n        positionLabelSysNo: 0,\n      },\n    ],\n    type: PARTICIPANT_TYPES.POSITION_LABEL,\n  },\n  /* 部门标签： */\n  /* [PARTICIPANT_TYPES.DEPARTMENT_LABEL]: {\n    list: [\n      {\n        departmentLabelName: 'string',\n        departmentLabelSysNo: 0,\n      },\n    ],\n    level: 'self',\n    type: PARTICIPANT_TYPES.DEPARTMENT_LABEL,\n  }, */\n}\n\n/**\n * @readonly\n * @description 等级类型常量\n */\nexport const LEVEL_TYPES = {\n  /**\n   * 标签层级-本部门\n   */\n  SELF_DEPARTMENT: 'self_department', // \"本部门\"\n  /**\n   * 标签层级-本级\n   */\n  SELF: 'self', // \"本级\"\n\n  /**\n   * 标签层级-上一级\n   */\n  UPPER_FIRST: 'upper_first', // \"上一级\"\n\n  /**\n   * 标签层级-上二级\n   */\n  UPPER_SECOND: 'upper_second', // \"上二级\"\n\n  /**\n   * 标签层级-公司级\n   */\n  ORGANIZATION: 'organization', // \"公司级\"\n\n  /**\n   * 标签层级-分公司级\n   */\n  BRANCH_ORGANIZATION: 'branch_organization', // \"分公司级\"\n}\n\n/**\n * @readonly\n * @enum\n * @description 等级 Map 枚举 => { [key: string]: string }\n */\nexport const LEVEL_TYPES_NAME = {\n  [LEVEL_TYPES.SELF_DEPARTMENT]: '本部门',\n  [LEVEL_TYPES.SELF]: '本级',\n  [LEVEL_TYPES.UPPER_FIRST]: '上一级',\n  [LEVEL_TYPES.UPPER_SECOND]: '上二级',\n  [LEVEL_TYPES.ORGANIZATION]: '公司级',\n  [LEVEL_TYPES.BRANCH_ORGANIZATION]: '分公司级',\n}\n\n/**\n * @readonly\n * @description 审批类型常量\n */\nexport const AUDIT_TYPES = {\n  /**\n   * 或签（一名审批人同意或拒绝即可）\n   */\n  CANDIDATE: 'candidate', // \"或签\"\n\n  /**\n   * 会签（须所有审批人同意）\n   */\n  COUNTERSIGN: 'countersign', // \"会签\"\n\n  /**\n   * 依次处理\n   */\n  // SEQUENTIAL: 'sequential', // \"依次处理\"\n}\n\n/**\n * @readonly\n * @enum\n * @description 审批 Map 枚举 => { [key: string]: string }\n */\nexport const AUDIT_TYPES_NAME = {\n  /**\n   * 依次处理\n   */\n  // [AUDIT_TYPES.SEQUENTIAL]: '依次处理（根据流程顺序）',\n\n  /**\n   * 会签（须所有审批人同意）\n   */\n  [AUDIT_TYPES.COUNTERSIGN]: '会签（须所有审批人同意）',\n\n  /**\n   * 或签（一名审批人同意或拒绝即可）\n   */\n  [AUDIT_TYPES.CANDIDATE]: '或签（一名审批人同意或拒绝即可）',\n}\n\n/**\n * @readonly\n * @description 无审批人时类型常量\n */\nexport const NO_AUDIT_TYPES = {\n  /**\n   * 自动通过\n   */\n  AUTO_COMPLETE: 'auto_complete', // \"自动通过\"),\n\n  /**\n   * 不允许提交\n   */\n  CANNOT_SUBMIT: 'cannot_submit', // \"不允许提交\");\n}\n\n/**\n * @readonly\n * @enum\n * @description 无审批人时 Map 枚举 => { [key: string]: string }\n */\nexport const NO_AUDIT_TYPES_NAME = {\n  [NO_AUDIT_TYPES.AUTO_COMPLETE]: '自动通过',\n  [NO_AUDIT_TYPES.CANNOT_SUBMIT]: '不允许提交',\n}\n\n/**\n * @readonly\n * @description 时间类型常量\n */\nexport const TIME_TYPES = {\n  SECOND: 'S',\n  MINUTE: 'M',\n  HOUR: 'H',\n  DAY: 'D',\n}\n\n/**\n * @readonly\n * @enum\n * @description 时间 Map 枚举 => { [key: string]: string }\n */\nexport const TIME_TYPES_NAME = {\n  // [TIME_TYPES.SECOND]: '秒',\n  [TIME_TYPES.MINUTE]: '分',\n  [TIME_TYPES.HOUR]: '时',\n  [TIME_TYPES.DAY]: '天',\n}\n\n/**\n * @readonly\n * @enum\n * @description 抄送 Map 枚举 => { [key: string]: string }\n */\nexport const CC_TYPES_NAME = {\n  // [PARTICIPANT_TYPES.POSITION]:\n  //   PARTICIPANT_TYPES_NAME[PARTICIPANT_TYPES.POSITION],\n  // [PARTICIPANT_TYPES.DEPARTMENT]:\n  //   PARTICIPANT_TYPES_NAME[PARTICIPANT_TYPES.DEPARTMENT],\n  [PARTICIPANT_TYPES.POSITION_LABEL]:\n    PARTICIPANT_TYPES_NAME[PARTICIPANT_TYPES.POSITION_LABEL],\n  [PARTICIPANT_TYPES.ASSIGN]: PARTICIPANT_TYPES_NAME[PARTICIPANT_TYPES.ASSIGN],\n  [PARTICIPANT_TYPES.INITIATOR]:\n    PARTICIPANT_TYPES_NAME[PARTICIPANT_TYPES.INITIATOR],\n}\n\n/**\n * @readonly\n * @enum\n * @description 选人类型\n */\nexport const PEOPLE_TYPES = {\n  USER: 'user',\n  PROJECT: 'project',\n  DEPARTMENT: PARTICIPANT_TYPES.DEPARTMENT,\n  COMPANY: 'company',\n  JOB: 'job',\n  POSITION_LABEL: PARTICIPANT_TYPES.POSITION_LABEL,\n}\n\n// submitter-picker组件key值\nexport const PEOPLE_TYPES_KEY_MAP = {\n  [SUBMIT_PICKER_TYPES.USER]: 80,\n  [SUBMIT_PICKER_TYPES.PROJECT]: 3,\n  [SUBMIT_PICKER_TYPES.DEPARTMENT]: 5,\n  [SUBMIT_PICKER_TYPES.ORGANIZATION]: 2,\n  [SUBMIT_PICKER_TYPES.ROLE]: 70,\n}\n\n/**\n * @readonly\n * @enum\n * @description 审批人弹层 picker 的类型枚举\n */\nexport const PEOPLE_PICKER_TYPES = {\n  [PEOPLE_TYPES.USER]: SUBMIT_PICKER_TYPES.USER,\n  [PEOPLE_TYPES.PROJECT]: SUBMIT_PICKER_TYPES.PROJECT,\n  [PEOPLE_TYPES.DEPARTMENT]: SUBMIT_PICKER_TYPES.DEPARTMENT,\n  [PEOPLE_TYPES.COMPANY]: SUBMIT_PICKER_TYPES.ORGANIZATION,\n  [PEOPLE_TYPES.JOB]: SUBMIT_PICKER_TYPES.ROLE,\n  [PEOPLE_TYPES.POSITION_LABEL]: PARTICIPANT_TYPES.POSITION_LABEL,\n}\n\n/**\n * @readonly\n * @enum\n * @description 审批人弹层 picker 的类型枚举\n */\nexport const PEOPLE_TYPES_TITLE = {\n  [PEOPLE_PICKER_TYPES[PEOPLE_TYPES.USER]]: '成员',\n  [PEOPLE_PICKER_TYPES[PEOPLE_TYPES.PROJECT]]: '项目',\n  [PEOPLE_PICKER_TYPES[PEOPLE_TYPES.DEPARTMENT]]: '部门',\n  [PEOPLE_PICKER_TYPES[PEOPLE_TYPES.COMPANY]]: '公司',\n  [PEOPLE_PICKER_TYPES[PEOPLE_TYPES.JOB]]: '角色',\n}\n\n/**\n * @readonly\n * @description 条件字段类型常量\n */\nexport const CONDITION_TYPES = {\n  STRING: 'string', // 文本\n  TEXT: 'input', // 输入框\n  TEXTAREA: 'textarea', // 输入区域\n  RADIO: 'radio', // 单选\n  COMBO: 'combo', // 多选\n  LIST: 'system_list', // 单选/多选下拉框\n  NUMBER: 'number', // 数字\n  MONEY: 'amount', // 金额\n  SERIAL: 'serial', // 流水号\n  ...PEOPLE_TYPES,\n}\n\n/**\n * @readonly\n * @enum\n * @description 条件支持的选择人的类型 `system-list`\n */\nexport const CONDITION_PEOPLE_TYPES = {\n  [PEOPLE_TYPES.USER]: CONDITION_TYPES.LIST,\n  [PEOPLE_TYPES.PROJECT]: CONDITION_TYPES.LIST,\n  [PEOPLE_TYPES.DEPARTMENT]: CONDITION_TYPES.LIST,\n  [PEOPLE_TYPES.COMPANY]: CONDITION_TYPES.LIST,\n  [PEOPLE_TYPES.JOB]: CONDITION_TYPES.LIST,\n  [PEOPLE_TYPES.POSITION_LABEL]: CONDITION_TYPES.LIST,\n}\n\n/**\n * @readonly\n * @enum\n * @description 条件字段类型枚举\n */\nexport const CONDITION_FIELD_TYPES = {\n  [CONDITION_TYPES.TEXT]: 'string',\n  [CONDITION_TYPES.TEXTAREA]: 'string',\n  [CONDITION_TYPES.RADIO]: 'radio',\n  [CONDITION_TYPES.COMBO]: 'combo',\n  [CONDITION_TYPES.NUMBER]: 'number',\n  [CONDITION_TYPES.MONEY]: 'number',\n  ...CONDITION_PEOPLE_TYPES,\n}\n\n/**\n * @readonly\n * @enum\n * @description 条件字段 key Map 枚举 => { [key: string]: string }\n */\nexport const CONDITION_FIELDS_NAME = {\n  [CONDITION_TYPES.TEXT]: '单行文本',\n  [CONDITION_TYPES.TEXTAREA]: '多行文本',\n  [CONDITION_TYPES.RADIO]: '单选按钮组',\n  [CONDITION_TYPES.COMBO]: '单选下拉框',\n  [CONDITION_TYPES.NUMBER]: '数字',\n  [CONDITION_TYPES.MONEY]: '金额',\n}\n\n/**\n * @readonly\n * @description 数字条件选项常量\n * 数字：\n */\nexport const NUMBER_CONDITION = {\n  /**\n   * 等于\n   */\n  EQUAL: 'equal',\n\n  /**\n   * 不等于\n   */\n  NE: 'not_equal',\n\n  /**\n   * 小于\n   */\n  LT: 'less_than',\n\n  /**\n   * 小于等于\n   */\n  LTE: 'less_than_equal',\n\n  /**\n   * 大于\n   */\n  GT: 'greater_than',\n\n  /**\n   * 大于等于\n   */\n  GTE: 'greater_than_equal',\n\n  /**\n   * 大于等于同时小于等于范围\n   */\n  // RANGE: 'range',\n}\n\n/**\n * @readonly\n * @enum\n * @description 数字条件选项 key map\n */\nexport const NUMBER_CONDITION_NAME = {\n  [NUMBER_CONDITION.EQUAL]: '=',\n  [NUMBER_CONDITION.NE]: '!=',\n  [NUMBER_CONDITION.LT]: '<',\n  [NUMBER_CONDITION.LTE]: '<=',\n  [NUMBER_CONDITION.GT]: '>',\n  [NUMBER_CONDITION.GTE]: '>=',\n  // [NUMBER_CONDITION.RANGE]: '<= & >=',\n}\n\n/**\n * @readonly\n * @enum\n * @description 数字条件选项 key map\n */\nexport const NUMBER_SELECTION_MAP = {\n  [NUMBER_CONDITION.EQUAL]: '等于',\n  [NUMBER_CONDITION.NE]: '不等于',\n  [NUMBER_CONDITION.LT]: '小于',\n  [NUMBER_CONDITION.LTE]: '小于等于',\n  [NUMBER_CONDITION.GT]: '大于',\n  [NUMBER_CONDITION.GTE]: '大于等于',\n  // [NUMBER_CONDITION.RANGE]: '范围',\n}\n\n/**\n * @readonly\n * @description 字符串条件选项常量\n * 字符串：：\n */\nexport const STRING_CONDITION = {\n  /**\n   * 等于\n   */\n  EQUAL: 'equal',\n  /**\n   * 不等于\n   */\n  NE: 'not_equal',\n  /**\n   * 包含\n   */\n  CONTAINS: 'contains',\n  /**\n   * 不包含\n   */\n  NOT_CONTAINS: 'not_contains',\n}\n\n/**\n * @readonly\n * @enum\n * @description 字符串条件选项 key map\n */\nexport const STRING_SELECTION_MAP = {\n  [STRING_CONDITION.EQUAL]: '等于',\n  [STRING_CONDITION.NE]: '不等于',\n  [STRING_CONDITION.CONTAINS]: '包含',\n  [STRING_CONDITION.NOT_CONTAINS]: '不包含',\n}\n\nexport const SELECTION_MAP = {\n  /**\n   * 等于任意一个\n   */\n  EQUAL_ANY_ONE: 'equal_any_one',\n\n  /**\n   * 不等于任何一个\n   */\n  NE_ANY_ONE: 'not_equal_any_one',\n}\n\n/**\n * @readonly\n * @enum {Object<string, string>}\n * @description 组合选项下拉框提示文本\n */\nexport const COMBO_SELECTION_MAP = {\n  [SELECTION_MAP.EQUAL_ANY_ONE]: '等于任意一个',\n  [SELECTION_MAP.NE_ANY_ONE]: '不等于任意一个',\n}\n\n/**\n * @readonly\n * @enum {Object<string, string>}\n * @description 单个选项下拉框提示文本\n */\nexport const RADIO_SELECTION_MAP = {\n  [STRING_CONDITION.EQUAL]: '等于',\n  [STRING_CONDITION.NE]: '不等于',\n  ...COMBO_SELECTION_MAP,\n}\n\n/**\n * @readonly\n * @enum {Object<string, any>}\n * @description condition code 类型枚举\n */\nexport const CONDITION_CODE_TYPES = {\n  [CONDITION_TYPES.STRING]: STRING_SELECTION_MAP,\n  [CONDITION_TYPES.NUMBER]: NUMBER_SELECTION_MAP,\n  [CONDITION_TYPES.RADIO]: RADIO_SELECTION_MAP,\n  [CONDITION_TYPES.COMBO]: RADIO_SELECTION_MAP, // 下拉框包含多选\n  [CONDITION_TYPES.LIST]: COMBO_SELECTION_MAP,\n}\n","import FLOW_NODE_TYPE from './FLOW_NODE_TYPE_ENUM'\nimport {AUDIT_TYPES, NO_AUDIT_TYPES, PARTICIPANT_TYPES, TRANSFER_TYPE,} from '../../../constants/ENUM_DEFINITIONS'\n\n/**\n * @readonly\n * @enum\n */\nexport default {\n  [FLOW_NODE_TYPE.SPONSOR_NODE]: {\n    formFieldList: [],\n  },\n  [FLOW_NODE_TYPE.APPROVER_NODE]: {\n    opinionSetting: {\n      textOpinionName: '文本意见',\n      textOpinionEnabled: false,\n      textOpinionRequired: false,\n      textOpinionTip: '',\n      writeSignatureName: '手写签名',\n      writeSignatureEnabled: false,\n      writeSignatureRequired: false,\n      writeSignatureCanUseLast: false,\n    },\n    taskRule: AUDIT_TYPES.COUNTERSIGN,\n    canTransfer: false,\n    transfer: {\n      type: TRANSFER_TYPE,\n      list: [],\n    },\n    canRollback: false,\n    participantEmptyRule: NO_AUDIT_TYPES.AUTO_COMPLETE,\n    initiatorAutoComplete: true,\n    participant: {\n      type: PARTICIPANT_TYPES.POSITION_LABEL,\n      list: [],\n      formFieldKey: '', // for form field\n    },\n    formFieldList: [],\n  },\n  [FLOW_NODE_TYPE.NOTIFIER_NODE]: {\n    participant: {\n      type: PARTICIPANT_TYPES.POSITION_LABEL,\n      list: [],\n      formFieldKey: '', // for form field\n    },\n    formFieldList: [],\n  },\n}\n","/**\n * @template T\n * @param {T} obj - A generic parameter that need be copied\n * @return {T}\n */\nexport function deepCopy(obj) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj\n  }\n\n  if (obj instanceof Date) {\n    return new Date(obj.getTime())\n  }\n\n  if (obj instanceof Array) {\n    return obj.reduce((arr, item, i) => {\n      arr[i] = deepCopy(item)\n      return arr\n    }, [])\n  }\n\n  if (obj instanceof Object) {\n    return Object.keys(obj).reduce((newObj, key) => {\n      newObj[key] = deepCopy(obj[key])\n      return newObj\n    }, {})\n  }\n}\n\n/**\n * 循环深复制对象\n * @param {Object} obj a target object\n * @param  {Array<{}>} args an array of source object\n * @example\n *  var a = { a: 'a', b: 'a'}\n *  var b = { a: 'b', b: 'b'}\n *  deepMerge({}, a, b) // {a: \"b\", b: \"b\"}\n *  deepMerge({}, b, a) // {a: \"a\", b: \"a\"}\n */\nexport function deepMerge(obj, ...args) {\n  for (let i = 0, l = args.length; i < l; i++) {\n    const o = args[i]\n    const ks = Object.keys(o)\n\n    for (let j = 0, k = ks.length; j < k; j++) {\n      const k = ks[j]\n\n      if (typeof k === 'object') {\n        obj[k] = deepCopy(o[k])\n      } else {\n        obj[k] = o[k]\n      }\n    }\n  }\n\n  return obj\n}\n\n/**\n * flatten\n * @param {[]} arr\n * @returns {[]}\n */\nexport function flatten(arr) {\n  return arr.reduce((all, curr) => {\n    if (Array.isArray(curr)) {\n      return [...all, ...flatten(curr)]\n    } else {\n      return [...all, curr]\n    }\n  }, [])\n}\n\n/**\n * @template T\n * @param {T} value\n * @return {boolean}\n */\nexport function isObservable(value) {\n  return hasOwn(value, '__ob__') && value.__ob__ && value.__ob__.dep.id\n}\n\nexport const hasOwn = (obj = {}, key) => {\n  return obj && Object.prototype.hasOwnProperty.call(obj, key)\n}\n","import Node from './Node'\nimport FlowNodeType from '../constants/FLOW_NODE_TYPE_ENUM'\nimport FlowNodeModel from '../constants/FLOW_NODE_TYPE_MODEL'\nimport FlowNodeProps from '../constants/FLOW_NODE_TYPE_PROPS'\nimport { deepMerge, deepCopy } from '../../../utils/index'\n\nexport default class Flow {\n  /* node map collection */\n  static NODE_MAP = {}\n\n  /**\n   * 注册新节点类型 void\n   * @memberof Flow\n   * @param {string} type 节点名称\n   * @param {Object} mode 节点视图数据\n   */\n  static registerNode = (type, model = {}, props = {}) => {\n    if (type && !Flow.NODE_MAP[type]) {\n      Flow.NODE_MAP[type] = {\n        type,\n        model,\n        ...props,\n      }\n    } else {\n      throw new Error(`Type ${type} has been registered before.`)\n    }\n  }\n\n  /**\n   * 创建一个新的节点 node: Node\n   * @memberof Flow\n   * @param {string|Object} opts 节点配置项\n   * @returns {Node}\n   */\n  static createNode = (opts) => {\n    opts = typeof opts === 'string' ? { type: opts } : opts\n\n    /* 需要 deepCopy base，因为 base 始终指向同一个引用即 Flow.NODE_MAP 的某个 key 的 value 的对象引用 */\n    const base = Flow.NODE_MAP[opts.type]\n\n    if (base) {\n      return new Node(deepMerge({}, deepCopy(base), { ...opts }))\n    } else {\n      throw new ReferenceError(\n        `No any type ${opts.type} found in Flow.NODE_MAP, have u registered it before?`\n      )\n    }\n  }\n}\n\nObject.values(FlowNodeType).forEach((type) => {\n  Flow.registerNode(type, FlowNodeModel[type], FlowNodeProps[type])\n})\n","/**\n * 一般条件\n */\nexport const GENERAL_CONDITION = 'general'\n\n/**\n * 其他条件\n */\nexport const OTHER_CONDITION = 'other_condition'\n","import Flow from './Flow'\nimport Node from './Node'\nimport NodeManager from './NodeManager'\nimport { GENERAL_CONDITION, OTHER_CONDITION } from '../constants/CONDITION_TYPE'\n\n/**\n * createChildNode\n * @param {Node} parentNode\n * @param {{ type: string }} options\n * @returns {Node}\n * @description 添加节点的时候根据不同的父节点类型给其添加新的子节点\n *  设 A 为 parentNode = startNode，B 为 oldNode，END = EndNode，New 为被添加节点\n *  + 1.普通（新）节点 \"New\"\n *    + 1.1 A -> END => A -> (New) -> END\n *    + 1.2 A -> B -> END => A -> (New) -> B => END\n *  + 分支节点\n *    + 添加新的分支节点（Diff：并行分支存在分支结束节点，而条件不需要）\n *      + \"条件\" 分支节点: New = ConditionBranch -> [Condition1, Condition2] => (TO STEP 1)\n *      + \"并行\" 分支节点: New = ParallelBranch -> [Parallel1, Parallel2] -> ParallelBranchEnd\n *    + 添加新的分支子节点:\n *      + 条件\" 分支子节点: New = Flow.createNode(FLOW_NODE_TYPE.CONDITION_NODE)\n *        + A: ConditionBranch -> [Condition1, Condition2] -> END => A -> [Condition1, Condition2, New] -> END\n *      + 并行\" 分支子节点: New = Flow.createNode(FLOW_NODE_TYPE.PARALLEL_NODE)\n *        + A: ParallelBranch -> [Parallel1, Parallel2] -> B: ParallelBranchEnd -> END => A -> [Parallel1, Parallel2, New] -> B -> END\n *    + 为分支子节点添加子节点: (TO STEP 1)\n */\nexport const createChildNode = (parentNode, { type, ...opts }) => {\n  if (!parentNode || !(parentNode instanceof Node)) throw new TypeError()\n\n  let newChildNode = null\n\n  /* 是分支节点类型 */\n  if (isBranchNode(type)) {\n    /* 添加新的分支节点 */\n    if (isConditionBranchNode(type)) {\n      /* 条件分支 */\n      newChildNode = createConditionBranchNode(opts)\n    } else if (isParallelBranchNode(type)) {\n      /* 并行节点 */\n      newChildNode = createParallelBranchNode(opts)\n    }\n  } else if (isBranchChildNode(type)) {\n    /* 添加新的分支子节点 */\n    opts = { prevId: parentNode.nodeId, ...opts }\n    const childrenNodes = getChildrenNodes(parentNode)\n\n    if (isConditionNode(type)) {\n      const node = createConditionNode(opts)\n\n      if (isLastConditionNode(childrenNodes[childrenNodes.length - 1])) {\n        childrenNodes.splice(childrenNodes.length - 1, 0, node)\n      } else {\n        childrenNodes.push(node)\n        childrenNodes.push(\n          createConditionNode({\n            ...opts,\n            conditionType: OTHER_CONDITION,\n          })\n        )\n      }\n    } else if (isParallelNode(type)) {\n      childrenNodes.push(createParallelNode(opts))\n    }\n\n    return parentNode\n  } else {\n    newChildNode = Flow.createNode({ type, ...opts })\n  }\n\n  if (getChildNode(parentNode)) {\n    resetChildNode(parentNode, newChildNode)\n  } else {\n    parentNode.next(newChildNode)\n  }\n\n  return parentNode\n}\n\n/**\n * fixNodeRef\n * @param {Node} node\n * @returns {Node}\n */\nexport const fixNodeRef = (node) => {\n  if (isBranchNode(node)) {\n    node = node.childNode\n  }\n\n  return node\n}\n\n/**\n * getChildNode 获取子节点\n * 1. 普通节点返回*当前节点*的子节点 => node.childNode\n * 2. 分支节点返回*结束节点*的子节点 => node.childNode.childNode\n * @param {Node} node\n * @returns {Node}\n */\nexport const getChildNode = (node) => {\n  return fixNodeRef(node).childNode\n}\n\n/**\n * resetChildNode\n * @param {Node} parentNode 父节点\n * @param {Node} childNode 新的子节点\n * @returns {Node} newChildNode\n */\nexport const resetChildNode = (parentNode, childNode) => {\n  /* A -> B -> END => A -> NEW -> B -> END */\n  const oldChildNode = getChildNode(parentNode) /* B */\n\n  parentNode.next(childNode) /* A -> NEW */\n\n  if (oldChildNode) {\n    if (isConditionBranchNode(childNode)) {\n      const firstChildNode = childNode.childrenNodes[0]\n\n      if (firstChildNode) {\n        firstChildNode.next(oldChildNode)\n      }\n    } else {\n      fixNodeRef(childNode).next(oldChildNode) /* NEW -> B */\n    }\n  }\n\n  return childNode\n}\n\n/**\n * getChildrenNodes\n * @param {Node} node\n * @returns {Node[]|[]}\n */\nexport const getChildrenNodes = (node) => {\n  if (node.childrenNodes && node.childrenNodes.length) {\n    return node.childrenNodes\n  }\n\n  return []\n}\n\n/**\n * createConditionBranchNode\n * @param {{type: string, prevId: string, formFieldList: []}} [opts]\n */\nexport const createConditionBranchNode = (opts) => {\n  const conditionBranchNode = Flow.createNode(Node.TYPE.CONDITION_BRANCH)\n  const conditionChildrenNodes = [\n    createConditionNode(opts),\n    createConditionNode({\n      ...opts,\n      conditionType: OTHER_CONDITION,\n    }),\n  ]\n  const conditionBranchEndNode = Flow.createNode(Node.TYPE.CONDITION_BRANCH_END)\n\n  conditionBranchNode.next(conditionChildrenNodes) /* childrenNodes */\n  conditionBranchNode.next(conditionBranchEndNode) /* childNode */\n\n  conditionBranchNode.oppositeTaskId = conditionBranchEndNode.nodeId\n  conditionBranchEndNode.oppositeTaskId = conditionBranchNode.nodeId\n\n  return conditionBranchNode\n}\n\n/**\n * createConditionNode\n * @param {{type: string, prevId: string, formFieldList: []}} [opts]\n */\nexport const createConditionNode = (opts) => {\n  return Flow.createNode({\n    type: Node.TYPE.CONDITION_NODE,\n    conditionType: GENERAL_CONDITION,\n    ...opts,\n  })\n}\n\n/**\n * createParallelBranchNode\n * @param {{type: string, prevId: string, formFieldList: []}} [opts]\n */\nexport const createParallelBranchNode = (opts) => {\n  /* New = ParallelBranch -> [Parallel1, Parallel2] -> ParallelBranchEnd */\n  const parallelBranchNode = Flow.createNode(Node.TYPE.PARALLEL_BRANCH)\n  const parallelChildrenNodes = [\n    createParallelNode(opts),\n    createParallelNode(opts),\n  ]\n  const parallelBranchEndNode = Flow.createNode(Node.TYPE.PARALLEL_BRANCH_END)\n\n  parallelBranchNode.next(parallelChildrenNodes) /* childrenNodes */\n  parallelBranchNode.next(parallelBranchEndNode) /* childNode */\n\n  parallelBranchNode.oppositeTaskId = parallelBranchEndNode.nodeId\n  parallelBranchEndNode.oppositeTaskId = parallelBranchNode.nodeId\n\n  return parallelBranchNode\n}\n\n/**\n * createParallelNode\n * @param {{type: string, prevId: string, formFieldList: []}} [opts]\n */\nexport const createParallelNode = (opts) => {\n  return Flow.createNode({\n    alias: Node.TYPE.PARALLEL_NODE,\n    type: Node.TYPE.APPROVER_NODE,\n    ...opts,\n  })\n}\n\n/**\n * removeOldNode\n * @param {Node} node\n * @returns {Node} parentNode\n * @description 删除给出父节点的子节点\n *  设 A 为 parentNode = startNode, B 为 oldNode，END = EndNode，Old 为被删除节点\n *  + 1.普通（新）节点 \"Old\"(如果old是并行分支节点，则 Old = Old.childNode 即其并行结束节点)\n *    + 1.1 A -> (Old) -> END => A -> END\n *    + 1.2 A -> (Old) -> B => END => A -> B -> END\n *  + 分支节点（仅支持删除分支子节点）\n *    删除新的子分支节点（Diff：并行分支存在分支结束节点，而条件不需要），\n *    如果剩余子节点数量小于2 ，则删除整个分支节点（从父节点开始删除），从分支节点的子节点数组中移除当前项即可\n *      + childrenNodes.length > 2\n *        + 条件 & 分支\n *          Old = Branch -> [Node1, Node2, Node3] => Branch -> [Node1, Node2]\n *      + childrenNodes.length <= 2\n *        + 条件 Old => (TO STEP 1.2)\n *        + 分支\n *          A -> Branch -> [Node1, Node2] -> BranchEnd -> B -> END => A -> B -> END\n */\nexport const removeOldNode = (node) => {\n  let parentNode = NodeManager.getNode(node.prevId) // 被删除节点的父节点\n\n  if (isBranchChildNode(node.alias || node.type)) {\n    /* 分支节点（仅支持删除分支子节点） */\n    const childrenNodes = getChildrenNodes(parentNode)\n    const needRemoveParent = childrenNodes.length <= 2\n    const deletedNodeIndex = childrenNodes.findIndex(\n      (childNode) => NodeManager.getNode(node).nodeId === childNode.nodeId\n    ) // 被删除节点的索引\n\n    if (needRemoveParent) {\n      const grandParentNode = NodeManager.getNode(parentNode.prevId)\n      const reservedNodeIndex = deletedNodeIndex === 1 ? 0 : 1\n\n      if (grandParentNode) {\n        NodeManager.removeNode(parentNode, false)\n\n        childrenNodes\n          .filter((_, index) => index === deletedNodeIndex)\n          .forEach((childNode) => {\n            NodeManager.removeNode(childNode, true)\n          })\n\n        NodeManager.removeNode(parentNode.childNode, false)\n\n        const reservedChild = childrenNodes[reservedNodeIndex] // 被保留的分支节点\n        let childNode = reservedChild && getChildNode(reservedChild) // 被保留的分支节点的子节点\n        const grandChildNode = getChildNode(parentNode) // 父节点的子节点\n\n        if (childNode) {\n          NodeManager.removeNode(reservedChild, false)\n          grandParentNode.next(childNode)\n\n          if (grandChildNode) {\n            childNode = getLastNode(childNode)\n            childNode.next(grandChildNode)\n            return grandChildNode\n          }\n\n          return childNode\n        } else {\n          NodeManager.removeNode(reservedChild, true)\n\n          if (grandChildNode) {\n            return grandParentNode.next(grandChildNode)\n          }\n\n          return grandParentNode.next(null)\n        }\n      }\n    } else {\n      childrenNodes.splice(deletedNodeIndex, 1)\n      NodeManager.removeNode(node)\n\n      return parentNode\n    }\n  } else {\n    const childNode = node.childNode // 被删除节点的子节点\n\n    if (parentNode) {\n      NodeManager.removeNode(node, false)\n\n      if (childNode) {\n        if (isConditionBranchNode(parentNode)) {\n          parentNode.oppositeTaskId = childNode.nodeId\n        }\n\n        return parentNode.next(childNode)\n      } else {\n        if (isConditionBranchNode(parentNode)) {\n          parentNode.oppositeTaskId = ''\n        }\n\n        return parentNode.next(null)\n      }\n    }\n  }\n}\n\n/**\n * getNodeType\n * @param {Node} node\n */\nexport const getNodeType = (node) => {\n  if (typeof node === 'object' && node instanceof Node) {\n    return node.alias || node.type\n  } else if (typeof node === 'string') {\n    return node\n  } else {\n    throw new Error(\n      `The type of node was invalid value of ${typeof node}: ${\n        node ? node.type : node\n      }`\n    )\n  }\n}\n\n/**\n * isConditionBranchNode\n * @param {Node|string} node\n */\nexport const isConditionBranchNode = (node) => {\n  return getNodeType(node) === Node.TYPE.CONDITION_BRANCH\n}\n\n/**\n * isParallelBranchNode\n * @param {Node|string} node\n */\nexport const isParallelBranchNode = (node) => {\n  return getNodeType(node) === Node.TYPE.PARALLEL_BRANCH\n}\n\n/**\n * isConditionNode\n * @param {Node|string} node\n */\nexport const isConditionNode = (node) => {\n  return getNodeType(node) === Node.TYPE.CONDITION_NODE\n}\n\n/**\n * isLastConditionNode\n * @param {Node} node\n */\nexport const isLastConditionNode = (node) => {\n  return (\n    isConditionNode(node) &&\n    getNextSiblingNode(node) === null &&\n    node.conditionType === OTHER_CONDITION\n  )\n}\n\n/**\n * isParallelNode\n * @param {Node|string} node\n */\nexport const isParallelNode = (node) => {\n  return getNodeType(node) === Node.TYPE.PARALLEL_NODE\n}\n\n/**\n * isBranchNode\n * @param {string} type\n */\nexport const isBranchNode = (type) => {\n  return isConditionBranchNode(type) || isParallelBranchNode(type)\n}\n\n/**\n * isBranchChildNode\n * @param {string} type\n */\nexport const isBranchChildNode = (type) => {\n  return type === Node.TYPE.CONDITION_NODE || type === Node.TYPE.PARALLEL_NODE\n}\n\n/**\n * get Node type by the given branch type\n */\nexport const getNodeTypeByBranch = (branchType) => {\n  if (branchType === Node.TYPE.CONDITION_BRANCH) {\n    return Node.TYPE.CONDITION_NODE\n  }\n\n  if (\n    branchType === Node.TYPE.PARALLEL_BRANCH ||\n    branchType === Node.TYPE.PARALLEL_BRANCH_END\n  ) {\n    return Node.TYPE.PARALLEL_NODE\n  }\n\n  return ''\n}\n\n/**\n * needMergeFields\n */\nexport const needMergeFields = (type) => {\n  return [\n    Node.TYPE.SPONSOR_NODE,\n    Node.TYPE.APPROVER_NODE,\n    Node.TYPE.NOTIFIER_NODE,\n    Node.TYPE.PARALLEL_NODE,\n  ].includes(type)\n}\n\n/**\n * nodeDeepIterator\n * @param {Node} node\n * @callback NodeDeepIterator\n * @param {Node}\n * @returns {void}\n * @param {Node}\n * @param {NodeDeepIterator} cb\n */\nexport const nodeDeepIterator = (node, cb) => {\n  if (cb && typeof cb === 'function') {\n    cb(node)\n  }\n\n  if (node.childrenNodes && node.childrenNodes.length) {\n    node.childrenNodes.forEach((childNode) => {\n      nodeDeepIterator(childNode, cb)\n    })\n  }\n\n  if (node.childNode) {\n    nodeDeepIterator(node.childNode, cb)\n  }\n}\n\n/**\n * getLastNode\n * @param {Node} node\n */\nexport const getLastNode = (node) => {\n  while (node) {\n    if (node.childNode) {\n      node = node.childNode\n    } else {\n      return node\n    }\n  }\n}\n\n/**\n * getNextSiblingNode\n * @param {Node} node\n * @returns {Node|null}\n */\nexport const getNextSiblingNode = (node) => {\n  const prevId = node.prevId\n  const parentNode = NodeManager.getNode(prevId)\n\n  // all children nodes under parentNode\n  const children = parentNode.childrenNodes || []\n  const currentIndex = children.indexOf(node)\n\n  return children[currentIndex + 1] || null\n}\n","export const AND = 'and'\nexport const OR = 'or'\n\nexport const LOGIC_SIGN_NAME = {\n  [AND]: '且',\n  [OR]: '或',\n}\n","import Vue from 'vue'\nimport NodeManager from './NodeManager'\nimport {\n  createChildNode,\n  isBranchChildNode,\n  isBranchNode,\n  removeOldNode,\n} from './NodeUtils'\nimport FlowNodeType from '../constants/FLOW_NODE_TYPE_ENUM'\nimport { LOGIC_SIGN_NAME } from '../../../constants/LOGICAL_SIGN'\nimport {\n  CONDITION_CODE_TYPES,\n  CONDITION_TYPES,\n} from '../../../constants/ENUM_DEFINITIONS'\nimport { deepCopy } from '../../../utils/index'\n\n/**\n * Class to create a Node object.\n * @class Node\n */\nexport default class Node {\n  static TYPE = FlowNodeType\n\n  // static UUID_MAP = {}\n  /* https://github.com/reduxjs/redux/blob/master/src/utils/actionTypes.js#L8 */\n  /* https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript */\n  static getUUID(prefix = 'uuid', type) {\n    // if (process.env.NODE_ENV !== 'development') type = ''\n\n    return `${prefix}${type ? '-' + type : ''}-xxxx-4xxx-yxxx`.replace(\n      /[xy]/g,\n      function(c) {\n        const r = (Math.random() * 16) | 0\n        const v = c === 'x' ? r : (r & 0x3) | 0x8\n\n        return v.toString(16)\n      }\n    )\n  }\n\n  /**\n   * @typedef NodeOptions\n   * @property {string} type The type of the node.\n   * @property {string} nodeId The nodeId of the node.\n   * @property {string} prevId The prevId of the node.\n   * @property {string} [alias] The alias of the node.\n   * @property {'general'|'other_condition'} [conditionType]\n   * @property {string} [oppositeTaskId] The end node ID of the branch node\n   * @property {Node} [childNode]\n   * @property {Node[]} [childrenNodes]\n   * @property {{}} [model]\n   * @property {{}} [props]\n   *\n   * @constructor\n   * @param {NodeOptions} node constructor options\n   */\n  constructor({\n    type = '',\n    alias = '',\n    nodeId = '',\n    prevId = '',\n    oppositeTaskId = '',\n    childNode = null,\n    childrenNodes = null,\n    conditionType = null,\n    model,\n    ...props\n  }) {\n    this.type = type\n    this.nodeId = nodeId || Node.getUUID('node', type)\n    this.prevId = prevId\n\n    if (oppositeTaskId) {\n      this.oppositeTaskId = oppositeTaskId\n    }\n\n    /**\n     * 用以 并行节点 指定别名 alias\n     * @type {string} alias The alias of the node.\n     */\n    alias && (this.alias = alias)\n    childNode && (this.childNode = childNode)\n    childrenNodes && (this.childrenNodes = childrenNodes)\n    conditionType && (this.conditionType = conditionType)\n    model && (this.model = deepCopy(model))\n    props && (this.props = deepCopy(props))\n\n    /* 添加进 NodeManager */\n    NodeManager.addNode(this)\n  }\n\n  isBranchNode() {\n    return isBranchNode(this.type)\n  }\n\n  isBranchChildNode() {\n    return isBranchChildNode(this.alias || this.type)\n  }\n\n  /**\n   * 配置或替换下一个 node 节点，并配置相应的 prevId, nextId 属性\n   * @memberof Node\n   * @param {Node| Node[] | null} node 被设置为 childNode | childNodes 节点\n   * // @param {boolean} deleteChildren 是否删除子节点\n   * @returns {Node}\n   */\n  next(node) {\n    if (node && typeof node === 'object') {\n      if (Array.isArray(node)) {\n        node.forEach((t) => (t.prevId = this.nodeId))\n        Vue.set(this, 'childrenNodes', node)\n\n        this.childrenNodes = node\n      } else {\n        /**\n         * https://cn.vuejs.org/v2/guide/list.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\n         * 还是由于 JavaScript 的限制，Vue 不能检测对象属性的添加或删除：\n         * 直接赋值无法生效，因为 childNode 必须是 Vue Reactive 对象才能映射到视图\n         */\n        node.prevId = this.nodeId\n        Vue.set(this, 'childNode', node)\n\n        this.childNode = node\n      }\n    } else {\n      Vue.set(this, 'childrenNodes', null)\n      Vue.set(this, 'childNode', null)\n\n      delete this.childNode\n    }\n\n    NodeManager.updateNode(this)\n    NodeManager.updateNode(node)\n\n    return this\n  }\n\n  /* GET */\n  /**\n   * 读取/更新节点内容 => node.model.content\n   * @param {Array|Object<string, any>} val\n   * @returns {string}\n   */\n  read(val) {\n    if (val === undefined) {\n      return this.model.content || ''\n    } else {\n      if (typeof val === 'string') {\n        this.update({\n          content: val,\n        })\n      } else {\n        if (\n          // fixed:并行分支子节点选择后未更新VIEW(#1017053)\n          this.alias === Node.TYPE.APPROVER_NODE ||\n          this.type === Node.TYPE.APPROVER_NODE ||\n          this.type === Node.TYPE.NOTIFIER_NODE\n        ) {\n          const { list } = val\n\n          this.update({\n            content:\n              list && list.length\n                ? (list || [])\n                    .map(\n                      (item) =>\n                        `${item.name}${\n                          item.parentFullName\n                            ? '(' + item.parentFullName + ')'\n                            : ''\n                        }`\n                    )\n                    .join('，')\n                : '',\n          })\n        } else if (this.type === Node.TYPE.CONDITION_NODE) {\n          const { conditions, fields } = val\n          const fieldNames = {}\n          const fieldTypes = {}\n          const fieldOptions = {}\n\n          fields.forEach(\n            ({ fieldKey, fieldName, fieldType, fieldOptions: options }) => {\n              fieldNames[fieldKey] = fieldName\n              fieldTypes[fieldKey] = fieldType\n\n              if (\n                options &&\n                options.length &&\n                (fieldType === CONDITION_TYPES.COMBO || fieldType === CONDITION_TYPES.RADIO)\n              ) {\n                fieldOptions[fieldKey] = options\n              }\n            }\n          )\n\n          const content = conditions\n            .filter((condition) => condition && condition.fieldKey)\n            .map(\n              ({\n                fieldKey,\n                conditionCode,\n                conditionType,\n                value,\n                unionLogic,\n                leftBracket,\n                rightBracket,\n              }) => {\n                if (!fieldKey || !conditionType || !value) return ''\n\n                if (fieldOptions[fieldKey]) {\n                  const options = fieldOptions[fieldKey]\n                  const str =\n                    (options.find((item) => Array.isArray(value) ? value.includes(item.value)  : value === item.value) || {})\n                      .label || ''\n\n                  if (str) {\n                    value = str\n                  }\n                }\n\n                return [\n                  leftBracket && '（',\n                  unionLogic && LOGIC_SIGN_NAME[unionLogic],\n                  fieldNames[fieldKey],\n                  CONDITION_CODE_TYPES[conditionCode][conditionType] || '',\n                  Array.isArray(value)\n                    ? value.every((val) => typeof val === 'string')\n                      ? value.join('、')\n                      : value.map(({ name }) => name).join('、')\n                    : value,\n                  rightBracket && '）',\n                ]\n                  .filter(Boolean)\n                  .join('')\n              }\n            )\n            .filter((str) => str && str.trim())\n            .join('，')\n\n          this.update({\n            content,\n          })\n        }\n      }\n    }\n  }\n\n  /**\n   * 添加新节点\n   * @memberof Node\n   * @param {string|{type: string, [props: string]: any}} opts\n   */\n  /* create */\n  add(opts) {\n    return createChildNode(this, opts)\n  }\n\n  /**\n   * 从原集合中删除旧节点 x\n   * @memberof Node\n   */\n  /* delete */\n  remove() {\n    return removeOldNode(this)\n  }\n\n  move(i1, i2) {\n    if (this.isBranchChildNode()) {\n      const prevNode = this.prevId && NodeManager.getNode(this.prevId)\n\n      if (prevNode) {\n        const arr = prevNode.childrenNodes\n\n        if (arr && arr.length && ~i1 && ~i2) {\n          let temp1 = arr[i1]\n          let temp2 = arr[i2]\n\n          /*\n           * https://cn.vuejs.org/v2/guide/list.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\n           * 由于JS的限制， Vue 不能检测以下变动的数组：\n           * 1、利用索引直接设置一个项时，例如： vm.items[indexOfItem] = newValue\n           * 2、修改数组的长度时，例如： vm.items.length = newLength\n           */\n          Vue.set(arr, i1, temp2)\n          Vue.set(arr, i2, temp1)\n          // arr[i1] = temp2\n          // arr[i2] = temp1\n        }\n      }\n    }\n  }\n\n  /**\n   * 获取根节点\n   * @memberof Node\n   * @param {string|NodeConfig}\n   */\n  getRootNode(node) {\n    while (node.prevId) {\n      node = NodeManager.getNode(node.prevId)\n    }\n\n    if (!node.prevId) {\n      return node\n    }\n  }\n\n  update() {\n    return this.updateModel.apply(this, arguments)\n  }\n\n  updateModel(opts = {}) {\n    this.model = {\n      ...this.model,\n      ...opts,\n    }\n  }\n\n  updateProps(opts = {}) {\n    this.props = {\n      ...this.props,\n      ...opts,\n    }\n  }\n}\n","// import { getCycle } from './FlowGraphHelpers'\n\n/**\n * @class FlowGraph\n * @constructor\n * @description Flow Directed-Graph Implementation\n * @inspired from the following links\n * @see\n *  + EN https://github.com/trekhleb/javascript-algorithms/blob/master/src/data-structures/graph/Graph.js\n *  + EN http://blog.benoitvallon.com/data-structures-in-javascript/the-graph-data-structure/\n *  + EN https://hackernoon.com/the-javascript-developers-guide-to-graphs-and-detecting-cycles-in-them-96f4f619d563\n *  + EN https://www.geeksforgeeks.org/implementation-graph-javascript/\n *  + CN https://segmentfault.com/a/1190000011216330\n *  + CN https://www.liuyiqi.cn/2017/02/19/graph/\n */\nexport default class FlowGraph {\n  /**\n   * @typedef {import('./Node').default} GraphVertex A Graph Vertex\n   * @typedef {GraphVertex|GraphVertex[]} GraphEdge A Graph Edge it includes multiple vertices\n   *\n   * @constructor\n   */\n  constructor() {\n    /** @type {Object<string, GraphVertex>}  */\n    this.vertices = {} /* Flow Node Vertices */\n    /** @type {Map<string, GraphVertex | GraphVertex[]>} */\n    this.edges = new Map() /* Edges */\n  }\n\n  /**\n   * @method addVertex\n   * @description  It adds the vertex v as key to adjList and initialize its values with an array or null.\n   * @memberof FlowGraph\n   * @param {GraphVertex} v\n   * @returns {FlowGraph}\n   */\n  addVertex(v) {\n    v && (this.vertices[v.nodeId] = v)\n    // in this way do not initialize the vertex with a null value\n    // `GraphVertex` may called `addVertex` method more than once\n    // this.edges.set(v.nodeId, null)\n\n    return this\n  }\n\n  /**\n   * @param {GraphVertex|string} v\n   * @returns {string}\n   */\n  getVertexKey(v) {\n    return typeof v === 'string' ? v : v.nodeId\n  }\n\n  /**\n   * @method getVertexByKey\n   * @memberof FlowGraph\n   * @param {string} vertexKey\n   * @returns {(GraphVertex|null)}\n   */\n  getVertexByKey(vertexKey) {\n    return (\n      this.vertices[\n        typeof vertexKey === 'string' ? vertexKey : this.getVertexKey(vertexKey)\n      ] || null\n    )\n  }\n\n  /**\n   * @method removeVertexByKey\n   * @memberof FlowGraph\n   * @param {string} key\n   * @returns {FlowGraph}\n   */\n  removeVertexByKey(key) {\n    const vertex = this.vertices[key]\n    const vertices = this.edges.get(key)\n\n    if (vertices) {\n      if (Array.isArray(vertices)) {\n        while (vertices.length) {\n          /* 临近顶点 */\n          const adjacentVertex = vertices.pop()\n          this.removeEdge(vertex, adjacentVertex)\n        }\n      } else {\n        this.removeEdge(vertex, vertices)\n      }\n    }\n\n    if (vertex) {\n      delete this.vertices[key]\n    }\n\n    return this\n  }\n\n  /**\n   * @method addEdge\n   * @description In order to add edge we get the adjacency list of the corresponding src vertex and add the dest to the adjacency list.\n   * @memberof FlowGraph\n   * @param {GraphVertex|string} v src\n   * @param {GraphVertex|string} w dest\n   * @returns {FlowGraph}\n   */\n  addEdge(v, w) {\n    // Try to find start and end vertices.\n    let startVertex = this.getVertexByKey(this.getVertexKey(v))\n    let endVertex = this.getVertexByKey(this.getVertexKey(w))\n\n    // Insert start vertex if it wasn't inserted.\n    if (!startVertex) {\n      this.addVertex(v)\n      startVertex = v\n    }\n\n    // Insert end vertex if it wasn't inserted.\n    if (!endVertex) {\n      this.addVertex(w)\n      endVertex = w\n    }\n\n    const vertices = this.edges.get(startVertex.nodeId)\n\n    if (!vertices) {\n      this.edges.set(startVertex.nodeId, endVertex)\n    } else {\n      // Check if edge has been already added.\n      if (Array.isArray(vertices)) {\n        if (\n          !vertices.map((vertex) => vertex.nodeId).includes(endVertex.nodeId)\n        ) {\n          vertices.push(endVertex)\n        } else {\n          console.warn(\n            `The ${endVertex.nodeId} has already been added to ${\n              startVertex.nodeId\n            } before`\n          )\n        }\n      } else {\n        this.edges.set(startVertex.nodeId, [vertices, endVertex])\n      }\n    }\n\n    /* if (process.env.NODE_ENV === 'development') {\n      this.print()\n    } */\n\n    // Since graph is undirected,\n    // add an edge from w to v also\n    // but in our case it is directed\n    // this.edges.get(w).push(v)\n\n    return this\n  }\n\n  /**\n   * @method removeEdge for directed-graph on single way\n   * @description Remove a edge from the given vertex W to vertex x\n   * @param {GraphVertex} v src\n   * @param {GraphVertex} w dest\n   * @returns {FlowGraph}\n   */\n  removeEdge(v, w) {\n    /* find all vertices from edges[w] */\n    const vertices = this.getEdgesByKey(this.getVertexKey(v))\n    const vertexV = this.getVertexByKey(this.getVertexKey(v))\n    const vertexW = this.getVertexByKey(this.getVertexKey(w))\n\n    if (vertices) {\n      if (Array.isArray(vertices)) {\n        const index = vertices ? vertices.indexOf(vertexW) : -1\n\n        if (~index) {\n          vertices.splice(index, 1)\n        }\n      } else {\n        if (vertexW === vertices) {\n          this.edges.delete(vertexV.nodeId)\n        }\n      }\n    }\n\n    /* if (process.env.NODE_ENV === 'development') {\n      this.print()\n    } */\n\n    return this\n  }\n\n  /**\n   * getEdgesByKey\n   * @memberof FlowGraph\n   * @param {string} key\n   * @returns {GraphVertex|GraphVertex[]}\n   */\n  getEdgesByKey(key) {\n    return this.edges.get(key)\n  }\n\n  /**\n   * @return {GraphVertex[]}\n   */\n  getAllVertices() {\n    return Object.values(this.vertices)\n  }\n\n  /**\n   * @return {GraphEdge[]}\n   */\n  getAllEdges() {\n    return Object.values(this.edges)\n  }\n\n  /**\n   * @param {GraphVertex}\n   * @returns {GraphVertex[]}\n   */\n  getNeighbors(v) {\n    return this.edges.get(v.nodeId) || []\n  }\n\n  /**\n   * @callback TraverseCallback\n   * @param {GraphVertex} vertex\n   * @param {GraphVertex|GraphVertex[]} neighbor\n   * @returns {void}\n   *\n   * traverseBFS 广度优先遍历\n   * @memberof FlowGraph\n   * @param {GraphVertex} v\n   * @param {TraverseCallback} fn\n   */\n  traverseBFS(v, fn) {\n    if (!this.vertices[v.nodeId]) {\n      return console.warn('Vertex not found')\n    }\n\n    const queue = []\n    queue.push(v)\n\n    const visited = {}\n    visited[v.nodeId] = true\n\n    while (queue.length) {\n      const curr = queue.shift()\n      let neighbors = this.getNeighbors(curr)\n\n      curr && fn && fn(curr, neighbors)\n      neighbors = Array.isArray(neighbors) ? neighbors : [neighbors]\n\n      for (let i = 0; i < neighbors.length; i++) {\n        const w = neighbors[i]\n\n        if (!visited[w.nodeId]) {\n          visited[w.nodeId] = true\n          queue.push(w)\n        }\n      }\n    }\n  }\n\n  /**\n   * traverseDFS 深度优先遍历\n   * @memberof FlowGraph\n   * @param {GraphVertex} v\n   * @param {TraverseCallback} fn\n   */\n  traverseDFS(v, fn) {\n    if (!this.vertices[v.nodeId]) {\n      return console.warn('Vertex not found')\n    }\n\n    const visited = {}\n    traverseDFS.call(this, v, visited, fn)\n  }\n\n  getCycle() {\n    // return getCycle.call(this, this)\n  }\n\n  print() {\n    console.log('\\n')\n    for (const [key, val] of this.edges) {\n      console.log(\n        `${key} -> ${\n          Array.isArray(val)\n            ? val.map((t) => t.nodeId).join(' & ')\n            : val\n            ? val.nodeId\n            : val\n        }`\n      )\n    }\n    console.log('\\n')\n  }\n}\n\n/**\n * traverseDFS\n * @this {FlowGraph}\n * @param {GraphVertex} curr\n * @param {{}} visited\n * @param {TraverseCallback} fn\n */\nfunction traverseDFS(curr, visited, fn) {\n  visited[curr.nodeId] = true\n  let neighbors = this.getNeighbors(curr)\n\n  curr && fn && fn(curr, neighbors)\n  neighbors = Array.isArray(neighbors) ? neighbors : [neighbors]\n\n  for (let i = 0; i < neighbors.length; i++) {\n    const w = neighbors[i]\n\n    if (visited[w.nodeId]) {\n      console.log('It was visited as before')\n    }\n\n    if (!visited[w.nodeId]) {\n      visited[w.nodeId] = true\n      traverseDFS.call(this, w, visited, fn)\n    }\n  }\n}\n\n/* const COLOR = {\n  WHITE: 0,\n  GRAY: 1,\n  BLACK: -1,\n} */\n","export const OPTIONAL_SCOPE_KEYS = {\n  TENANT_ORGANIZATION: 'tenant_organization',\n  UPPER_LEVEL_ORGANIZATION: 'upper_level_organization',\n  LOWER_LEVEL_ORGANIZATION: 'lower_level_organization',\n  THIS_LEVEL_ORGANIZATION: 'this_level_organization',\n  DEPARTMENT: 'department',\n  ASSIGN_POSITION_LABEL: 'assign_position_label',\n  ASSIGN_POSITION: 'assign_position',\n  ASSIGN_USER: 'assign_user'\n}\n\nexport const OPTIONAL_SCOPE_TYPE_PICKER_KEYS = {\n  [OPTIONAL_SCOPE_KEYS.TENANT_ORGANIZATION]: 0,\n  [OPTIONAL_SCOPE_KEYS.LOWER_LEVEL_ORGANIZATION]: 1,\n  [OPTIONAL_SCOPE_KEYS.THIS_LEVEL_ORGANIZATION]: 2,\n  [OPTIONAL_SCOPE_KEYS.UPPER_LEVEL_ORGANIZATION]: 3,\n  [OPTIONAL_SCOPE_KEYS.DEPARTMENT]: 4  \n}\n\nexport const OPTIONAL_TYPE_ENUM = [\n  { label: '自选单人', value: 'single' },\n  { label: '自选多人', value: 'multiple' }\n]\n\nexport const OPTIONAL_SCOPE_ENUM = [\n  { label: '全公司', value: OPTIONAL_SCOPE_KEYS.TENANT_ORGANIZATION },\n  { label: '当前组织本上级', value: OPTIONAL_SCOPE_KEYS.UPPER_LEVEL_ORGANIZATION },\n  { label: '当前组织本下级', value: OPTIONAL_SCOPE_KEYS.LOWER_LEVEL_ORGANIZATION },\n  { label: '当前组织本级', value: OPTIONAL_SCOPE_KEYS.THIS_LEVEL_ORGANIZATION },\n  { label: '当前部门', value: OPTIONAL_SCOPE_KEYS.DEPARTMENT },\n  { label: '指定岗位标签', value: OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL },\n  { label: '指定岗位', value: OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION },\n  { label: '指定成员', value: OPTIONAL_SCOPE_KEYS.ASSIGN_USER },\n]\n\n","import Node from '../components/flow/helpers/Node'\nimport NodeManager from '../components/flow/helpers/NodeManager'\nimport FlowGraph from '../components/flow/helpers/FlowGraph'\nimport {\n  FLOW_NODE_TYPES as SERVER_NODE_TYPE,\n  FORM_FIELDS_TYPES,\n  PARTICIPANT_PICKER_KEYS,\n  PARTICIPANT_TYPES,\n  PARTICIPANT_TYPES_NAME,\n  TRANSFER_TYPE\n} from '../constants/ENUM_DEFINITIONS'\nimport {\n  OPTIONAL_SCOPE_KEYS,\n  OPTIONAL_SCOPE_ENUM\n} from './../constants/OPTIONAL_PERSONAL'\n\nexport const createFlowGraph = () => new FlowGraph()\n\n/**\n * 通过 node.prevId 获取正确的 sourceNode，并跳过条件节点\n * @param {Node} node\n * @param {FlowGraph} graph\n * @returns {Node|null}\n */\nexport const getSourceNode = (node, graph) => {\n  if (node.prevId) {\n    let prevNode =\n      graph.getVertexByKey(node.prevId) || NodeManager.getNode(node.prevId)\n\n    if (prevNode) {\n      // 如果是条件分支子节点，其 source Node 是其最近的条件分支父节点\n      if (prevNode.type === Node.TYPE.CONDITION_NODE) {\n        return getSourceNode(prevNode, graph)\n      } else {\n        return prevNode\n      }\n    }\n  }\n\n  return null\n}\n\n/**\n * 判断 node.type 获取正确的 targetNode，并跳过条件节点\n * @param {Node} node\n * @param {FlowGraph} graph\n * @returns {Node|null}\n */\nexport const getTargetNode = (node, graph) => {\n  // 如果是条件分支子节点，其 target Node 是其最近的条件分支父节点\n  if (node.type === Node.TYPE.CONDITION_NODE) {\n    return getSourceNode(node, graph)\n  } else {\n    return node\n  }\n}\n\n/**\n * getServerType\n * @param {string} type\n * @returns {string}\n */\nexport const getServerType = (type) => {\n  return (\n    type &&\n    {\n      [Node.TYPE.SPONSOR_NODE]: SERVER_NODE_TYPE.START,\n      [Node.TYPE.APPROVER_NODE]: SERVER_NODE_TYPE.AUDIT,\n      [Node.TYPE.CONDITION_BRANCH]: SERVER_NODE_TYPE.START_EXCLUSIVE_GATEWAY,\n      [Node.TYPE.CONDITION_BRANCH_END]: SERVER_NODE_TYPE.END_EXCLUSIVE_GATEWAY,\n      [Node.TYPE.NOTIFIER_NODE]: SERVER_NODE_TYPE.CC,\n      [Node.TYPE.END_NODE]: SERVER_NODE_TYPE.END,\n      [Node.TYPE.PARALLEL_BRANCH]: SERVER_NODE_TYPE.START_PARALLEL_GATEWAY, // 开始并行网关\n      [Node.TYPE.PARALLEL_BRANCH_END]: SERVER_NODE_TYPE.END_PARALLEL_GATEWAY // 结束并行网关\n    }[type]\n  )\n}\n\n/**\n * getNodeType\n * @param {string} type\n * @returns {string}\n */\nexport const getNodeType = (type) => {\n  return (\n    type &&\n    {\n      [SERVER_NODE_TYPE.START]: Node.TYPE.SPONSOR_NODE,\n      [SERVER_NODE_TYPE.AUDIT]: Node.TYPE.APPROVER_NODE,\n      [SERVER_NODE_TYPE.START_EXCLUSIVE_GATEWAY]: Node.TYPE.CONDITION_BRANCH,\n      [SERVER_NODE_TYPE.END_EXCLUSIVE_GATEWAY]: Node.TYPE.CONDITION_BRANCH_END,\n      [SERVER_NODE_TYPE.CC]: Node.TYPE.NOTIFIER_NODE,\n      [SERVER_NODE_TYPE.END]: Node.TYPE.END_NODE,\n      [SERVER_NODE_TYPE.START_PARALLEL_GATEWAY]: Node.TYPE.PARALLEL_BRANCH, // 开始并行网关\n      [SERVER_NODE_TYPE.END_PARALLEL_GATEWAY]: Node.TYPE.PARALLEL_BRANCH_END // 结束并行网关\n    }[type]\n  )\n}\n\n/* 初始化 participant.list 成 Client Model 格式，并赋值 node.model.content 内容 */\nexport const convertParticipant = (participant, fields) => {\n  let content = ''\n  const { type = '', formFieldKey = '' } = participant\n  const PICKER_KEY = PARTICIPANT_PICKER_KEYS[type]\n  const FORM_KEY = FORM_FIELDS_TYPES[type]\n\n  /* 初始化 participant.list 成 Client Model 格式，并赋值 node.model.content 内容 */\n  if (PICKER_KEY) {\n    content = generateParticipantModal(participant, PICKER_KEY, content)\n  } else if (type === PARTICIPANT_TYPES.INITIATOR) {\n    content = PARTICIPANT_TYPES_NAME[PARTICIPANT_TYPES.INITIATOR]\n  } else if (type === PARTICIPANT_TYPES.OPTIONAL_PERSONNEL) {\n    if (isAssignType(participant.optionalScope)) {\n      let optionalType = null\n      switch (participant.optionalScope) {\n        case OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION:\n          optionalType = PARTICIPANT_TYPES.POSITION\n          break\n        case OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL:\n          optionalType = PARTICIPANT_TYPES.POSITION_LABEL\n          break\n        case OPTIONAL_SCOPE_KEYS.ASSIGN_USER:\n          optionalType = TRANSFER_TYPE\n          break\n      }\n      const pickerKey = PARTICIPANT_PICKER_KEYS[optionalType]\n      content = generateParticipantModal(participant, pickerKey, content)\n    } else {\n      const scope =\n        OPTIONAL_SCOPE_ENUM.find(\n          (i) => i.value === participant.optionalScope\n        ) || {}\n      content = `${PARTICIPANT_TYPES_NAME[type]}(${scope.label})`\n    }\n  } else if (FORM_KEY) {\n    if (formFieldKey) {\n      content =\n        PARTICIPANT_TYPES_NAME[type] +\n          '：' +\n          (fields.find((field) => field.fieldKey === formFieldKey) || {})\n            .fieldName || ''\n    }\n  }\n  return content\n}\n\nexport const isAssignType = (optionalScope) => {\n  return [\n    OPTIONAL_SCOPE_KEYS.ASSIGN_USER,\n    OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION,\n    OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL\n  ].includes(optionalScope)\n}\n\nexport const generateParticipantModal = (participant, pickerKey) => {\n  if (participant.list && participant.list.length) {\n    participant.list = participant.list.map((item) => {\n      return {\n        name: item[pickerKey.name],\n        value: item[pickerKey.value],\n        parentFullName: pickerKey.parentName\n          ? item[pickerKey.parentName]\n          : null,\n        organizationType: pickerKey.organizationType\n          ? item[pickerKey.organizationType]\n          : null,\n        hasUser: item.hasUser,\n        model: {\n          ...item,\n          unitType: pickerKey.type\n        }\n      }\n    })\n\n    return (participant.list || [])\n      .map(\n        (item) =>\n          `${item.name}${\n            item.parentFullName ? '(' + item.parentFullName + ')' : ''\n          }`\n      )\n      .join('，')\n  }\n}\n\n/* export const convertTransfer = (transfer, nodeType) => {\n  if (\n    transfer &&\n    typeof transfer === 'object' &&\n    Node.TYPE.APPROVER_NODE === nodeType\n  ) {\n    const transferList = transfer.list\n    const transferKEY = PARTICIPANT_PICKER_KEYS[TRANSFER_TYPE]\n\n    if (transferList && transferList.length) {\n      transfer.list = transferList.map((item) => {\n        return {\n          name: item[transferKEY.name],\n          value: item[transferKEY.value],\n          model: {\n            ...item,\n            unitType: transferKEY.type,\n          },\n        }\n      })\n    }\n  }\n} */\n","import Node from '../components/flow/helpers/Node'\nimport { needMergeFields } from '../components/flow/helpers/NodeUtils'\nimport { CONDITION_TYPES } from '../constants/ENUM_DEFINITIONS'\nimport { getNodeType } from './adapterHelpers'\nimport { deepMerge, flatten } from './index'\n\nexport const updateFieldsWithMerge = (newFields, nodeFields, nodeType) => {\n  return needMergeFields(nodeType)\n    ? mergeFields(newFields, nodeFields).map(\n        ({ type, canWrite, canView, require, ...field }) => ({\n          ...field,\n          type,\n          require: require || false,\n          canView: canView !== undefined ? canView : true,\n          canWrite:\n            canWrite !== undefined\n              ? canWrite\n              : nodeCanWrite(nodeType) && fieldCanWrite(type)\n        })\n      )\n    : []\n}\n\nexport const updateFieldsWhenCreate = (fields) => (nodeType) => {\n  return needMergeFields(nodeType)\n    ? fields.map(({ type, require, ...item }) => ({\n        ...item,\n        type,\n        require: require || false,\n        canView: true,\n        canWrite: nodeCanWrite(nodeType) && fieldCanWrite(type)\n      }))\n    : []\n}\n\nexport const updateNodeProps = (flowModel, newFields) => {\n  const { taskList = [] } = flowModel\n\n  if (taskList && taskList.length) {\n    taskList.forEach((taskNode) => {\n      const nodeType = getNodeType(taskNode.taskType)\n\n      if (\n        taskNode.formFieldList &&\n        taskNode.formFieldList.length &&\n        nodeType !== Node.TYPE.END_NODE\n      ) {\n        taskNode.formFieldList = updateFieldsWithMerge(\n          updateFieldsWhenCreate(convertToFlowFields(newFields))(nodeType),\n          taskNode.formFieldList,\n          nodeType === Node.TYPE.PARALLEL_NODE\n            ? Node.TYPE.APPROVER_NODE\n            : nodeType\n        )\n      }\n    })\n  }\n\n  return flowModel\n}\n\nexport const convertToFlowFields = (formFields) => {\n  return formFields.map(({ type, name, model, options: { required } }) => ({\n    type,\n    fieldKey: model,\n    fieldName: name,\n    canView: true,\n    canWrite: fieldCanWrite(type),\n    require: required || false\n  }))\n}\n\n/**\n * does field can be write by field.type\n * @param {string} type\n */\nexport const fieldCanWrite = (type) => type !== CONDITION_TYPES.SERIAL\n\n/**\n * does node can be write by node.type\n * @param {string} type\n */\nexport const nodeCanWrite = (type) => type === Node.TYPE.SPONSOR_NODE\n\nexport const isSameFields = (newFields, oldFields) => {\n  // 不处理其他情况\n  if (newFields.length > oldFields.length) {\n    return false\n  }\n\n  return getDiffFields(newFields, oldFields).length === 0\n}\n\nexport const getDiffFields = (newFields, oldFields) => {\n  const newFieldsMap = geneFieldsKeyMap(newFields)\n  const oldFieldsMap = geneFieldsKeyMap(oldFields)\n  const newKeys = Object.keys(newFieldsMap)\n  const diffFields = []\n\n  for (let i = 0; i < newKeys.length; i++) {\n    const key = newKeys[i]\n    const old = oldFieldsMap[key]\n\n    if (!old) {\n      diffFields.push(newFieldsMap[key])\n    }\n  }\n\n  return diffFields\n}\n\nexport const mergeFields = (newFields = [], nodeFields = []) => {\n  const newFieldsMap = geneFieldsKeyMap(newFields)\n  const nodeFieldsMap = geneFieldsKeyMap(nodeFields)\n  const newKeys = Object.keys(newFieldsMap)\n\n  for (let i = 0, l = newKeys.length; i < l; i++) {\n    const key = newKeys[i]\n    const field = nodeFieldsMap[key]\n\n    if (field) {\n      // // fix: 合并属性的顺序， 必须以 newFieldsMap[key] 为准- 2019.08.27\n      newFieldsMap[key] = deepMerge(\n        {},\n        newFieldsMap[key], // new fields from formDesign page\n        field, // old fields from node.props.fieldsList\n        // fix: 合并属性的顺序， 以 node.props 为准。但是 require 属性\n        // 需要以最新的 newFieldsMap[key] 为准 - 2019.08.28\n        {\n          require: (newFieldsMap[key] || {}).require\n        }\n      )\n    }\n  }\n\n  return Object.values(newFieldsMap)\n}\n\nexport const getStateFields = (state) => {\n  const content =\n    state.formContentObject || // for update mutation\n    (state.approvalDatas.flowFormInfo || {}).formContentObject // for all state\n\n  if (content && typeof content === 'object' && Array.isArray(content.fields)) {\n    return content.fields\n  }\n\n  return []\n}\n\nexport const geneFieldsKeyMap = (fields = []) => {\n  return fields.reduce((map, curr) => {\n    map[curr.key || curr.fieldKey] = curr\n    return map\n  }, {})\n}\n\nexport const updateFormConditions = (flowConditions, formConditions) => {\n  const flowConditionsMap = geneFieldsKeyMap(flatten(flowConditions))\n  const formConditionsMap = geneFieldsKeyMap(formConditions)\n\n  Object.keys(flowConditionsMap).forEach((key) => {\n    if (formConditionsMap[key]) {\n      const opts =\n        formConditionsMap[key]['options'] ||\n        (formConditionsMap[key]['options'] = {})\n\n      if (!opts.required) {\n        opts.required = true\n      }\n    }\n  })\n}\n","import {PEOPLE_TYPES} from './ENUM_DEFINITIONS'\n\n/**\n * @type {string}\n * @description 发起人姓名\n */\nexport const START_INITIATOR = '_start_user_'\n\n/**\n * @type {string}\n * @description 用户所属公司\n */\nexport const START_USER_ORG = '_start_user_org_'\n\n/**\n * @type {string}\n * @description 用户所属部门\n */\nexport const START_USER_DEPARTMENT = '_start_user_department_'\n\n/**\n * @type {string}\n * @description 用户所属角色\n */\nexport const START_USER_POST = '_start_user_post_'\n\n/**\n * @type {string}\n * @description 用户所属项目\n */\nexport const START_USER_PROJECT = '_start_user_project_'\n\n/**\n * @type {string}\n * @description 用户所属岗位标签\n */\nexport const START_USER_POST_LABEL = \"_start_user_post_label_\"\n\n/**\n * @enum\n * SPONSOR_TYPE_ENUM\n * 发起人条件可选择类型枚举\n */\n/* export const SPONSOR_TYPE_ENUM = {\n  START_INITIATOR,\n  START_USER_ORG,\n  START_USER_DEPARTMENT,\n  START_USER_POST,\n  START_USER_PROJECT,\n} */\n\n/**\n * @constant\n * SPONSOR_TYPE_NAME\n * 发起人条件可选择类型名称\n */\nexport const SPONSOR_TYPE_NAME = {\n  [START_INITIATOR]: '发起人姓名',\n  [START_USER_ORG]: '发起人所属公司',\n  [START_USER_DEPARTMENT]: '发起人所属部门',\n  [START_USER_POST_LABEL]: '发起人所属岗位标签',\n  // [START_USER_POST]: '发起人所属角色',\n  [START_USER_PROJECT]: '发起人所属项目'\n}\n\n/**\n * @enum\n * SPONSOR_PICKER_TYPE\n * 发起人条件可选择类型的 picker type 枚举\n */\nexport const SPONSOR_PICKER_TYPE = {\n  [START_INITIATOR]: PEOPLE_TYPES.USER,\n  [START_USER_ORG]: PEOPLE_TYPES.COMPANY,\n  [START_USER_DEPARTMENT]: PEOPLE_TYPES.DEPARTMENT,\n  [START_USER_POST]: PEOPLE_TYPES.JOB,\n  [START_USER_PROJECT]: PEOPLE_TYPES.PROJECT,\n  [START_USER_POST_LABEL]: PEOPLE_TYPES.POSITION_LABEL\n}\n","import Node from '../components/flow/helpers/Node'\nimport Flow from '../components/flow/helpers/Flow'\nimport { createConditionNode } from '../components/flow/helpers/NodeUtils'\nimport {\n  getNodeType,\n  createFlowGraph,\n  convertParticipant\n  // convertTransfer,\n} from '../utils/adapterHelpers'\nimport {\n  updateFieldsWhenCreate,\n  updateFieldsWithMerge\n} from '../utils/fieldsHelpers'\nimport { deepCopy } from '../utils/index'\nimport { SPONSOR_PICKER_TYPE } from '../constants/CONDITION_ADDITION'\n\n/**\n * @typedef {import('../components/flow/helpers/FlowGraph').default} FlowGraph\n * @typedef {{ id: string, type?: 'general'|'other_condition', name?: string|null, targetTaskId: string, sourceTaskId: string, conditions?: [] }} SequenceItem\n *\n * toModel 序列化服务端数据 ServeModel 到客户端数据 ClientModel\n * @param {{taskList: TaskNode[], sequenceList: SequenceItem[]}} ServerDataModel 服务端返回的数据 model\n * @param {{flowFields: [], conditionFields: []}} ClientDataModel 解析数据时需要的客户端本地数据\n * @param {boolean} isBusinessFlow 是否是业务流程\n * @returns {Node}\n */\nexport const toModel = (\n  { taskList = [], sequenceList = [] } = {},\n  { flowFields = [], conditionFields = [] } = {},\n  isBusinessFlow\n) => {\n  if (taskList.length && sequenceList.length) {\n    /* 有数据/反填充的情况下，处理数据初始化 graph vertices & edges，返回第一个节点 */\n    const startNode = connectGraphEdges(\n      { taskList, sequenceList },\n      { flowFields, conditionFields },\n      isBusinessFlow\n    )\n\n    return startNode\n  } else {\n    /* 无数据/新建的情况下，返回默认的起始节点 */\n    return Flow.createNode({\n      type: Node.TYPE.SPONSOR_NODE,\n      nodeId: 'task-start',\n      formFieldList: flowFields\n    }).next(\n      Flow.createNode({\n        type: Node.TYPE.APPROVER_NODE,\n        formFieldList: updateFieldsWhenCreate(flowFields)(\n          Node.TYPE.APPROVER_NODE\n        )\n      })\n    )\n  }\n}\n\n/**\n * connectGraphEdges\n * @param {{taskList: TaskNode[], sequenceList: SequenceItem[]}} ServerDataModel 服务端返回的数据 model\n * @param {{flowFields: [], conditionFields: []}} ClientDataModel 解析数据时需要的客户端本地数据\n * @param {boolean} isBusinessFlow 是否是业务流程\n * @returns {Node} startNode\n */\nconst connectGraphEdges = (\n  { sequenceList, taskList },\n  { flowFields, conditionFields },\n  isBusinessFlow\n) => {\n  const graph = createFlowGraph()\n  const findTask = findTaskById(taskList)\n\n  let startNode = null\n\n  for (let i = 0; i < sequenceList.length; i++) {\n    const node = sequenceList[i]\n    const {\n      type: conditionType,\n      sourceTaskId,\n      targetTaskId,\n      conditionList\n    } = node\n\n    const sourceNode = Flow.createNode(\n      toNode(deepCopy(findTask(sourceTaskId)), { flowFields })\n    )\n    const targetNode = Flow.createNode(\n      toNode(deepCopy(findTask(targetTaskId)), { flowFields })\n    )\n\n    // fix: [审批流]条件字段不存在不能发布审批流程的(#1022122)\n    const conditions =\n      Array.isArray(conditionList) && conditionList.length\n        ? filterConditions(conditionList, flowFields, isBusinessFlow)\n        : []\n\n    // 如果是条件分支，开始绘制各个条件\n    if (sourceNode.type === Node.TYPE.CONDITION_BRANCH) {\n      const conditionNode = createConditionNode({\n        conditions,\n        conditionType\n      })\n\n      conditionNode.read({\n        conditions,\n        fields: conditionFields\n      })\n\n      graph.addEdge(sourceNode, conditionNode)\n      graph.addEdge(conditionNode, targetNode)\n    } else {\n      if (sourceNode.type === Node.TYPE.PARALLEL_BRANCH) {\n        targetNode.alias = Node.TYPE.PARALLEL_NODE\n      }\n\n      graph.addEdge(sourceNode, targetNode)\n    }\n\n    if (!startNode) {\n      startNode = sourceNode\n    }\n  }\n\n  drawNodeLinesByGraph(graph)\n\n  return startNode\n}\n\n/**\n * * drawNodeLinesByGraph BFS 绘制视图节点和连线\n * @param {FlowGraph} graph\n * @param {Node} startNode\n * // @param {WeakMap<Node, Node>} conditionNodesMap\n */\nexport const drawNodeLinesByGraph = (graph) => {\n  if (process.env.NODE_ENV === 'development') {\n    console.log('graph: ', graph)\n  }\n\n  const commonNodeMap = {}\n\n  for (const [key, node] of graph.edges) {\n    // END_NODE or PARALLEL_BRANCH_END 无需连线\n    if (\n      node &&\n      node.type !== Node.TYPE.PARALLEL_BRANCH_END &&\n      node.type !== Node.TYPE.CONDITION_BRANCH_END &&\n      node.type !== Node.TYPE.END_NODE\n    ) {\n      const prevNode = graph.getVertexByKey(key)\n\n      if (commonNodeMap[node.nodeId]) {\n        console.log('commonNodeMap: ', commonNodeMap)\n        continue\n      } else {\n        prevNode.next(node)\n      }\n\n      if (prevNode.oppositeTaskId && !commonNodeMap[prevNode.oppositeTaskId]) {\n        if (!prevNode.childNode) {\n          commonNodeMap[prevNode.oppositeTaskId] = prevNode.next(\n            graph.getVertexByKey(prevNode.oppositeTaskId)\n          )\n        }\n      }\n    }\n  }\n}\n\n/**\n * @typedef ClientNodeModel\n * @property {string} nodeId\n * @property {string} type\n * @property {{ title: string, content: string }} model\n * @property {{ type: string, list: [], [fieldKey]: string }} [participant]\n * @property {[]} [formFieldList]\n *\n * toNode 将 ServerTaskItem 转为 Node 构造函数参数\n * @param {TaskNode} ServerTaskItem\n * @param {{flowFields: [], conditionFields: []}} ClientDataModel 解析数据时需要的客户端本地数据\n * @param {boolean} needConvert 是否转换数据结构到 ClientViewModel\n * @returns {ClientNodeModel}\n */\nexport const toNode = (\n  {\n    taskNodeId = '',\n    taskNodeName = '',\n    taskType = '',\n    participant = {},\n    transfer,\n    formFieldList = [],\n    ...props\n  } = {},\n  { flowFields: fields = [] } = {},\n  needConvert = true\n) => {\n  const nodeType = getNodeType(taskType)\n  let content = ''\n\n  if (needConvert) {\n    if (participant) {\n      content = convertParticipant(participant, fields)\n    }\n\n    // convertTransfer(transfer, nodeType)\n  }\n\n  return {\n    nodeId: taskNodeId,\n    type: nodeType,\n    model: {\n      title: taskNodeName,\n      content\n    },\n    participant,\n    transfer,\n    formFieldList: updateFieldsWithMerge(fields, formFieldList, nodeType),\n    ...props\n  }\n}\n\n/**\n * findTaskById\n * @typedef {Object<string, any>} TaskNode\n * @property {string} taskNodeId\n * @property {string} taskNodeName\n * @property {string} taskType\n * @property {Object<string, any>} [participant]\n *\n * @param {TaskNode[]} tasks\n * @callback FindTaskFn\n * @param {string} id\n * @returns {TaskNode}\n * @returns {FindTaskFn}\n */\nexport const findTaskById = (tasks = []) => {\n  const cachedTasks = tasks.reduce((cache, task) => {\n    cache[task.taskNodeId] = task\n    return cache\n  }, {})\n\n  return (id) => {\n    return (\n      id &&\n      (cachedTasks[id]\n        ? cachedTasks[id]\n        : (cachedTasks[id] = tasks.find((t) => t && t.taskNodeId === id)))\n    )\n  }\n}\n\n/**\n * @param {field[]} flowFields\n * @param {condition[]} conditionList\n * @param {boolean} isBusinessFlow 是否是业务流程\n */\nfunction filterConditions(conditionList, flowFields, isBusinessFlow) {\n  return conditionList.filter(Boolean).map((condition) => {\n    // 如果是默认的发起人类型\n    const isSponsor = SPONSOR_PICKER_TYPE[condition.fieldKey]\n\n    if (!isSponsor) {\n      const field = flowFields.find(\n        (item) => item.fieldKey === condition.fieldKey\n      )\n\n      if (!field) {\n        condition.fieldKey = ''\n      } else {\n        // fix: 如果是业务流程，且字段的 required 属性是 false，也需要清空该条件\n        if (isBusinessFlow && field.require !== undefined && !field.require) {\n          condition.fieldKey = ''\n        }\n      }\n    }\n\n    return condition\n  })\n}\n","/**\n * 检查 FlowModel 是否有效\n * 1. [节点]: 名称不能为空\n * 2. [审批/抄送节点]: 参与人\n *  2.1 参与人不能为空\n *  2.2 参与角色/部门不能为空\n * 3. [条件节点]: 条件不能为空，必须存在子节点\n */\nimport Node from '../components/flow/helpers/Node'\nimport Flow from '../components/flow/helpers/Flow'\nimport FlowNodeTypeModel from '../components/flow/constants/FLOW_NODE_TYPE_MODEL'\nimport {\n  FORM_FIELDS_TYPES,\n  PARTICIPANT_TYPES,\n  PARTICIPANT_TYPES_NAME,\n  PARTICIPANT_TYPES_MODEL,\n} from '../constants/ENUM_DEFINITIONS'\nimport {\n  OPTIONAL_SCOPE_KEYS,\n  OPTIONAL_SCOPE_ENUM,\n} from './../constants/OPTIONAL_PERSONAL'\nimport { createFlowGraph } from './adapterHelpers'\nimport { toNode, findTaskById, drawNodeLinesByGraph } from '../adapters/toModel'\nimport { createConditionNode } from '../components/flow/helpers/NodeUtils'\nimport { OTHER_CONDITION } from '../components/flow/constants/CONDITION_TYPE'\n\nexport const checkFlowModel = (flowModel) => {\n  if (!flowModel) {\n    throw new Error('\b流程数据不能为空')\n  }\n\n  const { sequenceList = [], taskList = [] } = flowModel\n  const graph = createFlowGraph()\n  const findTask = findTaskById(taskList)\n\n  let startNode = null\n\n  for (let i = 0; i < sequenceList.length; i++) {\n    const node = sequenceList[i]\n    const {\n      type: conditionType,\n      sourceTaskId,\n      targetTaskId,\n      conditionList,\n    } = node\n\n    const sourceNode = Flow.createNode(\n      toNode(findTask(sourceTaskId), {}, false)\n    )\n    const targetNode = Flow.createNode(\n      toNode(findTask(targetTaskId), {}, false)\n    )\n\n    // 如果是条件分支，开始绘制各个条件\n    if (sourceNode.type === Node.TYPE.CONDITION_BRANCH) {\n      const conditionNode = createConditionNode({\n        conditions: conditionList,\n        conditionType,\n      })\n\n      graph.addEdge(sourceNode, conditionNode)\n      graph.addEdge(conditionNode, targetNode)\n    } else {\n      if (sourceNode.type === Node.TYPE.PARALLEL_BRANCH) {\n        targetNode.alias = Node.TYPE.PARALLEL_NODE\n      }\n\n      graph.addEdge(sourceNode, targetNode)\n    }\n\n    if (!startNode) {\n      startNode = sourceNode\n    }\n  }\n\n  if (startNode && sequenceList.length > 1) {\n    drawNodeLinesByGraph(graph)\n    checkGraphAndNodeState(graph, startNode)\n  } else {\n    throw new Error('尚未添加任何流程节点')\n  }\n}\n\n/**\n * checkGraphAndNodeState\n * @param {import('../components/flow/helpers/FlowGraph').default} graph\n * @param {import('../components/flow/helpers/Node').default} startNode\n */\nexport function checkGraphAndNodeState(graph, startNode) {\n  let hasApproverNode = false\n\n  graph.traverseBFS(startNode, function(node) {\n    if (\n      node.type === Node.TYPE.APPROVER_NODE ||\n      node.type === Node.TYPE.PARALLEL_BRANCH\n    ) {\n      hasApproverNode = true\n    }\n\n    const errorMessage = checkNodeState(node)\n\n    if (errorMessage) {\n      const defaultTitle = FlowNodeTypeModel[node.type].title\n      let title = node.model.title\n      const text = '节点'\n\n      if (title && title.endsWith(text)) {\n        title = title.replace(text, '')\n      }\n\n      if (defaultTitle === title) {\n        title += text\n      }\n\n      throw new Error(\n        errorMessage.startsWith(title) ? errorMessage : title + errorMessage\n      )\n    }\n  })\n\n  if (!hasApproverNode) {\n    throw new Error('流程中缺少审批人节点')\n  }\n}\n\n/**\n * 检查 node 的 model 是否异常\n * @param {Node} node\n */\nexport const checkNodeState = (node) => {\n  if (!node.model.title) {\n    const defaultModel = FlowNodeTypeModel[node.type]\n    const nodeTitle = defaultModel.title.replace('人', '')\n\n    return `${nodeTitle}节点名称不能为空`\n  }\n\n  switch (node.type) {\n    case Node.TYPE.APPROVER_NODE:\n      return checkParticipantStatus(node)\n    case Node.TYPE.NOTIFIER_NODE:\n      return checkParticipantStatus(node)\n    case Node.TYPE.CONDITION_NODE:\n      return checkConditionStatus(node)\n    default:\n      break\n  }\n}\n\n/**\n * @typedef {import('../components/flow/helpers/Node').default} Node\n * @param {Node} node\n */\nexport const checkParticipantStatus = (node) => {\n  if (node.props) {\n    const { participant } = node.props\n    const { formFieldKey, list, level } = PARTICIPANT_TYPES_MODEL[\n      participant.type\n    ]\n\n    const isAssignType = (type) => {\n      return [\n        OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION,\n        OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL,\n        OPTIONAL_SCOPE_KEYS.ASSIGN_USER,\n      ].includes(type)\n    }\n\n    /* 不存在任何已选中内容则进入检查逻辑 */\n    if (!FORM_FIELDS_TYPES[participant.type] && list && Array.isArray(list)) {\n      if (participant.type === PARTICIPANT_TYPES.OPTIONAL_PERSONNEL) {\n        if (\n          isAssignType(participant.optionalScope) &&\n          (!participant.list || !participant.list.length)\n        ) {\n          const scope = OPTIONAL_SCOPE_ENUM.find(\n            (i) => i.value === participant.optionalScope\n          )\n          if (scope) {\n            node.model.errorState = `${scope.label.substring(2)}不可为空！`\n          } else {\n            node.model.errorState = `发起人自选配置有误，请检查后重试！`\n          }\n        }\n      } else {\n        if (!participant.list || !participant.list.length) {\n          node.model.errorState = `${\n            FlowNodeTypeModel[node.type].title\n          }不能为空`\n        }\n      }\n      /* else {\n        if (\n          participant.type === PARTICIPANT_TYPES.POSITION ||\n          participant.type === PARTICIPANT_TYPES.DEPARTMENT\n        ) {\n          const noUserItems = []\n\n          participant.list.forEach((item) => {\n            if (item.hasUser === false) {\n              noUserItems.push(item)\n            }\n          })\n\n          if (noUserItems.length) {\n            const typeName = PARTICIPANT_TYPES_NAME[participant.type]\n\n            node.model.errorState = `${typeName}中无对应人员`\n          }\n        }\n      } */\n    }\n\n    if (level) {\n      if (!participant.level) {\n        node.model.errorState = '请设置等级属性'\n      }\n    }\n\n    if (formFieldKey) {\n      if (!participant.formFieldKey) {\n        node.model.errorState =\n          PARTICIPANT_TYPES_NAME[participant.type] + '不能为空'\n      }\n    }\n  } else {\n    if (node.model.errorState) {\n      node.model.errorState = false\n    }\n  }\n\n  return node.model.errorState\n}\n\nexport const checkConditionStatus = (node) => {\n  if (node.props) {\n    const conditions = node.props.conditions\n\n    // 条件节点的 conditionType 默认为 undefined | 'general'\n    // 所以此处不应该判断其为 'general' 而是判断非 'other_condition'\n    // 则都应该进入判断 是否存在条件 且 条件 都存在有效的 field key\n    if (node.conditionType !== OTHER_CONDITION) {\n      const haveConditions = Array.isArray(conditions) && conditions.length > 0\n      const hasMissedFieldKey =\n        haveConditions &&\n        conditions.filter((condition) => !condition.fieldKey).length !== 0\n\n      if (!haveConditions) {\n        node.model.errorState = '条件不能为空'\n      } else if (hasMissedFieldKey) {\n        node.model.errorState = '条件节点缺少的条件字段'\n      } else {\n        checkBracketPairs(conditions)\n\n        if (node.model.errorState) {\n          node.model.errorState = false\n        }\n      }\n    }\n  }\n\n  return node.model.errorState\n}\n\n/**\n * @method checkBracketPairs\n * 解决的核心问题是： 括号边界的匹配，即检测起始和结束时的边界问题，每个起始必须匹配存在且正确的边界\n * @description 检测括号的算法\n *  1. 开始括号永远是前置(先)存在，然后才有结束括号\n *  2. 开始括号的标志位永远存在结束括号对应的标志位\n *  3. 条件自身即存在开始又存在结束，则不用处理类似(a)+(b)括号了自身\n * @example right:\n *  0. a || b\n *  1. (a && b) || c\n *  2. a || (b && c)\n *  3. ((a && b) || c) && d || e\n *  4. (((a && b) || c) && d) || e\n *  5. ((a && b) || c) && (d || e)\n * @example wrong:\n *  0. a) // or `(b`\n *  1. (a || b // or `a || b)`\n * @param {Array<{ leftBracket?: boolean, rightBracket?: boolean, [prop: string]: any }>} items\n * @returns {void|Error}\n */\nexport const checkBracketPairs = (items) => {\n  // 开始括号栈 => FILO 先入后出(push => 入, pop => 尾出)\n  const leftStack = []\n  // 结束括号队列 => FIFO 先入先出(push => 入, shift => 顶出)\n  const rightQueue = []\n\n  // 开始括号栈指针 flag\n  let leftPointer = 0\n  // 结束括号栈指针 flag\n  let rightPointer = 0\n\n  let i = 0\n  const last = items.length\n  const graphMap = new Map()\n\n  if (items.length) {\n    do {\n      leftPointer = leftStack.length\n      rightPointer = rightQueue.length\n\n      const condition = items[i++]\n\n      // leftBracket\n      if (condition.leftBracket) {\n        // 入栈并记录标志位\n        leftPointer = leftStack.push(condition)\n      }\n\n      // rightBracket\n      if (condition.rightBracket) {\n        // 入栈并记录标志位\n        rightPointer = rightQueue.push(condition)\n\n        if (leftPointer) {\n          // 左括号出栈，对应最新的 第一个右括号\n          const l = leftStack.pop()\n\n          // 右括号出列，对应其匹配的左括号\n          const r = rightQueue.shift()\n\n          if (l && r) {\n            // 用图记录其位置 { l: r }\n            graphMap.set(l, r)\n          }\n        } else {\n          // 无左括号 => Error\n          throw Error('无法找到匹配的左括号')\n        }\n      }\n\n      // 依然存在右括号，而没有左括号\n      if (!leftPointer && rightPointer) {\n        throw Error('无法找到匹配的左括号')\n      }\n\n      // 依然存在左括号，而没有右括号\n      if (leftPointer > rightPointer && i === last) {\n        throw Error('无法找到匹配的右括号')\n      }\n    } while (i < last)\n  }\n}\n","var render, staticRenderFns\nimport script from \"./sponsor.vue?vue&type=script&lang=js&\"\nexport * from \"./sponsor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./approver.vue?vue&type=script&lang=js&\"\nexport * from \"./approver.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./notifier.vue?vue&type=script&lang=js&\"\nexport * from \"./notifier.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./condition.vue?vue&type=script&lang=js&\"\nexport * from \"./condition.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./parallel.vue?vue&type=script&lang=js&\"\nexport * from \"./parallel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Node from '../components/flow/helpers/Node'\nimport Flow from '../components/flow/helpers/Flow'\nimport {\n  getServerType,\n  getSourceNode,\n  getTargetNode,\n  createFlowGraph\n} from '../utils/adapterHelpers'\nimport { checkGraphAndNodeState } from '../utils/checkFlowModel'\n\n/**\n * toJSON 反序列化客户端数据 ClientModel 到服务端数据 ServerModel\n * @param {Node} startNode 客户端本地树形结构的起始节点\n * @param {boolean} ignoreError 不运行错误检查代码\n * @returns {{taskList: TaskNode[], sequenceList: SequenceItem[]}} ServerDataModel 服务端返回的数据 model\n */\nexport const toJSON = (startNode, ignoreError) => {\n  const graph = createFlowGraph()\n\n  /** @type {TaskNode[]} */\n  const taskList = []\n\n  /** @type {SequenceItem[]}  */\n  const sequenceList = []\n\n  const connectGraphEdge = createDFSGraphConnector(graph, taskList)\n  const genSequenceItems = createSequenceGenerator(graph, sequenceList)\n\n  connectGraphEdge(startNode)\n  genSequenceItems(startNode)\n\n  if (!ignoreError) {\n    if (startNode && sequenceList.length > 1) {\n      checkGraphAndNodeState(graph, startNode)\n    } else {\n      throw new Error('尚未添加任何流程节点')\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    graph.print()\n    console.log('graph: ', graph)\n  }\n\n  return {\n    taskList: taskList.concat(toTask(END_NODE)),\n    sequenceList\n  }\n}\n\n/**\n * createDFSGraphConnector\n * @description 用DFS连接Graph的各个点<GraphVertex>生成边<GraphEdge>\n * @typedef {import('../components/flow/helpers/FlowGraph').default} FlowGraph\n * @param {FlowGraph} graph\n * @param {TaskNode[]} taskList\n * @callback ConnectFn\n * @param {Node} node\n * @returns {ConnectFn}\n */\nconst createDFSGraphConnector = (graph, taskList) => {\n  /** @type {Node[]} */\n  const END_NODES_STACK = []\n\n  /**\n   * connect 将 node 通过 FlowGraph 建立图索引关系\n   * 尾递归 https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8\n   * 深度优先递归 DFS 建立图索引关系 G => {V<Node>, E<Node[]>}\n   * @param {Node} node\n   */\n  const connect = (node) => {\n    /* 不记录条件节点到 taskList 中，跳过条件节点 */\n    if (node.type !== Node.TYPE.CONDITION_NODE) {\n      taskList.push(toTask(node))\n    }\n\n    /* 跳过结束节点 */\n    if (node.type === Node.TYPE.END_NODE) return\n\n    graph.addVertex(node).addVertex(node.childNode)\n\n    if (node.childrenNodes && node.childrenNodes.length) {\n      /* Flag 标记清除算法 */\n      let pushedIntoStack = false\n\n      /* 如果当前节点是分支并以存在子节点，则将该节点推入结束节点栈中，并用 flag 标记 */\n      if (node.childNode) {\n        END_NODES_STACK.push(node.childNode)\n        pushedIntoStack = true\n      }\n\n      node.childrenNodes.forEach((childNode) => {\n        graph.addEdge(node, childNode)\n        connect(childNode)\n      })\n\n      /* 如果被标记过 flag，则从栈中推出(清除) */\n      if (pushedIntoStack) {\n        END_NODES_STACK.pop()\n      }\n    }\n\n    if (node.childNode) {\n      /**\n       * 如果存在子元素集合(node.childrenNodes) 则不需要连线 node -> node.childNode 之间\n       */\n      if (!node.childrenNodes || !node.childrenNodes.length) {\n        graph.addEdge(node, node.childNode)\n      }\n\n      connect(node.childNode)\n    }\n\n    if (!node.childrenNodes && !node.childNode) {\n      graph.addEdge(\n        node,\n        END_NODES_STACK[END_NODES_STACK.length - 1] || END_NODE\n      )\n    }\n  }\n\n  return connect\n}\n\n/**\n * createSequenceGenerator\n * @description 将 graph.edges 按 BFS 的顺序生成一维顶点集合[{ source: a, target: b }, ...]\n *\n * @typedef {import('../components/flow/helpers/FlowGraph').default} FlowGraph\n * @param {FlowGraph} graph\n * @param {SequenceItem[]} sequenceList\n * @callback SequenceGenerator\n * @param {Node} currNode\n * @returns {SequenceGenerator}\n */\nconst createSequenceGenerator = (graph, sequenceList) => {\n  const createSequenceItem = createUniqueSequenceItem(sequenceList)\n\n  const push2sequenceList = (/** @type {Node} */ currNode) => {\n    // 广度优先遍历图索引，生成连线记录 sequenceList\n    graph.traverseBFS(currNode, function(node, neighbor) {\n      // 如果当前节点是条件节点，跳过该节点\n      if (node.type === Node.TYPE.CONDITION_BRANCH) {\n        return\n      }\n\n      if (node.type === Node.TYPE.CONDITION_NODE) {\n        const sourceNode = getSourceNode(node, graph)\n        const targetNode = getTargetNode(neighbor, graph)\n\n        if (sourceNode && targetNode) {\n          return createSequenceItem({\n            type: node.conditionType,\n            sourceTaskId: sourceNode.nodeId,\n            targetTaskId: targetNode.nodeId,\n            conditionList: (node.props.conditions || [])\n              .filter((condition) => condition && condition.fieldKey)\n              // eslint-disable-next-line no-unused-vars\n              .map(({ key, ...props }) => ({\n                ...props\n              }))\n          })\n        }\n      }\n\n      if (neighbor && node.type !== Node.TYPE.END_NODE) {\n        if (Array.isArray(neighbor) && neighbor.length) {\n          neighbor.forEach((childNode) => {\n            createSequenceItem({\n              sourceTaskId: node.nodeId,\n              targetTaskId: childNode.nodeId\n            })\n          })\n        } else {\n          createSequenceItem({\n            sourceTaskId: node.nodeId,\n            targetTaskId: neighbor.nodeId\n          })\n        }\n      }\n    })\n  }\n\n  return push2sequenceList\n}\n\n/**\n * toTask 将 Client Node 节点转换成 Server Model\n * @param {Node} node\n * @returns {TaskNode}\n */\nconst toTask = (node) => {\n  let taskNode = {\n    taskNodeId: node.nodeId,\n    taskNodeName: (node.model || {}).title,\n    taskNodeDescription: null,\n    taskType: getServerType(node.type)\n  }\n\n  if (node.oppositeTaskId) {\n    taskNode.oppositeTaskId = node.oppositeTaskId\n  }\n\n  const {\n    formFieldList = [],\n    participant = {},\n    buttonList = [],\n    opinionSetting,\n    transfer,\n    ...props\n  } = node.props\n\n  if (node.type !== Node.TYPE.END_NODE) {\n    if (formFieldList && formFieldList.length) {\n      // eslint-disable-next-line no-unused-vars\n      taskNode.formFieldList = formFieldList.map(({ type, ...props }) => ({\n        ...props\n      }))\n    }\n  }\n\n  if (node.type === Node.TYPE.SPONSOR_NODE) {\n    //\n  } else if (\n    node.type === Node.TYPE.NOTIFIER_NODE ||\n    node.type === Node.TYPE.APPROVER_NODE\n  ) {\n    const { list = [], formFieldKey = '', ...participantProps } = participant\n\n    if (formFieldKey) {\n      taskNode.participant = { formFieldKey, ...participantProps }\n    } else if (list && list.length) {\n      taskNode.participant = {\n        // eslint-disable-next-line no-unused-vars\n        list: list.map(({ model: { unitType, ...data }, hasUser }) => ({\n          ...data,\n          hasUser\n        })),\n        ...participantProps\n      }\n    } else {\n      taskNode.participant = {\n        ...participantProps\n      }\n    }\n\n    if (node.type === Node.TYPE.APPROVER_NODE) {\n      taskNode.buttonList = [] || buttonList\n      taskNode.opinionSetting = {\n        ...opinionSetting\n      }\n\n      if (transfer && transfer.list && transfer.list.length) {\n        const { type, list } = transfer\n        taskNode.transfer = {\n          type,\n          // eslint-disable-next-line no-unused-vars\n          list: list.map(({ model: { unitType, ...data } }) => ({ ...data }))\n        }\n      }\n    }\n\n    taskNode = {\n      ...taskNode,\n      ...props\n    }\n  } else if (node.type === Node.TYPE.CONDITION_BRANCH) {\n    return taskNode\n  }\n\n  return taskNode\n}\n\n/**\n * @typedef {{ id: string, name?: string|null, type?: 'general'|'other_condition', targetTaskId: string, sourceTaskId: string, conditions?: [] }} SequenceItem\n *\n * createSequenceItem\n * @description 生成每个序列对象<SequenceItem>\n * @param {SequenceItem[]} sequenceList\n * @callback CreateSequenceItemFn\n * @param {SequenceItem} opts\n * @returns {SequenceItem}\n * @returns {CreateSequenceItemFn}\n */\nconst createUniqueSequenceItem = (sequenceList) => {\n  /** @type {string[]} */\n  const cached = []\n\n  return (opts = {}) => {\n    if (!opts.sourceTaskId || !opts.targetTaskId) {\n      throw new Error(\n        `One of the 'opts.sourceTaskId' || 'opts.targetTaskId' is an invalid value ${JSON.stringify(\n          opts\n        )}`\n      )\n    }\n\n    if (opts.sourceTaskId === opts.targetTaskId) {\n      throw new Error(\n        'Are you sure the sourceTaskId and targetTaskId are same?'\n      )\n    }\n\n    const key = [opts.sourceTaskId, opts.targetTaskId].join('->')\n\n    if (!cached.includes(key)) {\n      cached.push(key)\n    } else {\n      console.log(`duplicate key ${key} has been cached`)\n    }\n\n    sequenceList.push({\n      id: Node.getUUID('task'),\n      name: null,\n      conditionList: [],\n      ...opts\n    })\n  }\n}\n\n/**\n * @typedef TaskNode\n * @property {string} taskNodeId\n * @property {string} taskType\n * @property {string} [taskNodeName]\n * @property {Object<string, any>} [participant]\n */\n/** @type {TaskNode}  */\nexport const END_TASK_NODE = {\n  taskNodeId: 'task-end',\n  taskNodeName: '结束',\n  taskType: Node.TYPE.END_NODE\n}\n\nexport const END_NODE = Flow.createNode({\n  type: Node.TYPE.END_NODE,\n  nodeId: END_TASK_NODE.taskNodeId,\n  model: {\n    title: END_TASK_NODE.taskNodeName\n  }\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-drawer',_vm._g(_vm._b({staticClass:\"yz design-center-panel-drawer\",attrs:{\"modal\":\"\",\"append-to-body\":\"\"}},'el-drawer',_vm.$attrs,false),_vm.$listeners),[(_vm.node)?[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"节点属性\",\"name\":\"node\"}},[(_vm.computedNode)?_c(_vm.computedNode,_vm._g(_vm._b({tag:\"component\",staticClass:\"flow-panel\",attrs:{\"node\":_vm.node,\"fields\":_vm.fields}},'component',_vm.$attrs,false),_vm.$listeners)):_vm._e()],1),(_vm.showPermissionPanel)?_c('el-tab-pane',{attrs:{\"label\":\"表单字段权限\",\"name\":\"flow\"}},[(_vm.needPermissionTable)?_c('PanelBlock',[_c('PanelPermissionTable',_vm._b({},'PanelPermissionTable',{\n              node: _vm.node,\n              fields: _vm.fields,\n              joinPlan: _vm.joinPlan,\n              canCallbackFormData: !!(_vm.getFlowFormInfo || {})\n                .canCallbackFormData,\n              flowType: (_vm.getFlowBaseInfo || {}).flowType\n            },false))],1):_vm._e()],1):_vm._e()],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flow-panel-block\"},[(_vm.title || _vm.$slots.title)?_c('div',{staticClass:\"flow-panel-hd\"},[(_vm.$slots.title)?_vm._t(\"title\"):_c('h4',[_vm._v(_vm._s(_vm.title))])],2):_vm._e(),_c('div',{staticClass:\"flow-panel-bd\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flow-panel-block\">\n    <div v-if=\"title || $slots.title\" class=\"flow-panel-hd\">\n      <slot v-if=\"$slots.title\" name=\"title\"></slot>\n      <h4 v-else>{{title}}</h4>\n    </div>\n\n    <div class=\"flow-panel-bd\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PanelBlock',\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_base-block.vue?vue&type=template&id=15c2d072&\"\nimport script from \"./_base-block.vue?vue&type=script&lang=js&\"\nexport * from \"./_base-block.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Table',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"mini\",\"data\":_vm.formFieldList,\"options\":_vm.options}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 业务流程\nexport const BUSINESS_FLOW = 1\n// 表单流程\nexport const FORM_FLOW = 2\n// 经典模版流程\nexport const TEMPLATE_FLOW = 3\n","<template>\n  <Table\n    style=\"width: 100%\"\n    size=\"mini\"\n    :data=\"formFieldList\"\n    :options=\"options\"\n  ></Table>\n  <!-- :row-key=\"row => row.fieldKey\" -->\n</template>\n\n<script>\n  import PropTypes from 'vue-types'\n  import Node from '../flow/helpers/Node'\n  import { FORM_FLOW } from './../../constants/FLOW_TYPE'\n\n  /**\n   * 1. 审批、抄送、发起节点 存到 formFieldsList\n   * 2. 过滤一下 canView/canWrite/require 状态\n   * 3. 审批、发起 所有默认可见、可编辑，抄送 默认所有可见，可编辑不能选\n   */\n  export default {\n    name: 'PanelPermissionTable',\n    props: {\n      // eslint-disable-next-line\n      node: PropTypes.instanceOf(Node).required,\n      fields: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string.def(''),\n          fieldKey: PropTypes.string.isRequired,\n          fieldName: PropTypes.string.isRequired,\n          canView: PropTypes.bool.isRequired,\n          canWrite: PropTypes.bool.isRequired,\n          require: PropTypes.oneOf([true, false, undefined]).isRequired,\n          editable: PropTypes.bool.isRequired,\n          textVisible: PropTypes.bool.isRequired,\n          useCondition: PropTypes.bool.isRequired\n        })\n      ),\n      joinPlan: PropTypes.oneOf([1, 2, 3]).isRequired,\n      canCallbackFormData: PropTypes.bool.def(true),\n      flowType: PropTypes.number.def(1)\n    },\n    data() {\n      const notViewFieldList =\n        this.node.props &&\n        this.node.props.formFieldList.filter((i) => !i.textVisible)\n      const nodeFiledsList =\n        this.node.props &&\n        this.node.props.formFieldList.filter((i) => i.textVisible)\n      const isCCNode = this.node.type === Node.TYPE.NOTIFIER_NODE\n      const isSponsorNode = this.node.type === Node.TYPE.SPONSOR_NODE\n      const hasFields = !!(this.fields && this.fields.length)\n      const isAllCanEdit = nodeFiledsList.some((i) => i.editable)\n      // 是否显示可编辑列，需满足以下条件，1.至少有一列可编辑，2.不是抄送节点 3. 是发起人或没有审批回调或为空白审批\n      const isShowEditCol =\n        isAllCanEdit &&\n        !isCCNode &&\n        (isSponsorNode ||\n          this.canCallbackFormData ||\n          this.flowType === FORM_FLOW)\n      const data = {\n        options: [],\n        formFieldList: [],\n        notViewFormFieldList: []\n      }\n\n      data.options = [\n        {\n          label: '名称',\n          prop: 'fieldName',\n          renderHeader: () => {\n            return <span class=\"field-name\">名称</span>\n          },\n          render: ({ row }) => {\n            let classes = 'field-name'\n            classes += row.require ? ' is-required' : ''\n\n            return <div class={classes}>{row.fieldName}</div>\n          }\n        },\n        {\n          label: '可见',\n          width: 48,\n          renderHeader: () => {\n            return <span>可见</span>\n          }\n        },\n        {\n          label: '',\n          prop: 'canView',\n          width: 34,\n          renderHeader: () => {\n            return (\n              hasFields && (\n                <el-checkbox\n                  style=\"margin-left: -10px;\"\n                  value={this.chosenAllCanView}\n                  onInput={(val) => {\n                    this.formFieldList.forEach((t) => (t.canView = val))\n\n                    if (!val) {\n                      this.formFieldList.forEach((t) => (t.canWrite = val))\n                    }\n                  }}\n                />\n              )\n            )\n          },\n          render: ({ row, column: col, index }) => {\n            return (\n              <el-checkbox\n                style=\"margin-left: -10px;\"\n                value={row[col.prop]}\n                onInput={(val) => {\n                  row[col.prop] = val\n\n                  if (!val) {\n                    const correspondingItem = this.formFieldList[index]\n                    if (correspondingItem && correspondingItem.canWrite) {\n                      correspondingItem.canWrite = false\n                    }\n                  }\n                }}\n              />\n            )\n          }\n        },\n        isShowEditCol && {\n          label: '可编辑',\n          width: 92,\n          renderHeader: () => {\n            return <span style=\"margin-left: 30px\">可编辑</span>\n          }\n        },\n        isShowEditCol && {\n          label: '',\n          prop: 'canWrite',\n          width: 24,\n          renderHeader: () => {\n            return (\n              hasFields && (\n                <el-checkbox\n                  style=\"margin-left: -10px;\"\n                  disabled={!this.chosenAllCanView}\n                  value={this.chosenAllCanView && this.chosenAllCanEdit}\n                  onInput={(val) => {\n                    this.canWriteFields.forEach((t) => (t.canWrite = val))\n                  }}\n                />\n              )\n            )\n          },\n          render: ({ row, column: col }) => {\n            return (\n              !this.checkUsingCondition(row) &&\n              row.editable && (\n                <el-checkbox\n                  style=\"margin-left: -10px;\"\n                  disabled={!row.canView}\n                  value={row[col.prop]}\n                  onInput={(val) => {\n                    row[col.prop] = val\n                  }}\n                />\n              )\n            )\n          }\n        }\n      ].filter(Boolean)\n\n      if (notViewFieldList && notViewFieldList.length) {\n        data.notViewFormFieldList = notViewFieldList\n      }\n\n      if (nodeFiledsList && nodeFiledsList.length) {\n        data.formFieldList = nodeFiledsList\n      } else {\n        data.formFieldList =\n          this.fields.map((t) => ({\n            ...t,\n            canView: this.joinPlan === 1 ? true : t.textVisible,\n            canWrite: this.joinPlan === 1 ? !isCCNode : false\n          })) || []\n      }\n\n      if (isCCNode) {\n        data.formFieldList = data.formFieldList.map((t) => {\n          if (t.canWrite) t.canWrite = false\n          return t\n        })\n      }\n\n      return data\n    },\n    computed: {\n      canWriteFields() {\n        return this.formFieldList.filter(\n          (i) => i.textVisible && i.editable && !this.checkUsingCondition(i)\n        )\n      },\n      chosenAllCanView() {\n        return this.formFieldList.every((t) => t.canView)\n      },\n      chosenAllCanEdit() {\n        return this.canWriteFields.every((t) => t.canWrite)\n      }\n    },\n    watch: {\n      formFieldList: {\n        deep: true,\n        immediate: true,\n        handler() {\n          this.updateFieldList()\n        }\n      }\n    },\n    /* created() {\n    if (!this.node.props || !this.node.props.formFieldList) {\n      this.updateFieldList()\n    }\n  }, */\n    methods: {\n      updateFieldList() {\n        this.node &&\n          this.node.updateProps({\n            formFieldList: this.formFieldList.concat(this.notViewFormFieldList)\n          })\n      },\n      checkUsingCondition(row) {\n        const formField = this.fields.find((i) => i.fieldKey === row.fieldKey)\n        const isSponsor = this.node.type === Node.TYPE.SPONSOR_NODE\n        if (!isSponsor && formField && formField.useCondition) {\n          row.canWrite = false\n          return !isSponsor && formField.useCondition\n        }\n        return false\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-permission-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-permission-table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_base-permission-table.vue?vue&type=template&id=cae19bb2&\"\nimport script from \"./_base-permission-table.vue?vue&type=script&lang=js&\"\nexport * from \"./_base-permission-table.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('PanelBlock',{attrs:{\"title\":\"发起人节点名称\"}},[_c('el-input',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.node.model.title),callback:function ($$v) {_vm.$set(_vm.node.model, \"title\", $$v)},expression:\"node.model.title\"}})],1),_vm._t(\"table\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <PanelBlock title=\"发起人节点名称\">\n      <el-input v-model=\"node.model.title\" size=\"mini\" @change=\"handleChange\"></el-input>\n    </PanelBlock>\n\n    <slot name=\"table\"></slot>\n  </div>\n</template>\n\n<script>\nimport Node from '../flow/helpers/Node'\nimport PanelBlock from './_base-block'\nimport PropTypes from 'vue-types'\nimport FLOW_NODE_TYPE_ENUM from '../flow/constants/FLOW_NODE_TYPE_ENUM'\n// import FLOW_NODE_TYPE_MODEL from '../flow/constants/FLOW_NODE_TYPE_MODEL'\n\nexport default {\n  name: 'SponsorPanel',\n  type: FLOW_NODE_TYPE_ENUM.SPONSOR_NODE,\n  components: {\n    PanelBlock,\n  },\n  props: {\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  methods: {\n    handleChange(val) {\n      this.node.update({\n        title: val,\n      })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sponsor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sponsor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./sponsor.vue?vue&type=template&id=02d2842b&\"\nimport script from \"./sponsor.vue?vue&type=script&lang=js&\"\nexport * from \"./sponsor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('PanelBlock',{attrs:{\"title\":\"审批人节点名称\"}},[_c('el-input',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.node.model.title),callback:function ($$v) {_vm.$set(_vm.node.model, \"title\", $$v)},expression:\"node.model.title\"}})],1),_c('PanelBlock',{attrs:{\"title\":\"审批人设置\"}},[_c('el-select',{staticClass:\"flow-panel-radios\",attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.participant.type),callback:function ($$v) {_vm.$set(_vm.participant, \"type\", $$v)},expression:\"participant.type\"}},_vm._l((_vm.participantTypesOpts),function(option){return _c('el-option',_vm._b({key:option.value},'el-option',option,false))}),1),(_vm.showAddBtn)?_c('div',{staticClass:\"flow-panel-button\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\",\"type\":\"primary\"},on:{\"click\":_vm.handleAddPeople}},[_vm._v(\"添加\"+_vm._s(_vm.participantTypes[_vm.participant.type]))]),(_vm.showClearBtn)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":_vm.handleClearTags}},[_vm._v(\"清空\")]):_vm._e()],1):_vm._e(),(_vm.showSelect)?[(_vm.selectOptions.length)?_c('div',{staticClass:\"flow-panel-button\"},[_c('el-select',{attrs:{\"size\":\"mini\"},model:{value:(_vm.participant.formFieldKey),callback:function ($$v) {_vm.$set(_vm.participant, \"formFieldKey\", $$v)},expression:\"participant.formFieldKey\"}},_vm._l((_vm.selectOptions),function(ref){\nvar label = ref.label;\nvar value = ref.value;\nreturn _c('el-option',{key:value,attrs:{\"label\":label,\"value\":value}})}),1)],1):_c('div',{staticClass:\"flow-panel-button\"},[_vm._v(\"暂无数据\")])]:_vm._e(),(_vm.showPositionLabelSelection)?[_c('el-radio-group',{model:{value:(_vm.participant.scope),callback:function ($$v) {_vm.$set(_vm.participant, \"scope\", $$v)},expression:\"participant.scope\"}},_vm._l((_vm.approveOrderEnum),function(val,key){return _c('el-radio',{key:key,attrs:{\"title\":val,\"label\":key}},[(key === _vm.APPROVE_ORDER_TYPE.PRIORITY)?[_c('span',[_vm._v(_vm._s(val))]),_c('el-tooltip',{attrs:{\"placement\":\"top-end\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('p',[_vm._v(\" 按以下岗位标签拖动排序：若找到排序最高的岗位标签有对应审批人，\"),_c('br'),_vm._v(\" 则提交给该人员审批；若找不到则自动依次往下查找。\"),_c('br')]),_c('br'),_c('p',[_vm._v(\" 如审批岗位标签：第1优先级是【副经理】，第2优先级是【经理】。 \")]),_c('br'),_c('ul',[_c('li',[_vm._v(\"A分公司有副经理，则直接提交给副经理审批。\")]),_c('li',[_vm._v(\"B分公司没有副经理，则提交给经理审批。\")])])]),_c('i',{staticClass:\"el-icon-info\"})])]:[_vm._v(_vm._s(val))]],2)}),1)]:_vm._e(),(_vm.showAddBtn && _vm.participant.list && _vm.participant.list.length)?_c('div',{staticClass:\"participant\"},[_c('Draggable',{attrs:{\"disabled\":!_vm.isDraggable,\"ghost-class\":\"wf-approver-ghost-item\"},model:{value:(_vm.participant.list),callback:function ($$v) {_vm.$set(_vm.participant, \"list\", $$v)},expression:\"participant.list\"}},[_vm._l((_vm.participant.list),function(tag){return [(tag.hasUser === false)?_c('el-popover',{key:tag.key,attrs:{\"popper-class\":\"flow-panel-popover\",\"trigger\":\"hover\",\"visible-arrow\":false,\"content\":(\"该\" + (_vm.participantTypes[_vm.participant.type]) + \"中无用户存在\"),\"placement\":\"top\"}},[_c('span',{staticClass:\"participant-item\",class:_vm.isDraggable ? 'draggable' : '',attrs:{\"slot\":\"reference\"},slot:\"reference\"},[(_vm.isDraggable)?_c('i',{staticClass:\"el-icon-rank\"}):_vm._e(),_c('el-tag',{key:tag.value,attrs:{\"type\":\"danger\",\"size\":\"mini\",\"disable-transitions\":\"\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleDeleteTag(_vm.participant.list, tag)}}},[_c('span',[_vm._v(_vm._s(tag.name)+\" \"+_vm._s(tag.parentFullName || ''))]),_c('i',{staticClass:\"el-icon-warning\"})])],1)]):_c('span',{key:tag.key,staticClass:\"participant-item\",class:_vm.isDraggable ? 'draggable' : ''},[(_vm.isDraggable)?_c('i',{staticClass:\"el-icon-rank\"}):_vm._e(),_c('el-tag',{key:tag.value,attrs:{\"size\":\"mini\",\"disable-transitions\":\"\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleDeleteTag(_vm.participant.list, tag)}}},[_c('span',[_vm._v(_vm._s(tag.name)+\" \"+_vm._s(tag.parentFullName || ''))])])],1)]})],2),(!_vm.showAddBtn && _vm.showClearBtn)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":_vm.handleClearTags}},[_vm._v(\"清空\")]):_vm._e()],1):_vm._e(),(_vm.isOptionalPersonal)?_c('div',[_c('div',{staticClass:\"personal-block\"},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.participant.optionalType),callback:function ($$v) {_vm.$set(_vm.participant, \"optionalType\", $$v)},expression:\"participant.optionalType\"}},_vm._l((_vm.optionalTypes),function(type){return _c('el-option',_vm._b({key:type.value},'el-option',type,false))}),1)],1),_c('div',{staticClass:\"personal-block\"},[_c('p',[_vm._v(\"自选范围\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.handleClearTags},model:{value:(_vm.participant.optionalScope),callback:function ($$v) {_vm.$set(_vm.participant, \"optionalScope\", $$v)},expression:\"participant.optionalScope\"}},_vm._l((_vm.optionalScope),function(scope){return _c('el-option',_vm._b({key:scope.value},'el-option',scope,false))}),1),(_vm.generateBtnName())?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleOptional}},[_vm._v(_vm._s(_vm.generateBtnName()))]):_vm._e(),_c('div',{staticClass:\"participant\"},[_vm._l((_vm.participant.list),function(user,index){return [_c('el-tag',{key:user.value,staticClass:\"participant-item\",attrs:{\"size\":\"mini\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleScopeClose(index)}}},[_vm._v(_vm._s(user.name)+_vm._s(user.parentFullName && (\" \" + (user.parentFullName))))])]})],2)],1)]):_vm._e()],2),(\n      !_vm.isOptionalPersonal ||\n      (_vm.isOptionalPersonal && _vm.participant.optionalType === 'multiple')\n    )?[_c('el-divider'),_c('PanelBlock',{attrs:{\"title\":\"多人审批时采用方式\"}},[_c('div',{staticClass:\"flow-panel-radios\"},[_c('el-radio-group',{model:{value:(_vm.taskRule),callback:function ($$v) {_vm.taskRule=$$v},expression:\"taskRule\"}},_vm._l((_vm.taskRuleTypes),function(val,key){return _c('el-radio',{key:key,attrs:{\"label\":key}},[_vm._v(_vm._s(val))])}),1)],1)])]:_vm._e(),_c('el-divider'),_c('PanelBlock',{attrs:{\"title\":\"自动通过设置\"}},[_c('div',{staticClass:\"flow-panel-radios\"},[_c('el-checkbox',{model:{value:(_vm.initiatorAutoComplete),callback:function ($$v) {_vm.initiatorAutoComplete=$$v},expression:\"initiatorAutoComplete\"}},[_vm._v(\" 审批人 = 发起人时，自动通过 \"),_c('el-tooltip',{attrs:{\"content\":\"取消勾选，则审批人=发起人时，依然需要审批\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-info\"})])],1),_c('el-checkbox',{model:{value:(_vm.participantEmptyRule),callback:function ($$v) {_vm.participantEmptyRule=$$v},expression:\"participantEmptyRule\"}},[_vm._v(\" 审批人为空时，自动通过 \"),_c('el-tooltip',{attrs:{\"content\":\"取消勾选，则审批人为空时，不允许提交\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-info\"})])],1)],1)]),_c('PanelBlock',[_c('h4',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"审批意见\")]),(false)?_c('i',{staticClass:\"el-icon-question\"}):_vm._e()]),_c('div',{staticClass:\"flow-panel-checkbox\"},[_c('el-checkbox',{model:{value:(_vm.opinionSetting.textOpinionEnabled),callback:function ($$v) {_vm.$set(_vm.opinionSetting, \"textOpinionEnabled\", $$v)},expression:\"opinionSetting.textOpinionEnabled\"}},[_vm._v(_vm._s(_vm.opinionSetting.textOpinionName))]),_c('el-collapse-transition',[(_vm.opinionSetting.textOpinionEnabled)?_c('div',{staticClass:\"flow-panel-checkbox-gap\"},[_c('el-checkbox',{model:{value:(_vm.opinionSetting.textOpinionRequired),callback:function ($$v) {_vm.$set(_vm.opinionSetting, \"textOpinionRequired\", $$v)},expression:\"opinionSetting.textOpinionRequired\"}},[_vm._v(\"必填\")])],1):_vm._e()]),_c('p',{staticStyle:{\"color\":\"black\",\"font-size\":\"14px\",\"font-weight\":\"normal\",\"margin\":\"10px 0\"}},[_vm._v(\" 审批意见提示文字 \")]),_c('el-input',{attrs:{\"size\":\"mini\"},model:{value:(_vm.opinionSetting.textOpinionTip),callback:function ($$v) {_vm.$set(_vm.opinionSetting, \"textOpinionTip\", $$v)},expression:\"opinionSetting.textOpinionTip\"}})],1)]),_c('PanelBlock',[_c('h4',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"手写签名\")]),(false)?_c('i',{staticClass:\"el-icon-question\"}):_vm._e()]),_c('div',{staticClass:\"flow-panel-checkbox\"},[_c('el-checkbox',{model:{value:(_vm.opinionSetting.writeSignatureEnabled),callback:function ($$v) {_vm.$set(_vm.opinionSetting, \"writeSignatureEnabled\", $$v)},expression:\"opinionSetting.writeSignatureEnabled\"}},[_vm._v(\"审批时需要签名\")]),_c('el-collapse-transition',[(_vm.opinionSetting.writeSignatureEnabled)?_c('div',{staticClass:\"flow-panel-checkbox-gap\"},[_c('div',[_c('el-checkbox',{model:{value:(_vm.opinionSetting.writeSignatureCanUseLast),callback:function ($$v) {_vm.$set(_vm.opinionSetting, \"writeSignatureCanUseLast\", $$v)},expression:\"opinionSetting.writeSignatureCanUseLast\"}},[_vm._v(\"允许使用上次签名\")])],1)]):_vm._e()])],1)]),_c('el-divider'),_c('PanelBlock',[_c('h4',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',[_vm._v(\"其他操作\")]),(false)?_c('i',{staticClass:\"el-icon-question\"}):_vm._e()]),_c('div',{staticClass:\"flow-panel-checkbox\"},[_c('el-checkbox',{model:{value:(_vm.canTransfer),callback:function ($$v) {_vm.canTransfer=$$v},expression:\"canTransfer\"}},[_vm._v(\"允许转交\")]),_c('br'),_c('el-checkbox',{model:{value:(_vm.canRollback),callback:function ($$v) {_vm.canRollback=$$v},expression:\"canRollback\"}},[_vm._v(\"允许回退\")]),_c('el-collapse-transition',[(_vm.canRollback)?_c('div',{staticClass:\"flow-panel-checkbox-gap\"},[_c('el-checkbox',{model:{value:(_vm.isDirectRollback),callback:function ($$v) {_vm.isDirectRollback=$$v},expression:\"isDirectRollback\"}},[_vm._v(\" 重新提交时，直接给回退节点 \"),_c('el-tooltip',{attrs:{\"content\":\"被回退人重新修改后，直接提交给回退节点审批\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-question\"})])],1)],1):_vm._e()])],1)]),_c('SubmitPicker',_vm._b({attrs:{\"show\":_vm.pickerVisible,\"type\":_vm.pickerType,\"participant-type\":_vm.participant.type,\"default-selected\":_vm.computedParticipantsList},on:{\"update:show\":function($event){_vm.pickerVisible=$event},\"confirm\":_vm.handleConfirmPicker}},'SubmitPicker',_vm.$attrs,false)),_c('PositionPicker',{attrs:{\"show\":_vm.stationVisible,\"role-list\":_vm.computedParticipantsList,\"list-key-name\":\"parentFullName\",\"title\":\"选择岗位标签\",\"multiple\":\"\"},on:{\"update:show\":function($event){_vm.stationVisible=$event},\"addCallBack\":_vm.handleCallBack}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('SubmitterPicker',_vm._g(_vm._b({attrs:{\"multiple\":\"\",\"title\":_vm.computedTitle,\"modal\":false,\"append-to-body\":true,\"modal-append-to-body\":false,\"select-lock\":_vm.type},on:{\"onConfirm\":_vm.handlePickerConfirm}},'SubmitterPicker',_vm.$attrs,false),_vm.$listeners))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <SubmitterPicker\n    v-bind=\"$attrs\"\n    multiple\n    :title=\"computedTitle\"\n    :modal=\"false\"\n    :append-to-body=\"true\"\n    :modal-append-to-body=\"false\"\n    :select-lock=\"type\"\n    v-on=\"$listeners\"\n    @onConfirm=\"handlePickerConfirm\"\n  ></SubmitterPicker>\n</template>\n\n<script>\n  import VueMfe from 'vue-mfe'\n  import PropTypes from 'vue-types'\n  import {\n    PARTICIPANT_PICKER_KEYS,\n    PARTICIPANT_TYPES,\n    PARTICIPANT_TYPES_NAME,\n    SUBMIT_PICKER_TYPES,\n    TRANSFER_TYPE\n  } from '../../constants/ENUM_DEFINITIONS'\n\n  export default {\n    name: 'BaseSubmitPicker',\n    components: {\n      SubmitterPicker: () => VueMfe.Lazy('auth2.components.SubmitterPicker')\n    },\n    inheritAttrs: false,\n    props: {\n      participantType: PropTypes.oneOf(\n        Object.values(PARTICIPANT_TYPES).concat(TRANSFER_TYPE)\n      ),\n      type: PropTypes.oneOf(Object.values(SUBMIT_PICKER_TYPES)).def(\n        SUBMIT_PICKER_TYPES.ROLE\n      )\n    },\n    computed: {\n      computedTitle() {\n        return (\n          '选择' +\n          (PARTICIPANT_TYPES_NAME[this.participantType] || '转交候选人')\n        )\n      }\n    },\n    methods: {\n      handlePickerConfirm(values) {\n        const participantType = this.participantType\n        const valuesList = values.map(({ nodeName, sysNo }) => {\n          const { name, value, type } =\n            participantType === PARTICIPANT_TYPES.OPTIONAL_PERSONNEL\n              ? {}\n              : PARTICIPANT_PICKER_KEYS[participantType]\n          switch (participantType) {\n            case TRANSFER_TYPE:\n              return {\n                name: nodeName,\n                value: sysNo,\n                hasUser: true,\n                model: {\n                  [name]: nodeName,\n                  [value]: sysNo,\n                  unitType: type\n                }\n              }\n\n            case PARTICIPANT_TYPES.POSITION:\n              return {\n                name: nodeName,\n                value: sysNo,\n                hasUser: undefined,\n                model: {\n                  [name]: nodeName,\n                  [value]: sysNo,\n                  unitType: type\n                }\n              }\n\n            case PARTICIPANT_TYPES.ASSIGN:\n              return {\n                name: nodeName,\n                value: sysNo,\n                hasUser: undefined,\n                model: {\n                  [name]: nodeName,\n                  [value]: sysNo,\n                  unitType: type\n                }\n              }\n\n            case PARTICIPANT_TYPES.DEPARTMENT:\n              return {\n                name: nodeName,\n                value: sysNo,\n                hasUser: undefined,\n                model: {\n                  departmentName: nodeName,\n                  departmentSysNo: sysNo,\n                  unitType: this.type\n                }\n              }\n\n            default:\n              return {\n                name: nodeName,\n                sysNo: sysNo,\n                model: {\n                  name: nodeName,\n                  sysNo: nodeName,\n                  unitType: this.type\n                }\n              }\n          }\n        })\n\n        this.$emit('update:show', false)\n        this.$emit('confirm', valuesList)\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-submit-picker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-submit-picker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_base-submit-picker.vue?vue&type=template&id=8e158f72&\"\nimport script from \"./_base-submit-picker.vue?vue&type=script&lang=js&\"\nexport * from \"./_base-submit-picker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const ROLLBACK_ENUM = {\n  SEQUENCE: 'sequence', //按照顺序重新提交\n  BACK_TRACKED: 'backtracked' //提交给退回节点\n}","// @ts-ignore\nimport Http from 'axios'\nimport { PARTICIPANT_TYPES } from '../constants/ENUM_DEFINITIONS'\n\nconst FETCH_FLOW_MODEL_URL = '/api/wf/flow/flowModel/'\nconst CHECK_USER_EXIST_URL = '/api/wf/participant/existsUser'\nconst FETCH_FLOW_MODEL_BY_DEPLOYMENT_URL = '/api/wf/flow/flowModelByDeployment/'\n\n/**\n * fetchFlowModel\n * @param {string} flowCode\n * @returns { applyScopeName: string, flowModel: {}, formModel: {}}\n */\nexport const fetchFlowModel = (flowCode) => {\n  return Http.get(FETCH_FLOW_MODEL_URL + flowCode)\n}\n\n/**\n * fetchFlowModelByDeployment\n * @param {string} deploymentId\n * @returns { applyScopeName: string, flowModel: {}, formModel: {}}\n */\nexport const fetchFlowModelByDeployment = (deploymentId) => {\n  return Http.get(FETCH_FLOW_MODEL_BY_DEPLOYMENT_URL + deploymentId)\n}\n\n/**\n * checkUserExistsOrNot\n * @param {{ participantType: string, sysNoList: number[] }} data\n * @returns {Promise<{ participantType: string, sysNo: number, existsUser: boolean }[]>}\n */\nexport const checkUserExistsOrNot = (data) => {\n  return Http.post(CHECK_USER_EXIST_URL, data)\n}\n\nexport const checkDoesUserExist = (participant) => {\n  const { list, type } = participant\n\n  if (\n    (type === PARTICIPANT_TYPES.POSITION ||\n      type === PARTICIPANT_TYPES.DEPARTMENT) &&\n    list &&\n    list.length &&\n    !list.every((item) => item.hasUser !== undefined && item.hasUser)\n  ) {\n    return checkUserExistsOrNot({\n      participantType: type,\n      sysNoList: list.map((item) => item.value)\n    }).then((users = []) => {\n      const userExistStatus = users.reduce((status, { sysNo, existsUser }) => {\n        status[sysNo] = existsUser\n        return status\n      }, {})\n\n      list.forEach((item) => {\n        item.hasUser = userExistStatus[item.value]\n      })\n    })\n  }\n}\n","/**\n * objectToOptions\n * @param {Object<string, string>} object\n */\nexport const objectToOptions = (object) => {\n  return Object.entries(object).reduce((options, [key, value]) => {\n    return options.concat({ label: value, value: isNaN(+key) ? key : +key })\n  }, [])\n}\n","/**\n * all\n */\nconst ALL = 'all'\n\n/**\n * priority\n */\nconst PRIORITY = 'priority'\n\n/**\n * 审批优先级枚举\n * @enum\n */\nexport const APPROVE_ORDER_TYPE = {\n  /**\n   * 全部审批\n   */\n  ALL,\n\n  /**\n   * 按优先级审批\n   */\n  PRIORITY\n}\n\n/**\n * 审批优先级枚举文字\n * @enum\n */\nexport const APPROVE_ORDER_ENUM = {\n  /**\n   * All\n   */\n  [ALL]: '全部审批',\n\n  /**\n   * Priority\n   */\n  [PRIORITY]: '按优先级审批'\n}\n","<template>\n  <div>\n    <PanelBlock title=\"审批人节点名称\">\n      <el-input\n        v-model=\"node.model.title\"\n        size=\"mini\"\n        @change=\"handleChange\"\n      ></el-input>\n    </PanelBlock>\n\n    <PanelBlock title=\"审批人设置\">\n      <el-select\n        v-model=\"participant.type\"\n        placeholder=\"请选择\"\n        class=\"flow-panel-radios\"\n      >\n        <el-option\n          v-for=\"option in participantTypesOpts\"\n          :key=\"option.value\"\n          v-bind=\"option\"\n        ></el-option>\n      </el-select>\n\n      <div v-if=\"showAddBtn\" class=\"flow-panel-button\">\n        <el-button\n          size=\"mini\"\n          icon=\"el-icon-plus\"\n          type=\"primary\"\n          @click=\"handleAddPeople\"\n          >添加{{ participantTypes[participant.type] }}</el-button\n        >\n\n        <el-button\n          v-if=\"showClearBtn\"\n          size=\"mini\"\n          type=\"text\"\n          @click=\"handleClearTags\"\n          >清空</el-button\n        >\n      </div>\n\n      <template v-if=\"showSelect\">\n        <div v-if=\"selectOptions.length\" class=\"flow-panel-button\">\n          <el-select v-model=\"participant.formFieldKey\" size=\"mini\">\n            <el-option\n              v-for=\"{ label, value } in selectOptions\"\n              :key=\"value\"\n              :label=\"label\"\n              :value=\"value\"\n            ></el-option>\n          </el-select>\n        </div>\n        <div v-else class=\"flow-panel-button\">暂无数据</div>\n      </template>\n\n      <template v-if=\"showPositionLabelSelection\">\n        <el-radio-group v-model=\"participant.scope\">\n          <el-radio\n            v-for=\"(val, key) in approveOrderEnum\"\n            :key=\"key\"\n            :title=\"val\"\n            :label=\"key\"\n          >\n            <template v-if=\"key === APPROVE_ORDER_TYPE.PRIORITY\">\n              <span>{{ val }}</span>\n              <el-tooltip placement=\"top-end\">\n                <div slot=\"content\">\n                  <p>\n                    按以下岗位标签拖动排序：若找到排序最高的岗位标签有对应审批人，<br />\n                    则提交给该人员审批；若找不到则自动依次往下查找。<br />\n                  </p>\n                  <br />\n                  <p>\n                    如审批岗位标签：第1优先级是【副经理】，第2优先级是【经理】。\n                  </p>\n                  <br />\n                  <ul>\n                    <li>A分公司有副经理，则直接提交给副经理审批。</li>\n                    <li>B分公司没有副经理，则提交给经理审批。</li>\n                  </ul>\n                </div>\n                <i class=\"el-icon-info\"></i>\n              </el-tooltip>\n            </template>\n\n            <template v-else>{{ val }}</template>\n          </el-radio>\n        </el-radio-group>\n      </template>\n\n      <div\n        v-if=\"showAddBtn && participant.list && participant.list.length\"\n        class=\"participant\"\n      >\n        <Draggable\n          v-model=\"participant.list\"\n          :disabled=\"!isDraggable\"\n          ghost-class=\"wf-approver-ghost-item\"\n        >\n          <template v-for=\"tag in participant.list\">\n            <el-popover\n              v-if=\"tag.hasUser === false\"\n              :key=\"tag.key\"\n              popper-class=\"flow-panel-popover\"\n              trigger=\"hover\"\n              :visible-arrow=\"false\"\n              :content=\"`该${participantTypes[participant.type]}中无用户存在`\"\n              placement=\"top\"\n            >\n              <span\n                slot=\"reference\"\n                class=\"participant-item\"\n                :class=\"isDraggable ? 'draggable' : ''\"\n              >\n                <i v-if=\"isDraggable\" class=\"el-icon-rank\"></i>\n                <el-tag\n                  :key=\"tag.value\"\n                  type=\"danger\"\n                  size=\"mini\"\n                  disable-transitions\n                  closable\n                  @close=\"handleDeleteTag(participant.list, tag)\"\n                >\n                  <span>{{ tag.name }} {{ tag.parentFullName || '' }}</span>\n                  <i class=\"el-icon-warning\"></i>\n                </el-tag>\n              </span>\n            </el-popover>\n\n            <span\n              v-else\n              :key=\"tag.key\"\n              class=\"participant-item\"\n              :class=\"isDraggable ? 'draggable' : ''\"\n            >\n              <i v-if=\"isDraggable\" class=\"el-icon-rank\"></i>\n              <el-tag\n                :key=\"tag.value\"\n                size=\"mini\"\n                disable-transitions\n                closable\n                @close=\"handleDeleteTag(participant.list, tag)\"\n              >\n                <span>{{ tag.name }} {{ tag.parentFullName || '' }}</span>\n              </el-tag>\n            </span>\n          </template>\n        </Draggable>\n\n        <el-button\n          v-if=\"!showAddBtn && showClearBtn\"\n          size=\"mini\"\n          type=\"text\"\n          @click=\"handleClearTags\"\n          >清空</el-button\n        >\n      </div>\n\n      <div v-if=\"isOptionalPersonal\">\n        <div class=\"personal-block\">\n          <el-select v-model=\"participant.optionalType\" placeholder=\"请选择\">\n            <el-option\n              v-for=\"type in optionalTypes\"\n              :key=\"type.value\"\n              v-bind=\"type\"\n            ></el-option>\n          </el-select>\n        </div>\n        <div class=\"personal-block\">\n          <p>自选范围</p>\n          <el-select\n            v-model=\"participant.optionalScope\"\n            placeholder=\"请选择\"\n            @change=\"handleClearTags\"\n          >\n            <el-option\n              v-for=\"scope in optionalScope\"\n              :key=\"scope.value\"\n              v-bind=\"scope\"\n            ></el-option>\n          </el-select>\n          <el-button\n            v-if=\"generateBtnName()\"\n            type=\"primary\"\n            @click=\"handleOptional\"\n            >{{ generateBtnName() }}</el-button\n          >\n\n          <div class=\"participant\">\n            <template v-for=\"(user, index) in participant.list\">\n              <el-tag\n                :key=\"user.value\"\n                class=\"participant-item\"\n                size=\"mini\"\n                closable\n                @close=\"handleScopeClose(index)\"\n                >{{ user.name\n                }}{{ user.parentFullName && ` ${user.parentFullName}` }}</el-tag\n              >\n            </template>\n          </div>\n        </div>\n      </div>\n    </PanelBlock>\n\n    <template\n      v-if=\"\n        !isOptionalPersonal ||\n        (isOptionalPersonal && participant.optionalType === 'multiple')\n      \"\n    >\n      <el-divider></el-divider>\n\n      <PanelBlock title=\"多人审批时采用方式\">\n        <div class=\"flow-panel-radios\">\n          <el-radio-group v-model=\"taskRule\">\n            <el-radio\n              v-for=\"(val, key) in taskRuleTypes\"\n              :key=\"key\"\n              :label=\"key\"\n              >{{ val }}</el-radio\n            >\n          </el-radio-group>\n        </div>\n      </PanelBlock>\n    </template>\n\n    <el-divider></el-divider>\n\n    <PanelBlock title=\"自动通过设置\">\n      <div class=\"flow-panel-radios\">\n        <el-checkbox v-model=\"initiatorAutoComplete\">\n          审批人 = 发起人时，自动通过\n          <el-tooltip\n            content=\"取消勾选，则审批人=发起人时，依然需要审批\"\n            placement=\"top\"\n          >\n            <i class=\"el-icon-info\"></i>\n          </el-tooltip>\n        </el-checkbox>\n        <el-checkbox v-model=\"participantEmptyRule\">\n          审批人为空时，自动通过\n          <el-tooltip\n            content=\"取消勾选，则审批人为空时，不允许提交\"\n            placement=\"top\"\n          >\n            <i class=\"el-icon-info\"></i>\n          </el-tooltip>\n        </el-checkbox>\n      </div>\n    </PanelBlock>\n\n    <PanelBlock>\n      <h4 slot=\"title\">\n        <span>审批意见</span>\n        <i v-if=\"false\" class=\"el-icon-question\"></i>\n      </h4>\n\n      <div class=\"flow-panel-checkbox\">\n        <el-checkbox v-model=\"opinionSetting.textOpinionEnabled\">{{\n          opinionSetting.textOpinionName\n        }}</el-checkbox>\n        <el-collapse-transition>\n          <div\n            v-if=\"opinionSetting.textOpinionEnabled\"\n            class=\"flow-panel-checkbox-gap\"\n          >\n            <el-checkbox v-model=\"opinionSetting.textOpinionRequired\"\n              >必填</el-checkbox\n            >\n          </div>\n        </el-collapse-transition>\n        <p\n          style=\"\n            color: black;\n            font-size: 14px;\n            font-weight: normal;\n            margin: 10px 0;\n          \"\n        >\n          审批意见提示文字\n        </p>\n        <el-input\n          v-model=\"opinionSetting.textOpinionTip\"\n          size=\"mini\"\n        ></el-input>\n      </div>\n    </PanelBlock>\n\n    <PanelBlock>\n      <h4 slot=\"title\">\n        <span>手写签名</span>\n        <i v-if=\"false\" class=\"el-icon-question\"></i>\n      </h4>\n      <div class=\"flow-panel-checkbox\">\n        <el-checkbox v-model=\"opinionSetting.writeSignatureEnabled\"\n          >审批时需要签名</el-checkbox\n        >\n        <el-collapse-transition>\n          <div\n            v-if=\"opinionSetting.writeSignatureEnabled\"\n            class=\"flow-panel-checkbox-gap\"\n          >\n            <!-- <div>\n              <el-checkbox v-model=\"opinionSetting.writeSignatureRequired\">必填</el-checkbox>\n            </div>-->\n            <div>\n              <el-checkbox v-model=\"opinionSetting.writeSignatureCanUseLast\"\n                >允许使用上次签名</el-checkbox\n              >\n            </div>\n          </div>\n        </el-collapse-transition>\n      </div>\n    </PanelBlock>\n\n    <el-divider></el-divider>\n\n    <PanelBlock>\n      <h4 slot=\"title\">\n        <span>其他操作</span>\n        <i v-if=\"false\" class=\"el-icon-question\"></i>\n      </h4>\n\n      <div class=\"flow-panel-checkbox\">\n        <el-checkbox v-model=\"canTransfer\">允许转交</el-checkbox>\n        <br />\n        <el-checkbox v-model=\"canRollback\">允许回退</el-checkbox>\n        <el-collapse-transition>\n          <div v-if=\"canRollback\" class=\"flow-panel-checkbox-gap\">\n            <el-checkbox v-model=\"isDirectRollback\">\n              重新提交时，直接给回退节点\n              <el-tooltip\n                content=\"被回退人重新修改后，直接提交给回退节点审批\"\n                placement=\"top\"\n              >\n                <i class=\"el-icon-question\"></i>\n              </el-tooltip>\n            </el-checkbox>\n          </div>\n        </el-collapse-transition>\n      </div>\n    </PanelBlock>\n\n    <SubmitPicker\n      v-bind=\"$attrs\"\n      :show.sync=\"pickerVisible\"\n      :type=\"pickerType\"\n      :participant-type=\"participant.type\"\n      :default-selected=\"computedParticipantsList\"\n      @confirm=\"handleConfirmPicker\"\n    ></SubmitPicker>\n\n    <PositionPicker\n      :show.sync=\"stationVisible\"\n      :role-list=\"computedParticipantsList\"\n      list-key-name=\"parentFullName\"\n      title=\"选择岗位标签\"\n      multiple\n      @addCallBack=\"handleCallBack\"\n    ></PositionPicker>\n  </div>\n</template>\n\n<script>\n  import PropTypes from 'vue-types'\n  import VueMfe from 'vue-mfe'\n  import Node from '../flow/helpers/Node'\n  import PanelBlock from './_base-block'\n  import SubmitPicker from './_base-submit-picker'\n  import FLOW_NODE_TYPE_ENUM from '../flow/constants/FLOW_NODE_TYPE_ENUM'\n  import FLOW_NODE_TYPE_PROPS from '../flow/constants/FLOW_NODE_TYPE_PROPS'\n  import {\n    OPTIONAL_TYPE_ENUM,\n    OPTIONAL_SCOPE_ENUM,\n    OPTIONAL_SCOPE_KEYS\n  } from './../../constants/OPTIONAL_PERSONAL'\n  import { ROLLBACK_ENUM } from './../../constants/ROLLBACK_ENUM'\n  import { checkDoesUserExist } from '../../service'\n  import { deepCopy } from '../../utils/index'\n  import {\n    AUDIT_TYPES_NAME,\n    FORM_FIELDS_KEYS,\n    FORM_FIELDS_TYPES,\n    NO_AUDIT_TYPES,\n    // NO_AUDIT_TYPES_NAME,\n    PARTICIPANT_PICKER_TYPES,\n    PARTICIPANT_TYPES,\n    PARTICIPANT_TYPES_NAME,\n    PEOPLE_TYPES_KEY_MAP,\n    SUBMIT_PICKER_TYPES\n  } from '../../constants/ENUM_DEFINITIONS'\n  import { objectToOptions } from '../../utils/objectToOptions'\n  import draggable from 'vuedraggable'\n  import {\n    APPROVE_ORDER_TYPE,\n    APPROVE_ORDER_ENUM\n  } from '../../constants/POSITION_LABEL_SELECTION'\n  // import FLOW_NODE_TYPE_MODEL from '../flow/constants/FLOW_NODE_TYPE_MODEL'\n\n  /* const defaultTrasnfer = {\n  type: TRANSFER_TYPE,\n  list: [],\n} */\n\n  const fileds2options = (arr) =>\n    arr.map(({ fieldKey, fieldName }) => ({\n      value: fieldKey,\n      label: fieldName\n    }))\n\n  export default {\n    name: 'ApproverPanel',\n    type: FLOW_NODE_TYPE_ENUM.APPROVER_NODE,\n    components: {\n      Draggable: draggable,\n      PanelBlock,\n      SubmitPicker,\n      PositionPicker: () => VueMfe.Lazy('auth2.components.PositionPicker')\n    },\n    props: {\n      // eslint-disable-next-line\n      node: PropTypes.instanceOf(Node).required,\n      // eslint-disable-next-line\n      fields: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string.def(''),\n          fieldKey: PropTypes.string.isRequired,\n          fieldName: PropTypes.string.isRequired,\n          canView: PropTypes.bool.isRequired,\n          canWrite: PropTypes.bool.isRequired,\n          require: PropTypes.bool.isRequired,\n          editable: PropTypes.bool.isRequired,\n          textVisible: PropTypes.bool.isRequired,\n          useCondition: PropTypes.bool.isRequired\n        })\n      )\n    },\n    data() {\n      /**\n       * http://shzhangji.com/blog/2018/04/17/form-handling-in-vuex-strict-mode/\n       * 在反显的状态下数据来自 Vuex 不能直接更新，所以干脆就 deepCopy 一份数据\n       */\n      const participant = this.getValue('participant')\n      const canRollback = this.getValue('canRollback')\n\n      return {\n        optionalTypes: OPTIONAL_TYPE_ENUM,\n        optionalScope: OPTIONAL_SCOPE_ENUM,\n        /* 参与人类型 */\n        participantTypesOpts: objectToOptions(PARTICIPANT_TYPES_NAME),\n        participantTypes: PARTICIPANT_TYPES_NAME,\n        /* 多人审批类型 */\n        taskRuleTypes: AUDIT_TYPES_NAME,\n        /* 审批人为空的类型 */\n        // participantEmptyTypes: NO_AUDIT_TYPES_NAME,\n\n        /* 审批优先级枚举 */\n        approveOrderEnum: APPROVE_ORDER_ENUM,\n\n        /* node props model */\n        participant: {\n          ...participant,\n          scope: participant.scope || APPROVE_ORDER_TYPE.ALL\n        },\n        stationVisible: false,\n        opinionSetting: this.getValue('opinionSetting'),\n        taskRule: this.getValue('taskRule'),\n        canTransfer: this.getValue('canTransfer'),\n        // transfer: this.getValue('transfer'),\n        canRollback:\n          canRollback === null || canRollback === undefined\n            ? true\n            : canRollback,\n        participantEmptyRule:\n          this.getValue('participantEmptyRule') ===\n            NO_AUDIT_TYPES.AUTO_COMPLETE || false,\n        initiatorAutoComplete: this.getValue('initiatorAutoComplete') || false,\n        rollbackSubmitType: this.getValue('rollbackSubmitType'),\n        /* is tansfer flag */\n        // isTransfer: false,\n        /* submit picker reactive data */\n        pickerType: null, // SUBMIT_PICKER_TYPES[participant.type],\n        isDirectRollback: false\n      }\n    },\n    computed: {\n      computedTrasfersList() {\n        const list = (this.transfer || {}).list\n\n        return (list && list.length ? list : []).map(({ model = {} }) => model)\n      },\n      computedParticipantsList() {\n        const list = this.participant.list\n        const isPosition =\n          this.participant.type === PARTICIPANT_TYPES.POSITION_LABEL ||\n          (this.isOptionalPersonal &&\n            this.participant.optionalScope ===\n              OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL)\n        return (list && list.length ? list : []).map((i) => ({\n          ...i,\n          [isPosition ? 'positionName' : 'nodeName']: i.name,\n          parentFullName: i.parentFullName,\n          sysNo: i.value,\n          key: isPosition\n            ? i.value\n            : `${i.value}-${PEOPLE_TYPES_KEY_MAP[this.pickerType]}`\n        }))\n      },\n      formRoleFields() {\n        return this.fields.filter(({ type }) => type === FORM_FIELDS_KEYS.JOB)\n      },\n      formDepartmentFields() {\n        return this.fields.filter(\n          ({ type }) => type === FORM_FIELDS_KEYS.DEPARTMENT\n        )\n      },\n      selectOptions() {\n        return this.getSelectOptions()\n      },\n      showAddBtn() {\n        return !this.showSelect && !this.isSelf && !this.isOptionalPersonal\n      },\n      showClearBtn() {\n        return this.participant.list && this.participant.list.length\n      },\n      showSelect() {\n        return Boolean(FORM_FIELDS_TYPES[this.participant.type])\n      },\n      showPositionLabelSelection() {\n        return this.participant.type === PARTICIPANT_TYPES.POSITION_LABEL\n      },\n      isSelf() {\n        return this.participant.type === PARTICIPANT_TYPES.INITIATOR\n      },\n      isDraggable() {\n        return (\n          this.participant.scope &&\n          this.participant.scope === APPROVE_ORDER_TYPE.PRIORITY\n        )\n      },\n      isAssignType() {\n        return [\n          OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION,\n          OPTIONAL_SCOPE_KEYS.ASSIGN_USER,\n          OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL\n        ].includes(this.participant.optionalScope)\n      },\n      pickerVisible: {\n        get() {\n          return !!this.pickerType\n        },\n        set(val) {\n          if (!val) {\n            /* if (this.isTransfer) {\n            this.isTransfer = false\n          } */\n\n            if (this.pickerType) {\n              this.pickerType = null\n            }\n\n            return false\n          }\n        }\n      },\n      isOptionalPersonal() {\n        return this.participant.type === PARTICIPANT_TYPES.OPTIONAL_PERSONNEL\n      }\n    },\n    watch: {\n      'participant.type'() {\n        this.participant.list = []\n\n        if (this.participant.formFieldKey) {\n          this.participant.formFieldKey = null\n        }\n\n        this.node.read('')\n        if (this.isOptionalPersonal) {\n          if (!Reflect.has(this.participant, 'optionalType')) {\n            this.$set(this.participant, 'optionalType', 'single')\n          }\n          if (!Reflect.has(this.participant, 'optionalScope')) {\n            this.$set(\n              this.participant,\n              'optionalScope',\n              OPTIONAL_SCOPE_KEYS.TENANT_ORGANIZATION\n            )\n          }\n        }\n      },\n      'participant.formFieldKey'(val) {\n        if (val) {\n          this.node.read(\n            PARTICIPANT_TYPES_NAME[this.participant.type] +\n              '：' +\n              (this.fields.find((field) => field.fieldKey === val) || {})\n                .fieldName || ''\n          )\n        } else {\n          this.node.read('')\n        }\n      },\n      'participant.list'(val) {\n        if (this.isSelf) {\n          this.node.read(this.participantTypes[this.participant.type])\n        } else if (this.showSelect) {\n          const text =\n            (\n              (this.selectOptions || []).find(\n                ({ value }) => value === this.participant.formFieldKey\n              ) || {}\n            ).label || ''\n\n          this.node && this.node.read(text)\n        } else {\n          if (this.isOptionalPersonal && !this.isAssignType) {\n            const scope =\n              OPTIONAL_SCOPE_ENUM.find(\n                (i) => i.value === this.participant.optionalScope\n              ) || {}\n            if (scope.label) {\n              this.node.read(\n                `${this.participantTypes[this.participant.type]}(${\n                  scope.label\n                })`\n              )\n            }\n          } else {\n            val.length ? this.node.read({ list: val }) : this.node.read('')\n          }\n        }\n      },\n      participant: {\n        deep: true,\n        handler() {\n          if (this.node.read() && this.node.model.errorState) {\n            this.node.model.errorState = false\n          }\n\n          this.handleUpdateProps('participant')\n        }\n      },\n      opinionSetting: {\n        deep: true,\n        handler(val) {\n          if (!val.writeSignatureEnabled) {\n            if (val.writeSignatureRequired) {\n              val.writeSignatureRequired = false\n            }\n\n            if (val.writeSignatureCanUseLast) {\n              val.writeSignatureCanUseLast = false\n            }\n          } else {\n            // feat: (#1006031)【审批流】【流程设计】【节点设置】【手写签名】手写签名一旦勾选，一定为必填\n            if (!val.writeSignatureRequired) {\n              val.writeSignatureRequired = true\n            }\n          }\n\n          if (!val.textOpinionEnabled && val.textOpinionRequired) {\n            val.textOpinionRequired = false\n          }\n\n          this.handleUpdateProps('opinionSetting')\n        }\n      },\n      taskRule() {\n        this.handleUpdateProps('taskRule')\n      },\n      canTransfer() {\n        this.handleUpdateProps('canTransfer')\n      },\n      /* transfer: {\n      deep: true,\n      handler() {\n        this.handleUpdateProps('transfer')\n      },\n    }, */\n      canRollback() {\n        if (!this.canRollback) {\n          this.isDirectRollback = false\n        }\n        this.handleUpdateProps('canRollback')\n      },\n      participantEmptyRule(value) {\n        this.node &&\n          this.node.updateProps({\n            participantEmptyRule: value\n              ? NO_AUDIT_TYPES.AUTO_COMPLETE\n              : NO_AUDIT_TYPES.CANNOT_SUBMIT\n          })\n      },\n      initiatorAutoComplete() {\n        this.handleUpdateProps('initiatorAutoComplete')\n      },\n      isDirectRollback: {\n        immediate: true,\n        handler(val) {\n          if (this.node) {\n            this.node.updateProps({\n              rollbackSubmitType: !val\n                ? ROLLBACK_ENUM.SEQUENCE\n                : ROLLBACK_ENUM.BACK_TRACKED\n            })\n          }\n        }\n      },\n      rollbackSubmitType: {\n        immediate: true,\n        handler(val) {\n          this.isDirectRollback = val !== ROLLBACK_ENUM.SEQUENCE\n        }\n      }\n      /* isTransfer(val) {\n      if (val) {\n        this.pickerType = PARTICIPANT_PICKER_TYPES[TRANSFER_TYPE]\n      } else {\n        this.pickerType = null\n      }\n    }, */\n    },\n    created() {\n      if (this.isOptionalPersonal) {\n        if (\n          this.participant.optionalScope === OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION\n        ) {\n          checkDoesUserExist({\n            list: this.participant.list,\n            type: PARTICIPANT_TYPES.POSITION\n          })\n        }\n      } else {\n        checkDoesUserExist(this.participant)\n      }\n\n      this.APPROVE_ORDER_TYPE = APPROVE_ORDER_TYPE\n    },\n    methods: {\n      generateBtnName() {\n        if (\n          [\n            OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL,\n            OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION,\n            OPTIONAL_SCOPE_KEYS.ASSIGN_USER\n          ].includes(this.participant.optionalScope)\n        ) {\n          const scope = (\n            this.optionalScope.find(\n              (i) => i.value === this.participant.optionalScope\n            ) || {}\n          ).label\n          if (scope) {\n            return `选择${scope.substring(2)}`\n          }\n        }\n      },\n      handleOptional() {\n        if (\n          this.participant.optionalScope ===\n          OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION_LABEL\n        ) {\n          this.stationVisible = true\n        } else {\n          this.pickerType =\n            this.participant.optionalScope ===\n            OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION\n              ? SUBMIT_PICKER_TYPES.ROLE\n              : SUBMIT_PICKER_TYPES.USER\n        }\n      },\n      handleScopeClose(index) {\n        this.participant.list.splice(index, 1)\n      },\n      /**\n       * @description 如果 node 节点的 props 中已存在该值，则取它的值，否则取 defaultSettings 的默认值\n       * @param {string} key key name\n       * @returns {any*}\n       */\n      getValue(key) {\n        if (this.node && this.node.props) {\n          const propValue = this.node.props[key]\n          const isObject = typeof this.node.props[key] === 'object'\n\n          return isObject\n            ? deepCopy({\n                // fixed: 并行分支子节点选择后未更新VIEW(#1017053)\n                ...FLOW_NODE_TYPE_PROPS[this.node.type][key],\n                ...this.node.props[key]\n              })\n            : propValue\n        }\n      },\n      getSelectOptions() {\n        if (this.showSelect) {\n          const type = this.participant.type\n\n          if (\n            type === PARTICIPANT_TYPES.POSITION_OF_FORM ||\n            type === PARTICIPANT_TYPES.ORGANIZATION_POSITION_OF_FORM\n          ) {\n            return fileds2options(this.formRoleFields) || []\n          } else if (\n            type === PARTICIPANT_TYPES.DEPARTMENT_OF_FORM ||\n            type === PARTICIPANT_TYPES.DEPARTMENT_POSITION_OF_FORM\n          ) {\n            return fileds2options(this.formDepartmentFields) || []\n          }\n        }\n\n        return []\n      },\n      /* update node model */\n      handleChange(val) {\n        this.node &&\n          this.node.update({\n            title: val\n          })\n      },\n      /* update node props */\n      handleUpdateProps(key) {\n        this.node &&\n          this.node.updateProps({\n            [key]: this[key]\n          })\n      },\n      handleAddPeople() {\n        if (this.participant.type === PARTICIPANT_TYPES.POSITION_LABEL) {\n          this.stationVisible = true\n        } else {\n          this.pickerType =\n            PARTICIPANT_PICKER_TYPES[this.participant.type] || null\n        }\n      },\n      handleConfirmPicker(values) {\n        if (this.isOptionalPersonal) {\n          this.participant.list = values.map((i) => {\n            if (\n              this.participant.optionalScope === OPTIONAL_SCOPE_KEYS.ASSIGN_USER\n            ) {\n              return {\n                name: i.name,\n                value: i.sysNo,\n                hasUser: true,\n                model: {\n                  userName: i.name,\n                  userSysNo: i.sysNo,\n                  unitType: PARTICIPANT_TYPES.OPTIONAL_PERSONNEL\n                }\n              }\n            }\n            if (\n              this.participant.optionalScope ===\n              OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION\n            ) {\n              return {\n                name: i.name,\n                value: i.sysNo,\n                hasUser: undefined,\n                model: {\n                  positionName: i.name,\n                  positionSysNo: i.sysNo,\n                  unitType: PARTICIPANT_TYPES.OPTIONAL_PERSONNEL\n                }\n              }\n            }\n          })\n          if (\n            this.participant.optionalScope ===\n            OPTIONAL_SCOPE_KEYS.ASSIGN_POSITION\n          ) {\n            checkDoesUserExist({\n              list: this.participant.list,\n              type: PARTICIPANT_TYPES.POSITION\n            })\n          }\n        } else {\n          this.participant.list = values\n          checkDoesUserExist(this.participant)\n        }\n      },\n      handleCallBack(values) {\n        this.participant.list = values.map((i) => ({\n          ...i,\n          name: i.positionName,\n          parentFullName: i.parentFullName,\n          organizationType: i.organizationType,\n          value: i.sysNo,\n          hasUser: undefined,\n          model: {\n            positionLabelSysNo: i.sysNo,\n            positionLabelName: i.positionName,\n            parentFullName: i.parentFullName,\n            organizationType: i.organizationType,\n            unitType: PARTICIPANT_TYPES.POSITION_LABEL\n          }\n        }))\n      },\n      handleDeleteTag(list, tag) {\n        list.splice(list.indexOf(tag), 1)\n      },\n      handleClearTags() {\n        this.participant.list = []\n      }\n      /* handleAddTransfers() {\n      this.isTransfer = true\n    }, */\n      /* handleConfirmTransfers(values) {\n      this.isTransfer = false\n      this.transfer = {\n        type: TRANSFER_TYPE,\n        list: values,\n      }\n    }, */\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '~@/assets/style/var';\n\n  .participant {\n    &-item {\n      display: inline-flex;\n      align-items: center;\n      margin-top: 10px;\n\n      & + &,\n      & + span {\n        margin-left: 5px;\n      }\n\n      &.draggable {\n        .el-tag {\n          cursor: move;\n        }\n      }\n\n      .el-icon-rank {\n        cursor: move;\n        color: $--color-icon-primary;\n        font-size: 16px;\n        margin-right: 5px;\n      }\n    }\n  }\n</style>\n\n<style lang=\"scss\">\n  .wf-approver-ghost-item {\n    .el-tag {\n      opacity: 0.5;\n      background: #c8ebfb;\n    }\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approver.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approver.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./approver.vue?vue&type=template&id=24a56bc0&scoped=true&\"\nimport script from \"./approver.vue?vue&type=script&lang=js&\"\nexport * from \"./approver.vue?vue&type=script&lang=js&\"\nimport style0 from \"./approver.vue?vue&type=style&index=0&id=24a56bc0&lang=scss&scoped=true&\"\nimport style1 from \"./approver.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24a56bc0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('PanelBlock',{attrs:{\"title\":\"抄送人节点名称\"}},[_c('el-input',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.node.model.title),callback:function ($$v) {_vm.$set(_vm.node.model, \"title\", $$v)},expression:\"node.model.title\"}})],1),_c('PanelBlock',{attrs:{\"title\":\"抄送人设置\"}},[_c('el-radio-group',{staticClass:\"flow-panel-radios\",model:{value:(_vm.participant.type),callback:function ($$v) {_vm.$set(_vm.participant, \"type\", $$v)},expression:\"participant.type\"}},[_c('el-row',_vm._l((_vm.participantTypes),function(val,key){return _c('el-col',{key:key,attrs:{\"span\":8}},[_c('el-radio',{attrs:{\"title\":val,\"label\":key}},[_vm._v(_vm._s(val))])],1)}),1)],1),(_vm.showAddBtn)?_c('div',{staticClass:\"flow-panel-button\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\",\"type\":\"primary\"},on:{\"click\":_vm.handleAddPeople}},[_vm._v(\"添加\"+_vm._s(_vm.participantTypes[_vm.participant.type]))])],1):_vm._e(),(_vm.showAddBtn && _vm.participant.list && _vm.participant.list.length)?_c('div',{staticClass:\"flow-panel-radios\"},[_vm._l((_vm.participant.list),function(tag){return [(tag.hasUser === false)?_c('el-popover',{key:tag.value,attrs:{\"popper-class\":\"flow-panel-popover\",\"trigger\":\"hover\",\"visible-arrow\":false,\"content\":(\"该\" + (_vm.participantTypes[_vm.participant.type]) + \"中无用户存在\"),\"placement\":\"top\"}},[_c('el-tag',{key:tag.value,attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"disable-transitions\":\"\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleDeleteTag(_vm.participant.list, tag)}},slot:\"reference\"},[_c('span',[_vm._v(_vm._s(tag.name)+\" \"+_vm._s(tag.parentFullName ? (\"(\" + (tag.parentFullName) + \")\") : ''))]),_c('i',{staticClass:\"el-icon-warning\"})])],1):_c('el-tag',{key:tag.value,attrs:{\"size\":\"mini\",\"disable-transitions\":\"\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleDeleteTag(_vm.participant.list, tag)}}},[_c('span',[_vm._v(_vm._s(tag.name)+\" \"+_vm._s(tag.parentFullName ? (\"(\" + (tag.parentFullName) + \")\") : ''))])])]}),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":_vm.handleClearTags}},[_vm._v(\"清空\")])],2):_vm._e()],1),_vm._t(\"table\"),_c('SubmitPicker',_vm._b({attrs:{\"show\":_vm.pickerVisible,\"type\":_vm.pickerType,\"participant-type\":_vm.participant.type,\"default-selected\":_vm.computedParticipantsList},on:{\"update:show\":function($event){_vm.pickerVisible=$event},\"confirm\":_vm.handleConfirmPicker}},'SubmitPicker',_vm.$attrs,false)),_c('PositionPicker',{attrs:{\"title\":\"选择岗位标签\",\"show\":_vm.stationVisible,\"multiple\":\"\",\"list-key-name\":\"parentFullName\",\"role-list\":_vm.computedParticipantsList},on:{\"update:show\":function($event){_vm.stationVisible=$event},\"addCallBack\":_vm.handleCallBack}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <PanelBlock title=\"抄送人节点名称\">\n      <el-input\n        v-model=\"node.model.title\"\n        size=\"mini\"\n        @change=\"handleChange\"\n      ></el-input>\n    </PanelBlock>\n\n    <PanelBlock title=\"抄送人设置\">\n      <el-radio-group v-model=\"participant.type\" class=\"flow-panel-radios\">\n        <el-row>\n          <el-col v-for=\"(val, key) in participantTypes\" :key=\"key\" :span=\"8\">\n            <el-radio :title=\"val\" :label=\"key\">{{ val }}</el-radio>\n          </el-col>\n        </el-row>\n      </el-radio-group>\n\n      <div v-if=\"showAddBtn\" class=\"flow-panel-button\">\n        <el-button\n          size=\"mini\"\n          icon=\"el-icon-plus\"\n          type=\"primary\"\n          @click=\"handleAddPeople\"\n          >添加{{ participantTypes[participant.type] }}</el-button\n        >\n      </div>\n\n      <div\n        v-if=\"showAddBtn && participant.list && participant.list.length\"\n        class=\"flow-panel-radios\"\n      >\n        <template v-for=\"tag in participant.list\">\n          <el-popover\n            v-if=\"tag.hasUser === false\"\n            :key=\"tag.value\"\n            popper-class=\"flow-panel-popover\"\n            trigger=\"hover\"\n            :visible-arrow=\"false\"\n            :content=\"`该${participantTypes[participant.type]}中无用户存在`\"\n            placement=\"top\"\n          >\n            <el-tag\n              :key=\"tag.value\"\n              slot=\"reference\"\n              size=\"mini\"\n              disable-transitions\n              closable\n              @close=\"handleDeleteTag(participant.list, tag)\"\n            >\n              <span\n                >{{ tag.name }}\n                {{ tag.parentFullName ? `(${tag.parentFullName})` : '' }}</span\n              >\n              <i class=\"el-icon-warning\"></i>\n            </el-tag>\n          </el-popover>\n\n          <el-tag\n            v-else\n            :key=\"tag.value\"\n            size=\"mini\"\n            disable-transitions\n            closable\n            @close=\"handleDeleteTag(participant.list, tag)\"\n          >\n            <span\n              >{{ tag.name }}\n              {{ tag.parentFullName ? `(${tag.parentFullName})` : '' }}</span\n            >\n          </el-tag>\n        </template>\n\n        <el-button size=\"mini\" type=\"text\" @click=\"handleClearTags\"\n          >清空</el-button\n        >\n      </div>\n    </PanelBlock>\n\n    <slot name=\"table\"></slot>\n\n    <SubmitPicker\n      v-bind=\"$attrs\"\n      :show.sync=\"pickerVisible\"\n      :type=\"pickerType\"\n      :participant-type=\"participant.type\"\n      :default-selected=\"computedParticipantsList\"\n      @confirm=\"handleConfirmPicker\"\n    ></SubmitPicker>\n\n    <PositionPicker\n      title=\"选择岗位标签\"\n      :show.sync=\"stationVisible\"\n      multiple\n      list-key-name=\"parentFullName\"\n      :role-list=\"computedParticipantsList\"\n      @addCallBack=\"handleCallBack\"\n    ></PositionPicker>\n  </div>\n</template>\n\n<script>\n  import PropTypes from 'vue-types'\n  import Node from '../flow/helpers/Node'\n  import VueMfe from 'vue-mfe'\n  import PanelBlock from './_base-block'\n  import SubmitPicker from './_base-submit-picker'\n  import { deepCopy } from '../../utils/index'\n  import FLOW_NODE_TYPE_ENUM from '../flow/constants/FLOW_NODE_TYPE_ENUM'\n  import FLOW_NODE_TYPE_PROPS from '../flow/constants/FLOW_NODE_TYPE_PROPS'\n  import { checkDoesUserExist } from '../../service'\n  import {\n    CC_TYPES_NAME,\n    FORM_FIELDS_TYPES,\n    PARTICIPANT_PICKER_TYPES,\n    PARTICIPANT_TYPES,\n    PEOPLE_TYPES_KEY_MAP,\n    SUBMIT_PICKER_TYPES\n  } from '../../constants/ENUM_DEFINITIONS'\n  // import FLOW_NODE_TYPE_MODEL from '../flow/constants/FLOW_NODE_TYPE_MODEL'\n\n  export default {\n    name: 'NotifierPanel',\n    type: FLOW_NODE_TYPE_ENUM.NOTIFIER_NODE,\n    components: {\n      PanelBlock,\n      SubmitPicker,\n      PositionPicker: () => VueMfe.Lazy('auth2.components.PositionPicker')\n    },\n    inheritAttrs: false,\n    props: {\n      // eslint-disable-next-line\n      node: PropTypes.instanceOf(Node).required\n    },\n    data() {\n      const participant = this.getValue('participant')\n      return {\n        /* 参与人类型 */\n        participantTypes: CC_TYPES_NAME,\n        /* node props model */\n        participant,\n        stationVisible: false,\n        /* submit picker reactive data */\n        pickerType: SUBMIT_PICKER_TYPES[participant.type],\n        pickerVisible: false\n      }\n    },\n    computed: {\n      computedParticipantsList() {\n        const list = this.participant.list\n        const isPosition =\n          this.participant.type === PARTICIPANT_TYPES.POSITION_LABEL\n        return (list && list.length ? list : []).map((i) => ({\n          [isPosition ? 'positionName' : 'nodeName']: i.name,\n          sysNo: i.value,\n          parentFullName: i.parentFullName || '',\n          key: isPosition\n            ? i.value\n            : `${i.value}-${PEOPLE_TYPES_KEY_MAP[this.pickerType]}`\n        }))\n      },\n      showAddBtn() {\n        return Boolean(\n          !FORM_FIELDS_TYPES[this.participant.type] && !this.fromSelf\n        )\n      },\n      fromSelf() {\n        return this.participant.type === PARTICIPANT_TYPES.INITIATOR\n      }\n    },\n    watch: {\n      'participant.type'() {\n        this.participant.list = []\n        this.node.read('')\n      },\n      participant: {\n        deep: true,\n        handler(val) {\n          if (this.fromSelf) {\n            this.node.read(this.participantTypes[val.type])\n          } else {\n            this.node && this.node.read(val)\n          }\n\n          if (this.node.read() && this.node.model.errorState) {\n            this.node.update({\n              errorState: false\n            })\n          }\n\n          this.handleUpdateProps('participant')\n        }\n      }\n    },\n    created() {\n      checkDoesUserExist(this.participant)\n    },\n    methods: {\n      /**\n       * @description 如果 node 节点的 props 中已存在该值，则取它的值，否则取 defaultSettings 的默认值\n       * @param {string} key key name\n       * @returns {any*}\n       */\n      getValue(key) {\n        if (this.node && this.node.props) {\n          const propValue = this.node.props[key]\n          const isObject = typeof this.node.props[key] === 'object'\n\n          return isObject\n            ? deepCopy({\n                // fixed: 并行分支子节点选择后未更新VIEW(#1017053)\n                ...FLOW_NODE_TYPE_PROPS[this.node.type][key],\n                ...this.node.props[key]\n              })\n            : propValue\n        }\n      },\n      handleChange(val) {\n        this.node.update({\n          title: val\n        })\n      },\n      /* update node props */\n      handleUpdateProps(key) {\n        this.node &&\n          this.node.updateProps({\n            [key]: this[key]\n          })\n      },\n      handleAddPeople() {\n        if (this.participant.type === PARTICIPANT_TYPES.POSITION_LABEL) {\n          this.stationVisible = true\n        } else {\n          this.pickerType =\n            PARTICIPANT_PICKER_TYPES[this.participant.type] || null\n          this.pickerVisible = true\n        }\n      },\n      handleCallBack(values) {\n        this.participant.list = values.map((i) => ({\n          name: i.positionName,\n          value: i.sysNo,\n          parentFullName: i.parentFullName,\n          organizationType: i.organizationType,\n          hasUser: undefined,\n          model: {\n            positionLabelSysNo: i.sysNo,\n            positionLabelName: i.positionName,\n            parentFullName: i.parentFullName,\n            organizationType: i.organizationType,\n            unitType: PARTICIPANT_TYPES.POSITION_LABEL\n          }\n        }))\n      },\n      handleConfirmPicker(values) {\n        this.participant.list = values\n        checkDoesUserExist(this.participant)\n      },\n      handleDeleteTag(list, tag) {\n        list.splice(list.indexOf(tag), 1)\n      },\n      handleClearTags() {\n        this.participant.list = []\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notifier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notifier.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./notifier.vue?vue&type=template&id=62140258&\"\nimport script from \"./notifier.vue?vue&type=script&lang=js&\"\nexport * from \"./notifier.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('PanelBlock',{attrs:{\"title\":\"并行节点名称\"}},[_c('el-input',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.node.model.title),callback:function ($$v) {_vm.$set(_vm.node.model, \"title\", $$v)},expression:\"node.model.title\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <PanelBlock title=\"并行节点名称\">\n    <el-input v-model=\"node.model.title\" size=\"mini\" @change=\"handleChange\"></el-input>\n  </PanelBlock>\n</template>\n\n<script>\nimport Node from '../flow/helpers/Node'\nimport PanelBlock from './_base-block'\nimport PropTypes from 'vue-types'\nimport FLOW_NODE_TYPE_ENUM from '../flow/constants/FLOW_NODE_TYPE_ENUM'\n// import FLOW_NODE_TYPE_MODEL from '../flow/constants/FLOW_NODE_TYPE_MODEL'\n\nexport default {\n  name: 'ParallelPanel',\n  type: FLOW_NODE_TYPE_ENUM.PARALLEL_NODE,\n  components: {\n    PanelBlock,\n  },\n  props: {\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  methods: {\n    handleChange(val) {\n      this.node &&\n        this.node.update({\n          title: val,\n        })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parallel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parallel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./parallel.vue?vue&type=template&id=612fe560&\"\nimport script from \"./parallel.vue?vue&type=script&lang=js&\"\nexport * from \"./parallel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('PanelBlock',{attrs:{\"title\":\"条件节点名称\"}},[_c('el-input',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.node.model.title),callback:function ($$v) {_vm.$set(_vm.node.model, \"title\", $$v)},expression:\"node.model.title\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <PanelBlock title=\"条件节点名称\">\n    <el-input v-model=\"node.model.title\" size=\"mini\" @change=\"handleChange\"></el-input>\n  </PanelBlock>\n</template>\n\n<script>\nimport Node from '../flow/helpers/Node'\nimport PanelBlock from './_base-block'\nimport PropTypes from 'vue-types'\nimport FLOW_NODE_TYPE_ENUM from '../flow/constants/FLOW_NODE_TYPE_ENUM'\n// import FLOW_NODE_TYPE_MODEL from '../flow/constants/FLOW_NODE_TYPE_MODEL'\n\nexport default {\n  name: 'ConditionPanel',\n  type: FLOW_NODE_TYPE_ENUM.CONDITION_NODE,\n  components: {\n    PanelBlock,\n  },\n  props: {\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  methods: {\n    handleChange(val) {\n      this.node &&\n        this.node.update({\n          title: val,\n        })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./condition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./condition.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./condition.vue?vue&type=template&id=7076be6b&\"\nimport script from \"./condition.vue?vue&type=script&lang=js&\"\nexport * from \"./condition.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-drawer\n    class=\"yz design-center-panel-drawer\"\n    v-bind=\"$attrs\"\n    modal\n    append-to-body\n    v-on=\"$listeners\"\n  >\n    <template v-if=\"node\">\n      <el-tabs v-model=\"activeName\">\n        <el-tab-pane label=\"节点属性\" name=\"node\">\n          <component\n            :is=\"computedNode\"\n            v-if=\"computedNode\"\n            class=\"flow-panel\"\n            :node=\"node\"\n            :fields=\"fields\"\n            v-bind=\"$attrs\"\n            v-on=\"$listeners\"\n          ></component>\n        </el-tab-pane>\n\n        <el-tab-pane\n          v-if=\"showPermissionPanel\"\n          label=\"表单字段权限\"\n          name=\"flow\"\n        >\n          <PanelBlock v-if=\"needPermissionTable\">\n            <PanelPermissionTable\n              v-bind=\"{\n                node,\n                fields,\n                joinPlan,\n                canCallbackFormData: !!(getFlowFormInfo || {})\n                  .canCallbackFormData,\n                flowType: (getFlowBaseInfo || {}).flowType\n              }\"\n            ></PanelPermissionTable>\n          </PanelBlock>\n        </el-tab-pane>\n      </el-tabs>\n    </template>\n  </el-drawer>\n</template>\n\n<script>\n  import './styles.scss'\n  import PropTypes from 'vue-types'\n  import Node from '../flow/helpers/Node'\n  import PanelBlock from './_base-block'\n  import PanelPermissionTable from './_base-permission-table'\n  import Sponsor from './sponsor'\n  import Approver from './approver'\n  import Notifier from './notifier'\n  import Parallel from './parallel'\n  import Condition from './condition'\n\n  const BasePanel = {\n    name: 'BasePanel',\n    components: {\n      Sponsor,\n      Approver,\n      Notifier,\n      Parallel,\n      Condition,\n      PanelBlock,\n      PanelPermissionTable\n    },\n    inheritAttrs: false,\n    props: {\n      // eslint-disable-next-line\n      node: PropTypes.instanceOf(Node).required,\n      fields: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string.def(''),\n          fieldKey: PropTypes.string.isRequired,\n          fieldName: PropTypes.string.isRequired,\n          canView: PropTypes.bool.isRequired,\n          canWrite: PropTypes.bool.isRequired,\n          require: PropTypes.oneOf([true, false, undefined]).isRequired,\n          editable: PropTypes.bool.isRequired,\n          textVisible: PropTypes.bool.isRequired,\n          useCondition: PropTypes.bool.isRequired\n        })\n      ),\n      joinPlan: PropTypes.oneOf([1, 2, 3]).isRequired\n    },\n    data() {\n      return {\n        /* active tab item */\n        activeName: 'node',\n        /* PermissionTable 的显隐和能否编辑 */\n        showPermissionEdit: true,\n        showPermissionPanel: true,\n\n        getFlowFormInfo: {},\n        getFlowBaseInfo: {}\n      }\n    },\n    computed: {\n      computedType() {\n        return (this.node && this.node.type) || 'base'\n      },\n      computedNode() {\n        return Object.values(BasePanel.components).find(\n          (component) => component.type && component.type === this.computedType\n        )\n      },\n      needPermissionTable() {\n        return [\n          Node.TYPE.SPONSOR_NODE,\n          Node.TYPE.APPROVER_NODE,\n          Node.TYPE.NOTIFIER_NODE\n        ].includes(this.node && this.node.type)\n      }\n    },\n    watch: {\n      node() {\n        this.resetInnerState()\n        this.node && this.handleJoinPlan()\n      }\n      // showPermissionEdit(val) {\n      //   this.watchFieldList(val)\n      // },\n      // showPermissionPanel(val) {\n      //   this.watchFieldList(val)\n      // },\n    },\n    mounted() {\n      this.handleJoinPlan(this.joinPlan)\n\n      window.addEventListener('keydown', this.handleKeyPress)\n    },\n    beforeDestroy() {\n      window.removeEventListener('keydown', this.handleKeyPress)\n    },\n    methods: {\n      handleKeyPress(event) {\n        if (event.keyCode === 27) {\n          if (this.$attrs.visible) {\n            this.$emit('update:visible', false)\n          }\n        }\n      },\n      resetInnerState() {\n        /* active tab item */\n        this.activeName = 'node'\n\n        /* PermissionTable 的显隐和能否编辑 */\n        // this.showPermissionEdit = true\n        this.showPermissionPanel = true\n      },\n      handleJoinPlan() {\n        const joinPlan = this.joinPlan\n        const isSponsorNode =\n          this.node && this.node.type === Node.TYPE.SPONSOR_NODE\n        if (joinPlan === 2) {\n          if (isSponsorNode) {\n            this.showPermissionPanel = false\n          }\n        }\n\n        if (joinPlan === 3) {\n          this.showPermissionPanel = false\n        }\n      }\n      // watchFieldList(val) {\n      //   if (val === false) {\n      //     const formFieldList = deepCopy(\n      //       (this.node && this.node.props && this.node.props.formFieldList) || []\n      //     )\n\n      //     this.updateFieldList(\n      //       formFieldList.map((t) => {\n      //         if (t.canWrite) t.canWrite = false\n      //         return t\n      //       })\n      //     )\n      //   }\n      // },\n      // updateFieldList(formFieldList) {\n      //   this.node && this.node.updateProps({ formFieldList })\n      // },\n    }\n  }\n\n  export default BasePanel\n</script>\n\n<style lang=\"scss\">\n  .design-center-panel-drawer {\n    .el-drawer__header {\n      display: none;\n    }\n\n    .el-drawer__body {\n      overflow: auto;\n      padding: 30px;\n    }\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4867421e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flow-node\",class:(_vm.type + \"-node\")},[(_vm.computedNode)?_c(_vm.computedNode,_vm._g(_vm._b({tag:\"component\"},'component',_vm.$attrs,false),_vm.$listeners)):_vm._e(),(_vm.showAddBtn)?_c('BaseAddBtn',_vm._g(_vm._b({staticClass:\"flow-node-button\",attrs:{\"type\":\"primary\",\"circle\":\"\"}},'BaseAddBtn',_vm.$attrs,false),_vm.computedListeners)):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.branchType)?_c('div',[_c('el-button',_vm._g(_vm._b({attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.handleAddNode(_vm.branchType)}}},'el-button',_vm.$attrs,false),_vm.$listeners),[_vm._t(\"default\")],2)],1):(!_vm.editable)?_c('div',{staticClass:\"flow-node-button--gap\"}):_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"100\",\"popper-class\":\"flow-type-wrapper\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('div',{staticClass:\"flow-type\"},_vm._l((_vm.types),function(ref){\nvar type = ref.type;\nvar icon = ref.icon;\nvar name = ref.name;\nvar styles = ref.styles;\nreturn _c('a',{key:name,staticClass:\"flow-type-item\",attrs:{\"href\":\"javascript:void(0)\",\"title\":(\"添加\" + name + \"节点\")},on:{\"click\":function($event){return _vm.handleAddNode(type)}}},[_c('div',{staticClass:\"flow-type-item__icon\",style:(styles)},[_c('i',{class:(\"\" + icon)})]),_c('div',{staticClass:\"flow-type-item__name\"},[_vm._v(_vm._s(name))])])}),0),_c('template',{slot:\"reference\"},[_c('el-button',_vm._g(_vm._b({attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\"}},'el-button',_vm.$attrs,false),_vm.$listeners),[_vm._t(\"default\")],2)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import FLOW_NODE_TYPE from './FLOW_NODE_TYPE_ENUM'\nimport FLOW_NODE_MODEL from './FLOW_NODE_TYPE_MODEL'\n\n/**\n * @readonly\n * @enum\n */\nexport default [\n  {\n    type: FLOW_NODE_TYPE.APPROVER_NODE,\n    name: FLOW_NODE_MODEL[FLOW_NODE_TYPE.APPROVER_NODE].title,\n    icon: FLOW_NODE_MODEL[FLOW_NODE_TYPE.APPROVER_NODE].titleIcon,\n    styles: {\n      color:\n        FLOW_NODE_MODEL[FLOW_NODE_TYPE.APPROVER_NODE].customTitleStyle\n          .backgroundColor,\n    },\n  },\n  {\n    type: FLOW_NODE_TYPE.CONDITION_BRANCH,\n    name: FLOW_NODE_MODEL[FLOW_NODE_TYPE.CONDITION_BRANCH].title,\n    icon: FLOW_NODE_MODEL[FLOW_NODE_TYPE.CONDITION_BRANCH].titleIcon,\n    styles: {\n      color:\n        FLOW_NODE_MODEL[FLOW_NODE_TYPE.CONDITION_NODE].customTitleStyle.color,\n    },\n  },\n  {\n    type: FLOW_NODE_TYPE.PARALLEL_BRANCH,\n    name: FLOW_NODE_MODEL[FLOW_NODE_TYPE.PARALLEL_BRANCH].title,\n    icon: FLOW_NODE_MODEL[FLOW_NODE_TYPE.PARALLEL_BRANCH].titleIcon,\n    styles: {\n      color:\n        FLOW_NODE_MODEL[FLOW_NODE_TYPE.PARALLEL_NODE].customTitleStyle.color,\n    },\n  },\n  {\n    type: FLOW_NODE_TYPE.NOTIFIER_NODE,\n    name: FLOW_NODE_MODEL[FLOW_NODE_TYPE.NOTIFIER_NODE].title,\n    icon: FLOW_NODE_MODEL[FLOW_NODE_TYPE.NOTIFIER_NODE].titleIcon,\n    styles: {\n      color:\n        FLOW_NODE_MODEL[FLOW_NODE_TYPE.NOTIFIER_NODE].customTitleStyle\n          .backgroundColor,\n    },\n  },\n]\n","<template>\n  <div v-if=\"branchType\">\n    <el-button\n      size=\"mini\"\n      icon=\"el-icon-plus\"\n      v-bind=\"$attrs\"\n      v-on=\"$listeners\"\n      @click=\"handleAddNode(branchType)\"\n    >\n      <slot></slot>\n    </el-button>\n  </div>\n\n  <div v-else-if=\"!editable\" class=\"flow-node-button--gap\"></div>\n\n  <el-popover\n    v-else\n    v-model=\"visible\"\n    placement=\"right\"\n    width=\"100\"\n    popper-class=\"flow-type-wrapper\"\n  >\n    <div class=\"flow-type\">\n      <a\n        v-for=\"{ type, icon, name, styles } in types\"\n        :key=\"name\"\n        class=\"flow-type-item\"\n        href=\"javascript:void(0)\"\n        :title=\"`添加${name}节点`\"\n        @click=\"handleAddNode(type)\"\n      >\n        <div class=\"flow-type-item__icon\" :style=\"styles\">\n          <i :class=\"`${icon}`\"></i>\n        </div>\n        <div class=\"flow-type-item__name\">{{ name }}</div>\n      </a>\n    </div>\n\n    <template slot=\"reference\">\n      <el-button\n        size=\"mini\"\n        icon=\"el-icon-plus\"\n        v-bind=\"$attrs\"\n        v-on=\"$listeners\"\n      >\n        <slot></slot>\n      </el-button>\n\n      <!-- <div v-if=\"arrowDown\" class=\"flow-icon__down\">\n        <i class=\"el-icon-arrow-down\"></i>\n      </div>-->\n    </template>\n  </el-popover>\n</template>\n\n<script>\n  import PropTypes from 'vue-types'\n  import Node from '../helpers/Node'\n  import { needMergeFields } from '../helpers/NodeUtils'\n  import FLOW_ADD_BTN_TYPES from '../constants/FLOW_ADD_BTN_TYPES'\n  import { updateFieldsWhenCreate } from '../../../utils/fieldsHelpers'\n\n  export default {\n    name: 'BaseAddBtn',\n    inheritAttrs: false,\n    props: {\n      branchType: PropTypes.oneOf([\n        Node.TYPE.CONDITION_NODE,\n        Node.TYPE.PARALLEL_NODE,\n        false\n      ]).def(false),\n      editable: PropTypes.bool.def(true),\n      // arrowDown: PropTypes.bool.def(true),\n      // eslint-disable-next-line\n      node: PropTypes.instanceOf(Node).required,\n      fields: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string.def(''),\n          fieldKey: PropTypes.string.isRequired,\n          fieldName: PropTypes.string.isRequired,\n          canView: PropTypes.bool.isRequired,\n          canWrite: PropTypes.bool.isRequired,\n          require: PropTypes.oneOf([true, false, undefined]).isRequired,\n          editable: PropTypes.bool.isRequired,\n          textVisible: PropTypes.bool.isRequired,\n          useCondition: PropTypes.bool.isRequired\n        })\n      )\n    },\n    data() {\n      return {\n        visible: false,\n        types: FLOW_ADD_BTN_TYPES\n      }\n    },\n    methods: {\n      handleAddNode(type) {\n        const opts = this.needMergeFields(type)\n          ? {\n              type,\n              formFieldList: updateFieldsWhenCreate(this.fields)(\n                type === Node.TYPE.PARALLEL_BRANCH\n                  ? Node.TYPE.APPROVER_NODE\n                  : type\n              )\n            }\n          : { type }\n        const node = this.node && this.node.add(opts)\n\n        this.visible = false\n        this.$emit('update-node', node.getRootNode(node))\n      },\n      needMergeFields(type) {\n        return needMergeFields(type) || type === Node.TYPE.PARALLEL_BRANCH\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-add-btn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-add-btn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_base-add-btn.vue?vue&type=template&id=b6bb3d5e&\"\nimport script from \"./_base-add-btn.vue?vue&type=script&lang=js&\"\nexport * from \"./_base-add-btn.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._g(_vm._b({staticClass:\"node\",class:_vm.errorState && 'node-warning'},'div',_vm.$attrs,false),_vm.$listeners),[_c('div',{staticClass:\"node-title\",style:(_vm.customTitleStyle),attrs:{\"title\":_vm.title}},[(_vm.$slots.header)?[_vm._t(\"header\")]:[_c('div',{staticClass:\"node-title-text\",attrs:{\"title\":_vm.title}},[(_vm.titleIcon)?_c('div',{staticClass:\"node-title-icon\"},[_c('i',{class:(\"\" + _vm.titleIcon)})]):_vm._e(),(_vm.$slots.title)?_vm._t(\"title\"):_c('span',[_vm._v(_vm._s(_vm.title))])],2),(_vm.showRemove && _vm.editable)?_c('a',{staticClass:\"node-close-icon\",attrs:{\"title\":\"删除该节点\",\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleRemoveNode($event)}}},[_c('i',{class:\"el-icon-close\"})]):_vm._e()]],2),(_vm.errorState || _vm.content || _vm.placeholder)?_c('div',{staticClass:\"node-content\",attrs:{\"title\":_vm.errorState || _vm.content || '点击设置'}},[_c('div',{staticClass:\"node-content-text\"},[(_vm.errorState)?_c('span',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.errorState))]):(_vm.content)?_vm._t(\"default\",[[_vm._v(_vm._s(_vm.content))]]):_c('span',{staticClass:\"placeholder\"},[_vm._v(_vm._s(_vm.placeholder))])],2),(_vm.contentIcon && _vm.editable)?_c('div',{staticClass:\"node-content-icon\"},[_c('i',{class:(\"\" + _vm.contentIcon)})]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"node\" :class=\"errorState && 'node-warning'\" v-bind=\"$attrs\" v-on=\"$listeners\">\n    <div class=\"node-title\" :title=\"title\" :style=\"customTitleStyle\">\n      <template v-if=\"$slots.header\">\n        <slot name=\"header\"></slot>\n      </template>\n\n      <template v-else>\n        <div class=\"node-title-text\" :title=\"title\">\n          <div v-if=\"titleIcon\" class=\"node-title-icon\">\n            <i :class=\"`${titleIcon}`\"></i>\n          </div>\n\n          <slot v-if=\"$slots.title\" name=\"title\"></slot>\n          <span v-else>{{title}}</span>\n        </div>\n\n        <a\n          v-if=\"showRemove && editable\"\n          title=\"删除该节点\"\n          class=\"node-close-icon\"\n          href=\"javascript:void(0)\"\n          @click.stop=\"handleRemoveNode\"\n        >\n          <i :class=\"`el-icon-close`\"></i>\n        </a>\n      </template>\n    </div>\n\n    <div\n      v-if=\"errorState || content || placeholder\"\n      class=\"node-content\"\n      :title=\"errorState || content || '点击设置'\"\n    >\n      <div class=\"node-content-text\">\n        <span v-if=\"errorState\" class=\"error-message\">{{errorState}}</span>\n        <slot v-else-if=\"content\">\n          <template>{{content}}</template>\n        </slot>\n        <span v-else class=\"placeholder\">{{placeholder}}</span>\n      </div>\n\n      <div v-if=\"contentIcon && editable\" class=\"node-content-icon\">\n        <i :class=\"`${contentIcon}`\"></i>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PropTypes from 'vue-types'\nimport Node from '../../helpers/Node'\n\nexport default {\n  name: 'BaseNode',\n  inheritAttrs: false,\n  props: {\n    editable: PropTypes.bool.def(true),\n    showRemove: PropTypes.bool.def(true),\n    // eslint-disable-next-line\n    title: PropTypes.string.isRequired,\n    content: PropTypes.string.def(''),\n    placeholder: PropTypes.string.def('请填写内容'),\n    titleIcon: PropTypes.string.def(''),\n    contentIcon: PropTypes.string.def(''),\n    customTitleStyle: PropTypes.any.def({}),\n    errorState: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]).def(\n      false\n    ),\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  methods: {\n    handleRemoveNode() {\n      const node = this.node && this.node.remove(this, this.index)\n      this.$emit('update-node', node.getRootNode(node))\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_base-node.vue?vue&type=template&id=69e05ebf&\"\nimport script from \"./_base-node.vue?vue&type=script&lang=js&\"\nexport * from \"./_base-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport PropTypes from 'vue-types'\nimport BaseNode from './_base-node'\nimport FlowNodeType from '../../constants/FLOW_NODE_TYPE_ENUM'\nimport FlowNodeModel from '../../constants/FLOW_NODE_TYPE_MODEL'\n\nconst TYPE = FlowNodeType.SPONSOR_NODE\nconst defaultConfig = FlowNodeModel[TYPE]\n\nexport default {\n  name: 'SponsorNode',\n  type: TYPE,\n  components: {\n    BaseNode,\n  },\n  inheritAttrs: false,\n  props: {\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  render(h) {\n    return h('BaseNode', {\n      props: {\n        ...defaultConfig,\n        ...this.node.model,\n        node: this.node,\n        showRemove: false,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    })\n  }\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sponsor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sponsor.vue?vue&type=script&lang=js&\"","<script>\nimport PropTypes from 'vue-types'\nimport BaseNode from './_base-node'\nimport FlowNodeType from '../../constants/FLOW_NODE_TYPE_ENUM'\nimport FlowNodeModel from '../../constants/FLOW_NODE_TYPE_MODEL'\n\nconst TYPE = FlowNodeType.APPROVER_NODE\nconst defaultConfig = FlowNodeModel[TYPE]\n\nexport default {\n  name: 'ApproverNode',\n  type: TYPE,\n  components: {\n    BaseNode,\n  },\n  inheritAttrs: false,\n  props: {\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  render(h) {\n    return h('BaseNode', {\n      props: {\n        ...defaultConfig,\n        ...this.node.model,\n        node: this.node,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    })\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approver.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approver.vue?vue&type=script&lang=js&\"","<script>\nimport PropTypes from 'vue-types'\nimport BaseNode from './_base-node'\nimport FlowNodeType from '../../constants/FLOW_NODE_TYPE_ENUM'\nimport FlowNodeModel from '../../constants/FLOW_NODE_TYPE_MODEL'\n\nconst TYPE = FlowNodeType.NOTIFIER_NODE\nconst defaultConfig = FlowNodeModel[TYPE]\n\nexport default {\n  name: 'NotifierNode',\n  type: TYPE,\n  components: {\n    BaseNode,\n  },\n  inheritAttrs: false,\n  props: {\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n  },\n  render(h) {\n    return h('BaseNode', {\n      props: {\n        ...defaultConfig,\n        ...this.node.model,\n        node: this.node,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    })\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notifier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notifier.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._g(_vm._b({staticClass:\"branch-node\",class:_vm.errorState && 'branch-node-warning',attrs:{\"title\":_vm.computedNodeTitle}},'div',_vm.$attrs,false),_vm.$listeners),[(_vm.showArrowLeft)?_c('div',{staticClass:\"branch-node-icon-left\",attrs:{\"title\":\"左移\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleMoveForward($event)}}},[_c('i',{staticClass:\"el-icon-arrow-left\"})]):_vm._e(),_c('div',{staticClass:\"branch-node-inner\"},[(_vm.title)?_c('div',{staticClass:\"branch-node-title\",style:(_vm.model.customTitleStyle)},[_c('div',{staticClass:\"branch-node-title-text\"},[_c('span',[_vm._v(_vm._s(_vm.title))])]),_c('div',{staticClass:\"branch-node-priority\"},[_vm._v(_vm._s(_vm.priority))]),(_vm.showRemove && _vm.editable)?_c('a',{staticClass:\"branch-node-icon-close\",attrs:{\"title\":\"删除该节点\",\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleRemoveNode($event)}}},[_c('i',{class:\"el-icon-close\"})]):_vm._e()]):_vm._e(),(_vm.errorState || _vm.model.content || _vm.model.placeholder)?_c('div',{staticClass:\"branch-node-content\",attrs:{\"title\":_vm.errorState || _vm.model.content || '点击设置'}},[_c('div',{staticClass:\"branch-node-content-text\"},[(_vm.errorState)?_c('span',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.errorState))]):(_vm.model.content)?_vm._t(\"default\",[[_vm._v(_vm._s(_vm.model.content))]]):_c('span',{staticClass:\"placeholder\"},[_vm._v(_vm._s(_vm.model.placeholder))])],2)]):_vm._e()]),(_vm.showArrowRight)?_c('div',{staticClass:\"branch-node-icon-right\",attrs:{\"title\":\"右移\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleMoveBackward($event)}}},[_c('i',{staticClass:\"el-icon-arrow-right\"})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"branch-node\"\n    :class=\"errorState && 'branch-node-warning'\"\n    v-bind=\"$attrs\"\n    :title=\"computedNodeTitle\"\n    v-on=\"$listeners\"\n  >\n    <div\n      v-if=\"showArrowLeft\"\n      title=\"左移\"\n      class=\"branch-node-icon-left\"\n      @click.stop=\"handleMoveForward\"\n    >\n      <i class=\"el-icon-arrow-left\"></i>\n    </div>\n\n    <div class=\"branch-node-inner\">\n      <div v-if=\"title\" class=\"branch-node-title\" :style=\"model.customTitleStyle\">\n        <div class=\"branch-node-title-text\">\n          <span>{{title}}</span>\n        </div>\n\n        <div class=\"branch-node-priority\">{{priority}}</div>\n\n        <a\n          v-if=\"showRemove && editable\"\n          title=\"删除该节点\"\n          class=\"branch-node-icon-close\"\n          href=\"javascript:void(0)\"\n          @click.stop=\"handleRemoveNode\"\n        >\n          <i :class=\"`el-icon-close`\"></i>\n        </a>\n      </div>\n\n      <div\n        v-if=\"errorState || model.content || model.placeholder\"\n        class=\"branch-node-content\"\n        :title=\"errorState || model.content || '点击设置'\"\n      >\n        <div class=\"branch-node-content-text\">\n          <span v-if=\"errorState\" class=\"error-message\">{{errorState}}</span>\n          <slot v-else-if=\"model.content\">\n            <template>{{model.content}}</template>\n          </slot>\n          <span v-else class=\"placeholder\">{{model.placeholder}}</span>\n        </div>\n      </div>\n    </div>\n\n    <div\n      v-if=\"showArrowRight\"\n      title=\"右移\"\n      class=\"branch-node-icon-right\"\n      @click.stop=\"handleMoveBackward\"\n    >\n      <i class=\"el-icon-arrow-right\"></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PropTypes from 'vue-types'\nimport Node from '../../helpers/Node'\nimport FlowGraph from '../../helpers/FlowGraph'\nimport FlowNodeModel from '../../constants/FLOW_NODE_TYPE_MODEL'\n\nexport default {\n  name: 'BaseBranchNode',\n  inheritAttrs: false,\n  props: {\n    movable: PropTypes.bool.def(true),\n    editable: PropTypes.bool.def(true),\n    showRemove: PropTypes.bool.def(true),\n    index: PropTypes.number.def(0),\n    total: PropTypes.number.def(0),\n    // eslint-disable-next-line\n    node: PropTypes.instanceOf(Node).required,\n    // eslint-disable-next-line\n    graph: PropTypes.instanceOf(FlowGraph).required,\n  },\n  computed: {\n    type() {\n      return this.node && this.node.type\n    },\n    settings() {\n      return FlowNodeModel[this.type]\n    },\n    model() {\n      return { ...this.settings, ...(this.node && this.node.model) }\n    },\n    errorState() {\n      return this.model.errorState\n    },\n    title() {\n      if (this.settings.title === this.model.title) {\n        return this.settings.title + (this.index + 1)\n      } else {\n        return this.model.title\n      }\n    },\n    priority() {\n      return '优先级' + (this.index + 1)\n    },\n    showArrowLeft() {\n      return this.editable && this.index > 0\n    },\n    showArrowRight() {\n      return (\n        this.movable &&\n        this.editable &&\n        this.index < this.total &&\n        this.index !== this.total\n      )\n    },\n    computedNodeTitle() {\n      const { showRemove, editable } = this\n      let title = ''\n\n      if (!showRemove || !editable) {\n        if (!showRemove && !editable) {\n          title = '不可编辑，不可移动'\n        } else if (!showRemove) {\n          title = '不可移动'\n        } else if (!editable) {\n          title = '不可编辑'\n        }\n      } else {\n        title = '点击设置'\n      }\n\n      return title\n    },\n  },\n  watch: {\n    'model.content'(val) {\n      if (val && this.errorState) {\n        this.node.model.errorState = false\n      }\n    },\n  },\n  methods: {\n    handleRemoveNode() {\n      const node = this.node && this.node.remove(this, this.index)\n      this.$emit('update-node', node.getRootNode(node))\n    },\n    handleMoveForward() {\n      this.node && this.node.move(this.index, this.index - 1)\n    },\n    handleMoveBackward() {\n      this.node && this.node.move(this.index, this.index + 1)\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-branch-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_base-branch-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_base-branch-node.vue?vue&type=template&id=577b5774&\"\nimport script from \"./_base-branch-node.vue?vue&type=script&lang=js&\"\nexport * from \"./_base-branch-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\n// import PropTypes from 'vue-types'\nimport BaseBranchNode from './_base-branch-node'\nimport FlowNodeType from '../../constants/FLOW_NODE_TYPE_ENUM'\nimport {\n  getNextSiblingNode,\n  isLastConditionNode,\n} from '../../helpers/NodeUtils'\n\nexport default {\n  name: 'ConditionNode',\n\n  type: FlowNodeType.CONDITION_NODE,\n\n  components: {\n    BaseBranchNode,\n  },\n\n  inheritAttrs: false,\n\n  computed: {\n    // Current node is the last one and is `other_condition` type\n    isLast() {\n      return isLastConditionNode(this.$attrs.node)\n    },\n\n    // Current node is the previous of the last one\n    isPrevOfLast() {\n      const nextSiblingNode = getNextSiblingNode(this.$attrs.node)\n\n      return nextSiblingNode && isLastConditionNode(nextSiblingNode)\n    },\n  },\n\n  render(h) {\n    return h('BaseBranchNode', {\n      attrs: {\n        ...this.$attrs,\n        movable: !this.isPrevOfLast && !this.isLast,\n        node: this.isLast\n          ? {\n              ...this.$attrs.node,\n              model: {\n                ...this.$attrs.node.model,\n                content: '其他情况',\n              },\n            }\n          : this.$attrs.node,\n        showRemove: !this.isLast,\n        editable: !this.isLast,\n      },\n      nodeProps: this.isLast\n        ? {\n            title: '其他条件节点不可编辑',\n          }\n        : null,\n      style: this.isLast\n        ? {\n            cursor: 'not-allowed',\n          }\n        : null,\n      on: this.isLast ? null : this.$listeners,\n    })\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./condition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./condition.vue?vue&type=script&lang=js&\"","<script>\n// import PropTypes from 'vue-types'\nimport BaseBranchNode from './_base-branch-node'\nimport FlowNodeType from '../../constants/FLOW_NODE_TYPE_ENUM'\n// import FlowNodeModel from '../../constants/FLOW_NODE_TYPE_MODEL'\n\nexport default {\n  name: 'ParallelNode',\n  type: FlowNodeType.PARALLEL_NODE,\n  components: {\n    BaseBranchNode,\n  },\n  inheritAttrs: false,\n  render(h) {\n    return h('BaseBranchNode', {\n      attrs: this.$attrs,\n      on: this.$listeners,\n    })\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parallel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parallel.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"end-node\"},[_c('div',{staticClass:\"end-node-circle\"}),_c('div',{staticClass:\"end-node-text\"},[_vm._v(_vm._s(_vm.text))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"end-node\">\n    <div class=\"end-node-circle\"></div>\n    <div class=\"end-node-text\">{{text}}</div>\n  </div>\n</template>\n\n<script>\nimport FlowNodeType from '../../constants/FLOW_NODE_TYPE_ENUM'\nimport FlowNodeModel from '../../constants/FLOW_NODE_TYPE_MODEL'\n\nconst TYPE = FlowNodeType.END_NODE\nconst defaultConfig = FlowNodeModel[TYPE]\n\nexport default {\n  name: 'EndNode',\n  type: TYPE,\n  data() {\n    return {\n      text: defaultConfig.content\n    }\n  },\n}\n</script>\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./end.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./end.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./end.vue?vue&type=template&id=c8c9845e&\"\nimport script from \"./end.vue?vue&type=script&lang=js&\"\nexport * from \"./end.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!-- https://alligator.io/vuejs/dynamic-components/ -->\n<template>\n  <div :class=\"`${type}-node`\" class=\"flow-node\">\n    <component\n      :is=\"computedNode\"\n      v-if=\"computedNode\"\n      v-bind=\"$attrs\"\n      v-on=\"$listeners\"\n    ></component>\n    <BaseAddBtn\n      v-if=\"showAddBtn\"\n      v-bind=\"$attrs\"\n      class=\"flow-node-button\"\n      type=\"primary\"\n      circle\n      v-on=\"computedListeners\"\n    ></BaseAddBtn>\n    <!-- :arrow-down=\"computedArrowDown\" -->\n  </div>\n</template>\n\n<script>\n  import PropTypes from 'vue-types'\n  import { isBranchNode } from '../helpers/NodeUtils'\n  import FLOW_NODE_TYPE_ENUM from '../constants/FLOW_NODE_TYPE_ENUM'\n  import BaseAddBtn from './_base-add-btn'\n  import SponsorNode from './nodes/sponsor'\n  import ApproverNode from './nodes/approver'\n  import NotifierNode from './nodes/notifier'\n  import ConditionNode from './nodes/condition'\n  import ParallelNode from './nodes/parallel'\n  import EndNode from './nodes/end'\n\n  // const flowNodeEnum = Object.values(FLOW_NODE_TYPE_ENUM)\n  const FlowNode = {\n    name: 'FlowNode',\n    components: {\n      BaseAddBtn,\n      SponsorNode,\n      ApproverNode,\n      NotifierNode,\n      ConditionNode,\n      ParallelNode,\n      EndNode\n    },\n    inheritAttrs: false,\n    props: {\n      type: PropTypes.oneOf(\n        Object.values(FLOW_NODE_TYPE_ENUM).filter((t) => !isBranchNode(t))\n      ).isRequired\n      // eslint-disable-next-line\n      // node: PropTypes.instanceOf(Node).required,\n    },\n    computed: {\n      /* computedArrowDown() {\n      return !isBranchNode(this.type)\n    }, */\n      computedNode() {\n        return Object.values(FlowNode.components).find(\n          (component) => component.type && component.type === this.type\n        )\n      },\n      showAddBtn() {\n        return this.type !== 'end'\n      },\n      computedListeners() {\n        // eslint-disable-next-line no-unused-vars\n        const { click, ...listeners } = this.$listeners\n\n        return {\n          ...listeners\n        }\n      }\n    }\n  }\n\n  export default FlowNode\n</script>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flow-node.vue?vue&type=template&id=3db04675&\"\nimport script from \"./flow-node.vue?vue&type=script&lang=js&\"\nexport * from \"./flow-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flow-branch-col\"},[(_vm.left)?[_c('div',{staticClass:\"flow-branch-col-line left top\"}),_c('div',{staticClass:\"flow-branch-col-line left btm\"})]:_vm._e(),_c('div',{staticClass:\"flow-branch-col-inner\"},[_vm._t(\"default\",null,null,_vm.$attrs)],2),(_vm.right)?[_c('div',{staticClass:\"flow-branch-col-line right top\"}),_c('div',{staticClass:\"flow-branch-col-line right btm\"})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flow-branch-col\">\n    <template v-if=\"left\">\n      <div class=\"flow-branch-col-line left top\"></div>\n      <div class=\"flow-branch-col-line left btm\"></div>\n    </template>\n\n    <div class=\"flow-branch-col-inner\">\n      <slot v-bind=\"$attrs\"></slot>\n    </div>\n\n    <template v-if=\"right\">\n      <div class=\"flow-branch-col-line right top\"></div>\n      <div class=\"flow-branch-col-line right btm\"></div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport PropTypes from 'vue-types'\n\nexport default {\n  name: 'FlowBranchCol',\n  props: {\n    left: PropTypes.bool.def(false),\n    right: PropTypes.bool.def(false),\n  },\n}\n</script>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-branch-col.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-branch-col.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flow-branch-col.vue?vue&type=template&id=2b4dab1c&\"\nimport script from \"./flow-branch-col.vue?vue&type=script&lang=js&\"\nexport * from \"./flow-branch-col.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flow-branch-node\"},[(_vm.btnText)?_c('BaseAddBtn',_vm._b({staticClass:\"flow-branch-button\",attrs:{\"branch-type\":_vm.nodeType}},'BaseAddBtn',_vm.$attrs,false),[_vm._v(_vm._s(_vm.btnText))]):_vm._e(),_c('div',{staticClass:\"flow-branch\",class:[_vm.type, _vm.$attrs.editable && 'flow-branch--gap']},[_c('div',{staticClass:\"flow-branch-node-inner\"},[_vm._t(\"default\")],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flow-branch-node\">\n    <BaseAddBtn\n      v-if=\"btnText\"\n      v-bind=\"$attrs\"\n      :branch-type=\"nodeType\"\n      class=\"flow-branch-button\"\n      >{{ btnText }}</BaseAddBtn\n    >\n\n    <div\n      class=\"flow-branch\"\n      :class=\"[type, $attrs.editable && 'flow-branch--gap']\"\n    >\n      <div class=\"flow-branch-node-inner\">\n        <slot></slot>\n      </div>\n    </div>\n\n    <!-- <BaseAddBtn v-bind=\"$attrs\" class=\"flow-node-button\" type=\"primary\" circle v-on=\"$listeners\"></BaseAddBtn> -->\n  </div>\n</template>\n\n<script>\n  import PropTypes from 'vue-types'\n  import BaseAddBtn from './_base-add-btn'\n  import FlowNodeType from '../constants/FLOW_NODE_TYPE_ENUM'\n  import FlowNodeModel from '../constants/FLOW_NODE_TYPE_MODEL'\n  import { isBranchNode } from '../helpers/NodeUtils'\n\n  export default {\n    name: 'FLowBranchNode',\n    components: {\n      BaseAddBtn\n    },\n    inheritAttrs: false,\n    props: {\n      // eslint-disable-next-line\n      type: PropTypes.oneOf(Object.values(FlowNodeType).filter(isBranchNode))\n        .isRequired,\n      // eslint-disable-next-line\n      // node: PropTypes.instanceOf(Node).required,\n      // eslint-disable-next-line\n      nodeType: PropTypes.oneOf(\n        Object.values(FlowNodeType)\n          .filter((t) => !isBranchNode(t))\n          .concat(false)\n      ).isRequired\n    },\n    computed: {\n      btnText() {\n        return (FlowNodeModel[this.type] || {})['btnText'] || ''\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-branch-node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./flow-branch-node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./flow-branch-node.vue?vue&type=template&id=74e7bf4d&\"\nimport script from \"./flow-branch-node.vue?vue&type=script&lang=js&\"\nexport * from \"./flow-branch-node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import './components/styles.scss'\nimport PropTypes from 'vue-types'\nimport Node from './helpers/Node'\nimport { getNodeTypeByBranch } from './helpers/NodeUtils'\nimport FlowNode from './components/flow-node'\nimport FlowBranchCol from './components/flow-branch-col'\nimport FlowBranchNode from './components/flow-branch-node'\nimport { toJSON } from '../../adapters/toJSON'\nimport { toModel } from '../../adapters/toModel'\n\nexport default {\n  name: 'FlowLayout',\n  adapters: {\n    toJSON,\n    toModel\n  },\n  components: {\n    FlowNode,\n    FlowBranchCol,\n    FlowBranchNode\n  },\n  inheritAttrs: false,\n  props: {\n    // eslint-disable-next-line\n    rootNode: PropTypes.instanceOf(Node).required,\n    currNode: PropTypes.instanceOf(Node).required,\n    editable: PropTypes.bool.def(true)\n  },\n  computed: {\n    graph() {\n      return this.node && this.node.graph\n    }\n  },\n  mounted() {\n    this.$emit('loaded')\n  },\n  methods: {\n    renderNode(node, props = {}) {\n      if (!node) return null\n\n      const { type = '', childNode, childrenNodes } = node\n      const isBranchNode = node.isBranchNode()\n      const attributes = {\n        attrs: this.$attrs,\n        class: {\n          'is-active': this.currNode === node\n        }\n      }\n\n      if (this.editable) {\n        attributes.on = {\n          ...this.$listeners,\n          click: () => {\n            this.$emit('click-node', node, props)\n          }\n        }\n      }\n\n      return [\n        type && !isBranchNode && (\n          <FlowNode\n            type={type}\n            node={node}\n            editable={this.editable}\n            index={props.index}\n            total={props.total}\n            node={node}\n            {...attributes}\n            // {...{ model }}\n            // {...{ props }}\n          />\n        ),\n        isBranchNode &&\n          childrenNodes &&\n          childrenNodes.length &&\n          this.renderBranchNode(childrenNodes, node, type),\n        childNode && this.renderNode(childNode)\n      ]\n    },\n    renderBranchNode(nodes, node, type) {\n      const nodeType = getNodeTypeByBranch(type)\n      const total = nodes.length - 1\n      const attributes = {\n        attrs: this.$attrs\n      }\n\n      if (this.editable) {\n        attributes.on = {\n          ...this.$listeners\n        }\n      }\n\n      return (\n        <FlowBranchNode\n          type={type}\n          nodeType={this.editable && nodeType}\n          editable={this.editable}\n          node={node}\n          {...attributes}\n        >\n          {nodes.map((node, index) => (\n            <FlowBranchCol left={index === 0} right={index === total}>\n              {this.renderNode(node, { index, total })}\n            </FlowBranchCol>\n          ))}\n        </FlowBranchNode>\n      )\n    }\n  },\n  render() {\n    return (\n      <div class=\"flow-layout\">\n        {this.renderNode(this.rootNode)}\n        <FlowNode type=\"end\" />\n      </div>\n    )\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',_vm._g(_vm._b({},'el-dialog',_vm.$attrs,false),_vm.$listeners),[_vm._t(\"title\",null,{\"slot\":\"title\"}),_c('el-form',{ref:\"conditionsForm\",staticClass:\"flow-condition\",attrs:{\"model\":_vm.form,\"size\":\"mini\"},on:{\"submit\":_vm.handleClickConfirm}},[_vm._l((_vm.form.conditions),function(group,groupIndex){return [(groupIndex > 0)?_c('div',{key:(\"\" + (group[0].key)),staticClass:\"flow-condition-group__logic\"},[_vm._v(\" \"+_vm._s(_vm.LOGIC_SIGNS[group[0].unionLogic])+\" \")]):_vm._e(),_c('div',{key:groupIndex,staticClass:\"flow-condition-group\"},[_c('div',{staticClass:\"flow-condition-group__title\"},[_c('div',{staticClass:\"flow-condition-group__title-text\"},[_vm._v(\" 条件组\"+_vm._s(groupIndex + 1)+\" \")]),(_vm.form.conditions.length > 1)?_c('div',{staticClass:\"flow-condition-group__title-del\"},[_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.handleRemoveConditionGroup(groupIndex); }}})],1):_vm._e()]),_c('div',{staticClass:\"flow-condition-group__content\"},[_vm._l((group),function(condition,index){return _c('div',{key:condition.key,staticClass:\"flow-condition-item\"},[(\n                index > 0 &&\n                  condition.unionLogic &&\n                  _vm.LOGIC_SIGNS[condition.unionLogic]\n              )?_c('div',{staticClass:\"flow-condition-item__logic\"},[_vm._v(\" \"+_vm._s(_vm.LOGIC_SIGNS[condition.unionLogic])+\" \")]):_vm._e(),_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{staticClass:\"flow-condition-item\",attrs:{\"prop\":'conditions.' + groupIndex + '.' + index + '.fieldKey',\"size\":\"mini\",\"rules\":[\n                    {\n                      required: true,\n                      message: '请选择条件字段',\n                      trigger: ['blur', 'change']\n                    }\n                  ]}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"选择字段\",\"aria-placeholder\":\"选择字段\"},on:{\"change\":function($event){return _vm.handleChange(condition)}},model:{value:(condition.fieldKey),callback:function ($$v) {_vm.$set(condition, \"fieldKey\", $$v)},expression:\"condition.fieldKey\"}},_vm._l((_vm.selectOptions),function(item){return _c('el-option',_vm._b({key:item.key},'el-option',item,false))}),1)],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('el-form-item',{attrs:{\"prop\":'conditions.' +\n                      groupIndex +\n                      '.' +\n                      index +\n                      '.conditionType',\"size\":\"mini\",\"rules\":[\n                    {\n                      required: true,\n                      message: '请选择判断条件',\n                      trigger: ['blur', 'change']\n                    }\n                  ]}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":!condition.fieldKey,\"placeholder\":\"判断条件\",\"aria-placeholder\":\"判断条件\"},on:{\"change\":function (value) { return _vm.handleConditionTypeChange(condition, value); }},model:{value:(condition.conditionType),callback:function ($$v) {_vm.$set(condition, \"conditionType\", $$v)},expression:\"condition.conditionType\"}},_vm._l((_vm.getConditionTypes(condition)),function(key,val){return _c('el-option',{key:key,attrs:{\"label\":key,\"value\":val}})}),1)],1)],1),_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{attrs:{\"prop\":'conditions.' + groupIndex + '.' + index + '.value',\"size\":\"mini\",\"rules\":[\n                    {\n                      required: true,\n                      message: '请填写条件对应值',\n                      trigger: ['blur', 'change']\n                    }\n                  ]}},[(\n                      !Boolean(_vm.getPickerType(condition)) &&\n                        _vm.getFieldOptions(condition)\n                    )?_c('el-select',{directives:[{name:\"ref\",rawName:\"v-ref\",value:(function (ref) { return _vm.handleConditionPickerRef(condition, ref); }),expression:\"(ref) => handleConditionPickerRef(condition, ref)\"}],attrs:{\"value\":_vm.isMultipleType(condition)\n                        ? condition.value\n                        : condition.value[0],\"placeholder\":\"单选值\",\"aria-placeholder\":\"值\",\"multiple\":_vm.isMultipleType(condition)},on:{\"change\":function (value) { return _vm.handleConitionValueChange(condition, value); }}},_vm._l((_vm.getFieldOptions(condition)),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1):(\n                      Boolean(_vm.getPickerType(condition)) ||\n                        _vm.isPosition(condition)\n                    )?_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"value\":_vm.getFieldOptions(condition),\"multiple\":\"\",\"readonly\":\"\",\"placeholder\":\"值\",\"aria-placeholder\":\"值\"},nativeOn:{\"click\":function($event){return (function () { return _vm.handleClickPickerInput(condition); })($event)}}}):_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":condition.conditionCode,\"placeholder\":\"值\",\"aria-placeholder\":\"值\"},model:{value:(condition.value),callback:function ($$v) {_vm.$set(condition, \"value\", $$v)},expression:\"condition.value\"}})],1)],1),(_vm.form.conditions[groupIndex].length > 1)?_c('el-col',{attrs:{\"span\":1}},[_c('div',{staticClass:\"flow-condition-remove\"},[_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-remove\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.handleRemoveCondition(groupIndex, index); }}})],1)]):_vm._e()],1)],1)}),_c('div',{staticClass:\"flow-condition-action\"},[_c('el-button',{staticClass:\"standard\",attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleAddCondition(groupIndex, { unionLogic: _vm.AND })}}},[_vm._v(\"且条件\")]),_c('el-button',{staticClass:\"standard\",attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleAddCondition(groupIndex, { unionLogic: _vm.OR })}}},[_vm._v(\"或条件\")])],1)],2)])]})],2),_c('div',{staticClass:\"flow-condition-action\"},[_c('el-link',{attrs:{\"icon\":\"el-icon-plus\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleAddConditionGroup({ unionLogic: _vm.AND })}}},[_vm._v(\"且条件组\")]),_c('el-link',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"icon\":\"el-icon-plus\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleAddConditionGroup({ unionLogic: _vm.OR })}}},[_vm._v(\"或条件组\")])],1),_c('SubmitterPicker',{ref:\"picker\",attrs:{\"show\":_vm.isSubmitterPickerVisible,\"multiple\":\"\",\"title\":_vm.computedPickerTitle,\"default-selected\":_vm.computedPickerValue,\"modal\":\"\",\"append-to-body\":true,\"select-lock\":_vm.type || 'user'},on:{\"update:show\":function($event){_vm.isSubmitterPickerVisible=$event},\"onConfirm\":_vm.handleConfirmPicker}}),_c('TabTreePicker',{attrs:{\"is-show-project\":_vm.type === 'project',\"is-show-company\":_vm.type === 'company',\"show\":_vm.isTabTreePickerVisible,\"multiple\":\"\",\"title\":_vm.computedPickerTitle,\"default-selected\":_vm.computedPickerValue,\"modal\":\"\",\"append-to-body\":true,\"exclude-types\":[\n      _vm.OrgNodeType.Department,\n      _vm.OrgNodeType.ConstructUnit,\n      _vm.OrgNodeType.ConstructUnitGroup\n    ],\"select-lock\":_vm.type || 'user'},on:{\"update:show\":function($event){_vm.isTabTreePickerVisible=$event},\"onConfirm\":_vm.handleConfirmPicker}}),_c('PositionPicker',{attrs:{\"title\":\"选择岗位标签\",\"list-key-name\":\"nodeName\",\"show\":_vm.positionVisible,\"role-list\":_vm.computedPositionPickerValue},on:{\"update:show\":function($event){_vm.positionVisible=$event},\"addCallBack\":_vm.handleCallBack}}),_c('template',{slot:\"footer\"},[_c('el-button',{staticClass:\"process\",attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.handleClickCancel}},[_vm._v(\"取消\")]),_c('el-button',{staticClass:\"process\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleClickConfirm}},[_vm._v(\"确定\")])],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/** @typedef {{\n  fieldKey: string,\n  conditionType: string,\n  conditionCode: string,\n  value: string|object|boolean,\n  key: string,\n  order?: number,\n  leftBracket: boolean,\n  rightBracket: boolean,\n  unionLogic?: null|'and'|'or',\n}} Condition */\n\n/**\n * To converts all conditions to be an array of group,\n * and it does not support the nested conditions array.\n * @param {Condition[]} conditions\n * @returns {Condition[][]}\n */\nexport function conditionToGroup(conditions = []) {\n  let foundLeftBracketFlag = false\n  let cacheItems = []\n  const group = []\n\n  for (let i = 0; i < conditions.length; i++) {\n    const condition = conditions[i]\n\n    if (condition) {\n      if (condition.leftBracket && condition.rightBracket) {\n        group.push([condition])\n        cacheItems = []\n      } else if (condition.leftBracket) {\n        cacheItems.push(condition)\n\n        if (!foundLeftBracketFlag) {\n          foundLeftBracketFlag = true\n        }\n      } else if (condition.rightBracket) {\n        cacheItems.push(condition)\n\n        if (foundLeftBracketFlag) {\n          foundLeftBracketFlag = false\n        }\n\n        group.push(cacheItems.slice())\n        cacheItems = []\n      } else {\n        cacheItems.push(condition)\n      }\n    }\n  }\n\n  if (!group.length && cacheItems.length) {\n    return [cacheItems]\n  }\n\n  return group\n}\n\n/**\n * To converts the group of conditions to be a flattened array\n * @param {Condition[][]} groups\n * @returns {Condition[]}\n */\nexport function groupToCondition(groups) {\n  let order = 0\n  const conditions = []\n\n  for (const group of groups) {\n    const lastIndex = group.length - 1\n\n    for (let index = 0; index < group.length; index++) {\n      const condition = { ...(group[index] || {}) }\n\n      if (index === 0) {\n        condition.leftBracket = true\n      }\n\n      if (index === lastIndex) {\n        condition.rightBracket = true\n      } else {\n        condition.rightBracket = false\n      }\n\n      condition.order = order++\n      conditions.push(condition)\n    }\n  }\n\n  return conditions\n}\n","/**\n * 组织节点类型\n * 0平台；1公司；2子公司；3项目；4参建单位；5部门；\n * 70岗位；80用户；\n * 200子公司分组 300项目分组 400参建单位分组 500部门分组；\n */\n\n/**\n * 平台\n */\nexport const Platform = 0\n\n/**\n * 公司\n */\nexport const Company = 1\n\n/**\n * 子公司\n */\nexport const SubCompany = 2\n\n/**\n * 项目\n */\nexport const Project = 3\n\n/**\n * 参建单位\n */\nexport const ConstructUnit = 4\n\n/**\n * 部门\n */\nexport const Department = 5\n\nexport const Role = 70\nexport const User = 80\n\n/**\n * 子公司分组\n */\nexport const SubCompanyGroup = 200\n\n/**\n * 项目分组\n */\nexport const ProjectGroup = 300\n\n/**\n * 参建单位分组\n */\nexport const ConstructUnitGroup = 400\n\n/**\n * 部门分组\n */\nexport const DepartmentGroup = 500\n\n/**\n * 总部机关\n */\nexport const CompanyDepartmentGroup = 501\n\n/**\n * 直属项目\n */\nexport const CompanyProjectGroup = 301\n\nexport function toString(type) {\n  switch (type) {\n    case Company:\n      return '公司'\n\n    case SubCompany:\n      return '子公司'\n\n    case Project:\n      return '项目'\n\n    case ConstructUnit:\n      return '参建单位'\n\n    case Department:\n      return '部门'\n\n    case Role:\n      return '岗位'\n\n    case User:\n      return '用户'\n  }\n}\n\nexport default {\n  Platform,\n  Company,\n  SubCompany,\n  Project,\n  ConstructUnit,\n  Department,\n\n  Role,\n  User,\n\n  SubCompanyGroup,\n  ProjectGroup,\n  ConstructUnitGroup,\n  DepartmentGroup,\n\n  CompanyDepartmentGroup,\n  CompanyProjectGroup,\n\n  toString,\n}\n","/**\n * 本下级\n */\nexport const CURRENT_AND_SUBORDINATE = 'current_and_subordinate'\n\n/**\n * 本级\n */\nexport const CURRENT = 'current'\n\n/**\n * 下级\n */\nexport const SUBORDINATE = 'subordinate'\n","import orgNodeType from '@/enums/orgNodeType'\nimport * as OrgNodeType from '@/enums/orgNodeType'\nimport * as CONDITION_LEVEL from '../constants/CONDITION_LEVEL'\nimport { SUBMIT_PICKER_TYPES } from '../constants/ENUM_DEFINITIONS'\n\nexport const getDefaultNodeType = (type) => {\n  if (type === SUBMIT_PICKER_TYPES.ORGANIZATION) {\n    return orgNodeType.Company\n  } else if (type === SUBMIT_PICKER_TYPES.PROJECT) {\n    return orgNodeType.Project\n  }\n}\n\nexport const getConditionLevelByNodeType = (type) => {\n  if (type === OrgNodeType.Company) {\n    return CONDITION_LEVEL.CURRENT_AND_SUBORDINATE\n  } else if (type === OrgNodeType.SubCompany) {\n    return CONDITION_LEVEL.CURRENT_AND_SUBORDINATE\n  } else if (type === OrgNodeType.Project) {\n    return CONDITION_LEVEL.CURRENT\n  } else if (type === OrgNodeType.SubCompanyGroup) {\n    return CONDITION_LEVEL.SUBORDINATE\n  } else if (\n    type === OrgNodeType.CompanyDepartmentGroup ||\n    type === OrgNodeType.CompanyProjectGroup\n  ) {\n    return CONDITION_LEVEL.CURRENT\n  }\n}\n","import Vue from 'vue'\n\nexport default {\n  bind: function bind(el, binding, vnode) {\n    Vue.nextTick(function() {\n      binding.value(vnode.componentInstance || el, vnode.key);\n    });\n    binding.value(vnode.componentInstance || el, vnode.key);\n  },\n  update: function update(el, binding, vnode, oldVnode) {\n    if (oldVnode.data && oldVnode.data.directives) {\n      var oldBinding = oldVnode.data.directives.find(function(directive) {\n        var name = directive.name;\n        return name === \"ref\";\n      });\n      if (oldBinding && oldBinding.value !== binding.value) {\n        oldBinding && oldBinding.value(null, oldVnode.key);\n        binding.value(vnode.componentInstance || el, vnode.key);\n        return;\n      }\n    }\n    // Should not have this situation\n    if (\n      vnode.componentInstance !== oldVnode.componentInstance ||\n      vnode.elm !== oldVnode.elm\n    ) {\n      binding.value(vnode.componentInstance || el, vnode.key);\n    }\n  },\n  unbind: function unbind(el, binding, vnode) {\n    binding.value(null, vnode.key);\n  }\n}\n","<template>\n  <el-dialog v-bind=\"$attrs\" v-on=\"$listeners\">\n    <slot slot=\"title\" name=\"title\"></slot>\n    <el-form\n      ref=\"conditionsForm\"\n      :model=\"form\"\n      class=\"flow-condition\"\n      size=\"mini\"\n      @submit=\"handleClickConfirm\"\n    >\n      <template v-for=\"(group, groupIndex) in form.conditions\">\n        <div\n          v-if=\"groupIndex > 0\"\n          :key=\"`${group[0].key}`\"\n          class=\"flow-condition-group__logic\"\n        >\n          {{ LOGIC_SIGNS[group[0].unionLogic] }}\n        </div>\n\n        <div :key=\"groupIndex\" class=\"flow-condition-group\">\n          <div class=\"flow-condition-group__title\">\n            <div class=\"flow-condition-group__title-text\">\n              条件组{{ groupIndex + 1 }}\n            </div>\n\n            <div\n              v-if=\"form.conditions.length > 1\"\n              class=\"flow-condition-group__title-del\"\n            >\n              <el-button\n                type=\"text\"\n                icon=\"el-icon-delete\"\n                size=\"mini\"\n                @click=\"() => handleRemoveConditionGroup(groupIndex)\"\n              ></el-button>\n            </div>\n          </div>\n\n          <div class=\"flow-condition-group__content\">\n            <div\n              v-for=\"(condition, index) in group\"\n              :key=\"condition.key\"\n              class=\"flow-condition-item\"\n            >\n              <div\n                v-if=\"\n                  index > 0 &&\n                    condition.unionLogic &&\n                    LOGIC_SIGNS[condition.unionLogic]\n                \"\n                class=\"flow-condition-item__logic\"\n              >\n                {{ LOGIC_SIGNS[condition.unionLogic] }}\n              </div>\n\n              <el-row :gutter=\"10\">\n                <!-- 条件字段  -->\n                <el-col :span=\"9\">\n                  <el-form-item\n                    class=\"flow-condition-item\"\n                    :prop=\"\n                      'conditions.' + groupIndex + '.' + index + '.fieldKey'\n                    \"\n                    size=\"mini\"\n                    :rules=\"[\n                      {\n                        required: true,\n                        message: '请选择条件字段',\n                        trigger: ['blur', 'change']\n                      }\n                    ]\"\n                  >\n                    <el-select\n                      v-model=\"condition.fieldKey\"\n                      placeholder=\"选择字段\"\n                      aria-placeholder=\"选择字段\"\n                      style=\"width: 100%\"\n                      @change=\"handleChange(condition)\"\n                    >\n                      <el-option\n                        v-for=\"item in selectOptions\"\n                        :key=\"item.key\"\n                        v-bind=\"item\"\n                      ></el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n\n                <!-- 条件规则 -->\n                <el-col :span=\"5\">\n                  <el-form-item\n                    :prop=\"\n                      'conditions.' +\n                        groupIndex +\n                        '.' +\n                        index +\n                        '.conditionType'\n                    \"\n                    size=\"mini\"\n                    :rules=\"[\n                      {\n                        required: true,\n                        message: '请选择判断条件',\n                        trigger: ['blur', 'change']\n                      }\n                    ]\"\n                  >\n                    <el-select\n                      v-model=\"condition.conditionType\"\n                      style=\"width: 100%\"\n                      :disabled=\"!condition.fieldKey\"\n                      placeholder=\"判断条件\"\n                      aria-placeholder=\"判断条件\"\n                      @change=\"\n                        (value) => handleConditionTypeChange(condition, value)\n                      \"\n                    >\n                      <el-option\n                        v-for=\"(key, val) in getConditionTypes(condition)\"\n                        :key=\"key\"\n                        :label=\"key\"\n                        :value=\"val\"\n                      ></el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n\n                <!-- 条件值 -->\n                <el-col :span=\"9\">\n                  <el-form-item\n                    :prop=\"'conditions.' + groupIndex + '.' + index + '.value'\"\n                    size=\"mini\"\n                    :rules=\"[\n                      {\n                        required: true,\n                        message: '请填写条件对应值',\n                        trigger: ['blur', 'change']\n                      }\n                    ]\"\n                  >\n                    <!-- 单选下拉框值 -->\n                    <!-- v-model=\"condition.value\" -->\n                    <el-select\n                      v-if=\"\n                        !Boolean(getPickerType(condition)) &&\n                          getFieldOptions(condition)\n                      \"\n                      v-ref=\"(ref) => handleConditionPickerRef(condition, ref)\"\n                      :value=\"\n                        isMultipleType(condition)\n                          ? condition.value\n                          : condition.value[0]\n                      \"\n                      placeholder=\"单选值\"\n                      aria-placeholder=\"值\"\n                      :multiple=\"isMultipleType(condition)\"\n                      @change=\"\n                        (value) => handleConitionValueChange(condition, value)\n                      \"\n                    >\n                      <el-option\n                        v-for=\"item in getFieldOptions(condition)\"\n                        :key=\"item.value\"\n                        :label=\"item.label\"\n                        :value=\"item.value\"\n                      ></el-option>\n                    </el-select>\n\n                    <!-- 被动输入框值 -->\n                    <!-- v-model=\"condition.value\" -->\n                    <el-input\n                      v-else-if=\"\n                        Boolean(getPickerType(condition)) ||\n                          isPosition(condition)\n                      \"\n                      :value=\"getFieldOptions(condition)\"\n                      multiple\n                      readonly\n                      placeholder=\"值\"\n                      aria-placeholder=\"值\"\n                      style=\"width: 100%\"\n                      @click.native=\"() => handleClickPickerInput(condition)\"\n                    ></el-input>\n\n                    <!-- 主动输入框值 -->\n                    <el-input\n                      v-else\n                      v-model=\"condition.value\"\n                      :type=\"condition.conditionCode\"\n                      placeholder=\"值\"\n                      aria-placeholder=\"值\"\n                      style=\"width: 100%\"\n                    ></el-input>\n                  </el-form-item>\n                </el-col>\n\n                <!-- 删除 -->\n                <el-col v-if=\"form.conditions[groupIndex].length > 1\" :span=\"1\">\n                  <div class=\"flow-condition-remove\">\n                    <el-button\n                      type=\"text\"\n                      icon=\"el-icon-remove\"\n                      size=\"mini\"\n                      @click=\"() => handleRemoveCondition(groupIndex, index)\"\n                    ></el-button>\n                  </div>\n                </el-col>\n              </el-row>\n            </div>\n\n            <div class=\"flow-condition-action\">\n              <el-button\n                size=\"mini\"\n                icon=\"el-icon-plus\"\n                class=\"standard\"\n                type=\"primary\"\n                plain\n                @click=\"handleAddCondition(groupIndex, { unionLogic: AND })\"\n                >且条件</el-button\n              >\n\n              <el-button\n                size=\"mini\"\n                icon=\"el-icon-plus\"\n                class=\"standard\"\n                type=\"primary\"\n                plain\n                @click=\"handleAddCondition(groupIndex, { unionLogic: OR })\"\n                >或条件</el-button\n              >\n            </div>\n          </div>\n        </div>\n      </template>\n    </el-form>\n\n    <div class=\"flow-condition-action\">\n      <el-link\n        icon=\"el-icon-plus\"\n        type=\"primary\"\n        plain\n        @click=\"handleAddConditionGroup({ unionLogic: AND })\"\n        >且条件组</el-link\n      >\n\n      <el-link\n        style=\"margin-left: 20px\"\n        icon=\"el-icon-plus\"\n        type=\"primary\"\n        plain\n        @click=\"handleAddConditionGroup({ unionLogic: OR })\"\n        >或条件组</el-link\n      >\n    </div>\n\n    <SubmitterPicker\n      ref=\"picker\"\n      :show.sync=\"isSubmitterPickerVisible\"\n      multiple\n      :title=\"computedPickerTitle\"\n      :default-selected=\"computedPickerValue\"\n      modal\n      :append-to-body=\"true\"\n      :select-lock=\"type || 'user'\"\n      @onConfirm=\"handleConfirmPicker\"\n    ></SubmitterPicker>\n\n    <TabTreePicker\n      :is-show-project=\"type === 'project'\"\n      :is-show-company=\"type === 'company'\"\n      :show.sync=\"isTabTreePickerVisible\"\n      multiple\n      :title=\"computedPickerTitle\"\n      :default-selected=\"computedPickerValue\"\n      modal\n      :append-to-body=\"true\"\n      :exclude-types=\"[\n        OrgNodeType.Department,\n        OrgNodeType.ConstructUnit,\n        OrgNodeType.ConstructUnitGroup\n      ]\"\n      :select-lock=\"type || 'user'\"\n      @onConfirm=\"handleConfirmPicker\"\n    ></TabTreePicker>\n\n    <PositionPicker\n      title=\"选择岗位标签\"\n      list-key-name=\"nodeName\"\n      :show.sync=\"positionVisible\"\n      :role-list=\"computedPositionPickerValue\"\n      @addCallBack=\"handleCallBack\"\n    ></PositionPicker>\n\n    <template slot=\"footer\">\n      <el-button class=\"process\" type=\"primary\" plain @click=\"handleClickCancel\"\n        >取消</el-button\n      >\n      <el-button class=\"process\" type=\"primary\" @click=\"handleClickConfirm\"\n        >确定</el-button\n      >\n    </template>\n  </el-dialog>\n</template>\n\n<script>\n  import VueMfe from 'vue-mfe'\n  import PropTypes from 'vue-types'\n  import Node from './components/flow/helpers/Node'\n  import { deepCopy } from './utils/index'\n  import { checkBracketPairs } from './utils/checkFlowModel'\n  import { groupToCondition, conditionToGroup } from './utils/conditionAdapters'\n  import {\n    getDefaultNodeType,\n    getConditionLevelByNodeType\n  } from './utils/pickerDataAdapters'\n  import ref from '@/directives/ref'\n  import * as OrgNodeType from '@/enums/orgNodeType'\n  import { AND, LOGIC_SIGN_NAME, OR } from './constants/LOGICAL_SIGN'\n  import {\n    CONDITION_CODE_TYPES,\n    CONDITION_FIELD_TYPES,\n    CONDITION_TYPES,\n    PEOPLE_TYPES,\n    PEOPLE_PICKER_TYPES,\n    PEOPLE_TYPES_KEY_MAP,\n    PEOPLE_TYPES_TITLE,\n    SELECTION_MAP\n  } from './constants/ENUM_DEFINITIONS'\n  import { START_USER_POST_LABEL } from './constants/CONDITION_ADDITION'\n\n  const defaultConditionItem = {\n    fieldKey: '',\n    conditionType: '',\n    conditionCode: 'string',\n    value: '',\n    key: Node.getUUID(),\n    order: 1,\n    leftBracket: false,\n    rightBracket: false,\n    unionLogic: null\n  }\n\n  export default {\n    name: 'ConditionSettings',\n\n    components: {\n      TabTreePicker: () => VueMfe.Lazy('auth2.components.TabTreePicker'),\n      PositionPicker: () => VueMfe.Lazy('auth2.components.PositionPicker'),\n      SubmitterPicker: () => VueMfe.Lazy('auth2.components.SubmitterPicker')\n    },\n\n    directives: { ref },\n\n    inheritAttrs: false,\n\n    props: {\n      // visible: PropTypes.bool.def(false),\n      // eslint-disable-next-line\n      node: PropTypes.instanceOf(Node).required,\n      fields: PropTypes.arrayOf(\n        PropTypes.shape({\n          fieldKey: PropTypes.string.isRequired,\n          fieldName: PropTypes.string.isRequired,\n          fieldType: PropTypes.oneOf(Object.values(CONDITION_TYPES)).isRequired,\n          fieldOptions: PropTypes.arrayOf(\n            PropTypes.shape({\n              label: PropTypes.string.isRequired,\n              value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n                .isRequired\n            })\n          )\n        })\n      ),\n      usingConditionFields: PropTypes.object.def({})\n    },\n\n    data() {\n      const nodeConditions = this.getValue('conditions').filter(\n        (condition) =>\n          condition &&\n          condition.value &&\n          condition.conditionCode &&\n          condition.conditionType\n      )\n\n      let conditionsGroup = conditionToGroup(nodeConditions)\n\n      if (!conditionsGroup || !conditionsGroup.length) {\n        // default conditions array: outside group\n        conditionsGroup = [[deepCopy(defaultConditionItem)]]\n      }\n\n      conditionsGroup.forEach((conditions) => {\n        conditions.forEach((t) => {\n          /* generates dynamic and unique UUID key for each node */\n          if (!t.key) t.key = Node.getUUID()\n          return t\n        })\n      })\n\n      return {\n        type: null,\n        conditionRef: null,\n        computedPickerVisible: false,\n        positionVisible: false,\n        form: {\n          conditions: conditionsGroup\n        },\n        cloneConditions: deepCopy(nodeConditions)\n      }\n    },\n\n    computed: {\n      selectOptions() {\n        return this.fields.map(({ fieldKey, fieldName }) => ({\n          label: fieldName || '',\n          value: fieldKey\n        }))\n      },\n\n      originalTypes() {\n        return this.fields.reduce((map, { fieldKey, fieldType } = {}) => {\n          map[fieldKey] = fieldType\n          return map\n        }, {})\n      },\n\n      fieldTypes() {\n        return this.fields.reduce((map, { fieldKey, fieldType } = {}) => {\n          map[fieldKey] = CONDITION_FIELD_TYPES[fieldType]\n          return map\n        }, {})\n      },\n\n      fieldNames() {\n        return this.fields.reduce((map, { fieldKey, fieldName } = {}) => {\n          map[fieldKey] = fieldName\n          return map\n        }, {})\n      },\n\n      fieldOptions() {\n        // fix: 单选 RADIO 类型无法显示 SELECT>OPTIONS 组件\n        function isSelectable(type) {\n          return (\n            type === CONDITION_TYPES.COMBO || type === CONDITION_TYPES.RADIO\n          )\n        }\n\n        return this.fields.reduce(\n          (map, { fieldKey, fieldType, fieldOptions: options } = {}) => {\n            if (isSelectable(fieldType) && options && options.length)\n              map[fieldKey] = options\n            return map\n          },\n          {}\n        )\n      },\n\n      computedPickerTitle() {\n        return '请选择' + PEOPLE_TYPES_TITLE[this.type]\n      },\n\n      computedPickerValue() {\n        if (\n          this.conditionRef &&\n          typeof this.conditionRef === 'object' &&\n          Array.isArray(this.conditionRef.value)\n        ) {\n          return this.conditionRef.value.map(({ name, sysNo, nodeType }) => ({\n            sysNo: sysNo,\n            nodeName: name,\n            nodeType,\n            key: this.isSubmitterPicker\n              ? `${sysNo}-${PEOPLE_TYPES_KEY_MAP[this.type || 'user']}`\n              : this.isTabTreePicker\n              ? `${this.type}-${sysNo}-${nodeType ||\n                  getDefaultNodeType(this.type)}`\n              : ''\n          }))\n        } else {\n          return []\n        }\n      },\n\n      computedPositionPickerValue() {\n        if (\n          this.conditionRef &&\n          typeof this.conditionRef === 'object' &&\n          Array.isArray(this.conditionRef.value)\n        ) {\n          return this.conditionRef.value.map(({ name, sysNo }) => ({\n            positionName: name,\n            sysNo: sysNo,\n            key: sysNo\n          }))\n        } else {\n          return []\n        }\n      },\n\n      computedConditions() {\n        return groupToCondition(this.form.conditions)\n      },\n\n      isSubmitterPicker() {\n        return (\n          this.type === PEOPLE_TYPES.USER ||\n          this.type === PEOPLE_TYPES.DEPARTMENT ||\n          this.type === PEOPLE_TYPES.DEPARTMENT ||\n          this.type === PEOPLE_TYPES.POSITION_LABEL\n        )\n      },\n\n      isSubmitterPickerVisible: {\n        get() {\n          return this.isSubmitterPicker && this.computedPickerVisible\n        },\n        set(val) {\n          if (!val) {\n            this.type = null\n            this.computedPickerVisible = false\n          }\n\n          return val\n        }\n      },\n\n      isTabTreePicker() {\n        return (\n          this.type === PEOPLE_TYPES.PROJECT ||\n          this.type === PEOPLE_TYPES.COMPANY\n        )\n      },\n\n      isTabTreePickerVisible: {\n        get() {\n          return this.isTabTreePicker && this.computedPickerVisible\n        },\n        set(val) {\n          if (!val) {\n            this.type = null\n            this.computedPickerVisible = false\n          }\n\n          return val\n        }\n      }\n    },\n\n    created() {\n      this.AND = AND\n      this.OR = OR\n      this.LOGIC_SIGNS = LOGIC_SIGN_NAME\n      this.OrgNodeType = OrgNodeType\n    },\n\n    methods: {\n      /**\n       * @description 如果 node 节点的 props 中已存在该值，则取它的值，否则取 defaultSettings 的默认值\n       * @param {string} key key name\n       * @returns {any*}\n       */\n      getValue(key) {\n        if (\n          this.node &&\n          this.node.props &&\n          this.node.props[key] !== undefined\n        ) {\n          return deepCopy(this.node.props[key])\n        } else {\n          return [deepCopy(defaultConditionItem)]\n        }\n      },\n\n      getConditionTypes(condition) {\n        const conditionCode = this.fieldTypes[condition.fieldKey]\n        let conditionTypes = CONDITION_CODE_TYPES[condition.conditionCode]\n\n        if (conditionCode && condition.conditionCode !== conditionCode) {\n          condition.conditionCode = conditionCode\n          conditionTypes = CONDITION_CODE_TYPES[condition.conditionCode]\n\n          // 重置 条件类型\n          if (\n            condition.conditionType &&\n            !conditionTypes[condition.conditionType]\n          ) {\n            condition.conditionType = ''\n          }\n\n          // 重置 条件value\n          if (condition.value) {\n            condition.value = ''\n          }\n        }\n\n        return conditionTypes\n      },\n\n      getPickerType(condition) {\n        return condition.fieldKey\n          ? PEOPLE_PICKER_TYPES[this.originalTypes[condition.fieldKey]]\n          : ''\n      },\n\n      isPosition(condition) {\n        if (condition) {\n          return condition.fieldKey === START_USER_POST_LABEL\n        }\n        return false\n      },\n\n      isMultipleType(condition) {\n        return (\n          condition &&\n          condition.conditionType &&\n          (condition.conditionType === SELECTION_MAP.EQUAL_ANY_ONE ||\n            condition.conditionType === SELECTION_MAP.NE_ANY_ONE)\n        )\n      },\n\n      handleConditionPickerRef(condition, ref) {\n        if (!this.conditionValPickerRefMap) {\n          this.conditionValPickerRefMap = new WeakMap()\n        }\n\n        if (ref) {\n          if (\n            !this.conditionValPickerRefMap.has(condition) ||\n            this.conditionValPickerRefMap.get(condition) !== ref\n          ) {\n            this.conditionValPickerRefMap.set(condition, ref)\n          }\n        } else {\n          this.conditionValPickerRefMap.delete(condition)\n        }\n      },\n\n      handleConditionTypeChange(condition, value) {\n        if (\n          !this.isMultipleType({ conditionType: value }) &&\n          Array.isArray(condition.value) &&\n          condition.value.length > 1\n        ) {\n          condition.value = condition.value.slice(0, 1)\n        }\n\n        if (\n          this.conditionValPickerRefMap &&\n          this.conditionValPickerRefMap.has(condition)\n        ) {\n          const conditionValPickerRef = this.conditionValPickerRefMap.get(\n            condition\n          )\n\n          if (conditionValPickerRef) {\n            conditionValPickerRef.resetInputHeight()\n          }\n        }\n      },\n\n      handleConitionValueChange(condition, value) {\n        if (Array.isArray(value)) {\n          condition.value = value\n        } else {\n          condition.value = [value]\n        }\n      },\n\n      getFieldOptions(condition) {\n        if (this.getPickerType(condition) || this.isPosition(condition)) {\n          return (condition.value || [])\n            .map(\n              ({ name, parentFullName }) =>\n                `${name}${parentFullName ? '(' + parentFullName + ')' : ''}`\n            )\n            .join('、')\n        } else {\n          return this.fieldOptions[condition.fieldKey]\n        }\n      },\n\n      /* update node model */\n      handleUpdate(opts) {\n        this.node && this.node.update(opts)\n      },\n\n      /* update node props */\n      handleUpdateProps(optsOrkey) {\n        this.node &&\n          this.node.updateProps(\n            typeof optsOrkey !== 'string'\n              ? optsOrkey\n              : {\n                  [optsOrkey]: this[optsOrkey]\n                }\n          )\n      },\n\n      handleAddCondition(groupIndex, opts = {}) {\n        this.form.conditions[groupIndex].push({\n          ...defaultConditionItem,\n          ...opts,\n          key: Node.getUUID()\n        })\n      },\n\n      handleAddConditionGroup(opts) {\n        this.form.conditions.push([\n          {\n            ...defaultConditionItem,\n            ...opts,\n            key: Node.getUUID()\n          }\n        ])\n      },\n\n      handleRemoveCondition(groupIndex, index) {\n        const group = this.form.conditions[groupIndex]\n        group.splice(index, 1)\n\n        if (!group.length) {\n          this.handleRemoveConditionGroup(groupIndex)\n        }\n\n        this.checkConditionSymbol()\n      },\n\n      handleRemoveConditionGroup(index) {\n        this.form.conditions.splice(index, 1)\n        this.checkConditionSymbol()\n      },\n\n      checkConditionSymbol() {\n        const group1st = this.form.conditions[0]\n        const condition1st = group1st && group1st[0]\n\n        // 检查首个条件组的首个条件是否存在 logic symbol\n        if (condition1st.unionLogic !== null) {\n          condition1st.unionLogic = null\n        }\n      },\n\n      getGroupLogicSymbol(groupIndex) {\n        const conditions = (this.form.conditions || [])[groupIndex] || []\n        const firstCondition = conditions[0]\n\n        if (firstCondition && firstCondition.unionLogic) {\n          return firstCondition.unionLogic\n        }\n\n        return null\n      },\n\n      handleClickConfirm() {\n        const conditions = this.computedConditions\n\n        this.submitForm(() => {\n          try {\n            checkBracketPairs(conditions)\n            this.handleUpdateProps({\n              conditions: conditions.filter(\n                ({ conditionCode, conditionType, fieldKey, value }) =>\n                  conditionCode && conditionType && fieldKey && value\n              )\n            })\n            this.node && this.node.read({ conditions, fields: this.fields })\n            this.calcUsingConditionNumber()\n\n            this.$emit('update:visible', false)\n          } catch (e) {\n            this.$message.warning(e.message)\n            console.error(e)\n          }\n        })\n      },\n\n      calcUsingConditionNumber() {\n        const oldConditionFields = this.cloneConditions.map((i) => i.fieldKey)\n        const newConditionFields = this.computedConditions.map(\n          (i) => i.fieldKey\n        )\n\n        oldConditionFields.forEach((i) => {\n          this.usingConditionFields[i]--\n        })\n\n        newConditionFields.forEach((i) => {\n          if (Reflect.has(this.usingConditionFields, i)) {\n            this.usingConditionFields[i]++\n          } else {\n            this.$set(this.usingConditionFields, i, 1)\n          }\n        })\n\n        Object.keys(this.usingConditionFields).forEach((i) => {\n          if (this.usingConditionFields[i] === 0) {\n            Reflect.deleteProperty(this.usingConditionFields, i)\n          }\n        })\n      },\n\n      handleClickCancel() {\n        // this.resetForm()\n        this.$emit('update:visible', false)\n      },\n\n      handleClickPickerInput(condition) {\n        this.conditionRef = condition\n\n        if (condition.fieldKey === START_USER_POST_LABEL) {\n          this.positionVisible = true\n        } else {\n          this.type = this.getPickerType(condition)\n          this.computedPickerVisible = true\n        }\n      },\n\n      handleConfirmPicker(values) {\n        if (this.conditionRef) {\n          this.conditionRef.value = values.map(\n            ({ sysNo, nodeName: name, nodeType }) => ({\n              name,\n              sysNo,\n              nodeType,\n              level: getConditionLevelByNodeType(nodeType)\n            })\n          )\n        }\n      },\n\n      handleCallBack(values) {\n        if (this.conditionRef) {\n          this.conditionRef.value = values.map((i) => ({\n            name: `${i.positionName}${\n              i.parentFullName ? '(' + i.parentFullName + ')' : ''\n            }`,\n            sysNo: i.sysNo\n          }))\n        }\n      },\n\n      submitForm(resolve, reject) {\n        this.$refs['conditionsForm'].validate((valid) => {\n          if (valid) {\n            resolve && resolve()\n          } else {\n            reject && reject()\n            return false\n          }\n        })\n      },\n\n      resetForm() {\n        this.$refs['conditionsForm'].resetFields()\n      },\n\n      handleChange(condition) {\n        condition.value = ''\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .flow-condition {\n    /deep/.el-form-item--mini {\n      margin-bottom: 0;\n      height: 30px;\n    }\n\n    /deep/.el-form-item__content {\n      height: 30px;\n      line-height: 30px;\n    }\n\n    & + & {\n      margin-top: 20px;\n    }\n\n    &-group {\n      border: 1px dashed rgba(187, 187, 187, 1);\n      border-top: 0;\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px;\n\n      &__title {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        min-height: 50px;\n        padding: 10px 0 10px 15px;\n        color: #101010;\n        background-color: #f4f6f8;\n\n        &-text {\n          flex: 1;\n        }\n\n        &-del {\n          /deep/.el-button {\n            color: rgba(128, 128, 128, 1);\n\n            &:hover {\n              color: #2185f8;\n            }\n          }\n        }\n      }\n\n      &__content {\n        padding: 15px;\n      }\n\n      &__logic {\n        margin: 10px 0;\n      }\n    }\n\n    & + &-action {\n      margin-top: 20px;\n    }\n\n    &-item {\n      margin-bottom: 15px;\n\n      &__logic {\n        margin-bottom: 10px;\n      }\n    }\n\n    &-remove {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      .el-button {\n        color: #f16e6e;\n        font-size: 14px;\n\n        &:hover {\n          color: darken($color: #f16e6e, $amount: 10);\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_condition-settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_condition-settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_condition-settings.vue?vue&type=template&id=f908b5ce&scoped=true&\"\nimport script from \"./_condition-settings.vue?vue&type=script&lang=js&\"\nexport * from \"./_condition-settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./_condition-settings.vue?vue&type=style&index=0&id=f908b5ce&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f908b5ce\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div v-loading.lock=\"!isReady\" class=\"flow-container\">\n    <FlowLayout\n      :fields=\"flowFields\"\n      :root-node=\"startNode\"\n      :curr-node=\"currNode\"\n      @click-node=\"handleClickNode\"\n      @update-node=\"handleUpdateNode\"\n    ></FlowLayout>\n\n    <SidePanel\n      ref=\"panel\"\n      :node=\"currNode\"\n      :project-only=\"!!projectSysNo\"\n      :join-plan=\"joinPlan\"\n      :fields=\"flowFields\"\n      :visible.sync=\"visible\"\n    ></SidePanel>\n\n    <ConditionSettings\n      v-if=\"currNode && conditionVisible\"\n      :node=\"currNode\"\n      :fields=\"conditionFields\"\n      :using-condition-fields=\"usingConditionFields\"\n      :visible.sync=\"conditionVisible\"\n    >\n      <template slot=\"title\">\n        流转条件设置\n        <span style=\"color: red\">(表单必填字段可作为审批条件)</span>\n      </template>\n    </ConditionSettings>\n\n    <!-- <BaseMessageDialog title=\"发布提示\" :visible.sync=\"true\">\n      <div>\n        <div><i class=\"el-icon-warning\"></i></div>\n        <h3>当前审批无法发布</h3>\n        <ul v-for=\"msg in errorMsg\" :key=\"msg.key\">\n          <li>{{msg.txt}}</li>\n        </ul>\n      </div>\n    </BaseMessageDialog>-->\n\n    <el-button\n      v-if=\"isDev\"\n      style=\"position: fixed; right: 20px; bottom: 20px;  \"\n      @click=\"handleSave(true)\"\n      >TO JSON</el-button\n    >\n  </div>\n</template>\n\n<script>\n  import './styles.scss'\n  import { toJSON } from './adapters/toJSON'\n  import { toModel } from './adapters/toModel'\n  import { nodeDeepIterator } from './components/flow/helpers/NodeUtils'\n  import Flow from './components/flow/helpers/Flow'\n  import Node from './components/flow/helpers/Node'\n  import NodeManager from './components/flow/helpers/NodeManager'\n  import SidePanel from './components/panel/index'\n  import FlowLayout from './components/flow/index'\n  import ConditionSettings from './_condition-settings'\n  import { BUSINESS_FLOW } from './constants/FLOW_TYPE'\n  import {\n    SPONSOR_PICKER_TYPE,\n    SPONSOR_TYPE_NAME\n  } from './constants/CONDITION_ADDITION'\n  import {\n    CONDITION_FIELD_TYPES,\n    CONDITION_PEOPLE_TYPES\n  } from './constants/ENUM_DEFINITIONS'\n  import { fieldCanWrite, updateFieldsWithMerge } from './utils/fieldsHelpers'\n\n  export default {\n    name: 'DesignCenter',\n    components: {\n      SidePanel,\n      FlowLayout,\n      // BaseMessageDialog,\n      ConditionSettings\n    },\n    data() {\n      return {\n        currNode: null,\n        conditionVisible: false,\n        projectSysNo: this.$route && this.$route.params.projectSysNo,\n\n        dirty: false /* 用户是否更新过节点 */,\n        startNode: null,\n        // errorMsg: [{ key: 1, txt: [] }],\n        isDev: process.env.NODE_ENV !== 'production',\n        usingConditionFields: {},\n\n        flowForm: {},\n        flowModel: {},\n        flowSponsors: {},\n        flowSettings: {},\n\n        currentOrganization: {},\n\n        corpSysNo: ''\n      }\n    },\n    computed: {\n      formFields() {\n        const formData = (this.flowForm || {}).formContentObject || {}\n        const fields = formData.fields || []\n\n        return fields && fields.length ? fields : []\n      },\n      flowFields() {\n        return this.formFields.map(\n          ({\n            name,\n            type,\n            key,\n            options: { required, editable, textVisible }\n          }) => {\n            let canWrite = false\n            const isUseCondition = !!this.usingConditionFields[key]\n            if (textVisible && this.joinPlan === 1) {\n              canWrite = fieldCanWrite(type)\n            }\n            return {\n              type,\n              fieldKey: key,\n              fieldName: name,\n              canView: textVisible,\n              canWrite: canWrite,\n              require: required || false,\n              editable: editable,\n              textVisible: textVisible || false,\n              useCondition: isUseCondition\n            }\n          }\n        )\n      },\n      joinPlan() {\n        /**\n         * 根据JoinPlan字段判断，\n         *   为1时，表单字段权限和以前一样\n         *   为2时，表单的可见与可编辑根据表单设计的textVisible, editable确定\n         *   为3时，表单字段权限标签隐藏掉\n         */\n        if (this.isBusinessFlow) {\n          return (this.flowForm && this.flowForm.joinPlan) || 1\n        }\n\n        // 默认为1\n        return 1\n      },\n      // 是否是业务流程\n      isBusinessFlow() {\n        return this.flowSettings && this.flowSettings.flowType === BUSINESS_FLOW\n      },\n      // 条件字段\n      conditionFields() {\n        return Object.keys(SPONSOR_TYPE_NAME)\n          .map((key) => ({\n            fieldKey: key,\n            fieldName: SPONSOR_TYPE_NAME[key],\n            fieldType: SPONSOR_PICKER_TYPE[key],\n            fieldOptions: []\n          }))\n          .concat(\n            this.formFields\n              .filter(({ type, options: { multiple, required } }) => {\n                const conditionType = CONDITION_FIELD_TYPES[type]\n                // 如果是业务流程，则条件字段都必须提前就是必填项\n                // if (this.isBusinessFlow) {\n                //   return required\n                // }\n\n                // fixed:(#1017652)表单设置选择人为多选，则不能设置为条件字段\n                if (CONDITION_PEOPLE_TYPES[type]) {\n                  return required && !multiple\n                } else {\n                  return required && !!conditionType\n                }\n              })\n              .map(\n                ({ type, key, name, options: { options: fieldOptions } }) => ({\n                  fieldKey: key,\n                  fieldName: name,\n                  fieldType: type,\n                  fieldOptions: fieldOptions || []\n                })\n              )\n          )\n      },\n      flowCode() {\n        return this.$route.query && this.$route.query.flowCode\n      },\n      isReady() {\n        return !!this.startNode\n      },\n      visible: {\n        get() {\n          return (\n            this.currNode &&\n            this.currNode.type !== Node.TYPE.CONDITION_NODE &&\n            Boolean(this.currNode)\n          )\n        },\n        set(val) {\n          if (!val && this.currNode) {\n            this.currNode = null\n            this.$refs.panel.activeName = 'node'\n\n            return false\n          }\n        }\n      }\n    },\n    watch: {\n      conditionVisible(val) {\n        if (!val && this.currNode) this.currNode = null\n      },\n      flowModel(val, oldVal) {\n        /**\n         * flowModel 仅需要在第一次被传值时初始化，否则后续重新赋值 this.startNode 导致当前被操作的 currNode 引用变化\ng         */\n        const hasOld =\n          oldVal &&\n          typeof oldVal === 'object' &&\n          Boolean(Object.keys(oldVal).length)\n\n        if (!hasOld && oldVal !== val) {\n          val && this.getUsingConditionFields()\n          val && this.initViewModel()\n        }\n      },\n      flowSponsors(val) {\n        val && this.startNode && this.startNode.read(this.flowSponsors)\n      },\n      flowSettings() {\n        this.updateStartNode()\n      },\n      flowFields(val, oldVal) {\n        if (Array.isArray(val) && Array.isArray(oldVal)) {\n          if (val.length !== oldVal.length) {\n            this.updateFieldsList()\n          }\n        }\n      },\n      startNode: {\n        deep: true,\n        handler(newval, oldVal) {\n          if (newval && oldVal && newval === oldVal) {\n            this.dirty = true\n          }\n\n          this.updateStartNode()\n        }\n      },\n      usingConditionFields: {\n        deep: true,\n        handler() {\n          this.updateFieldsWritable()\n        }\n      }\n    },\n    created() {\n      this.listenEvent()\n      this.getUsingConditionFields()\n      this.initViewModel()\n    },\n    beforeRouteLeave(to, from, next) {\n      // 切换 tab 才存\n      this.$root && this.$root.$off('wf-save')\n      this.$root && this.$root.$off('wf-release')\n\n      // 如果 el-drawer 未被关闭，需要编程式关闭\n      if (this.visible) {\n        this.visible = false\n      }\n\n      if (this.dirty) {\n        try {\n          let ignoreError = true\n          this.$store.commit(\n            'workFlow/setDesignProcess',\n            this.geneFlowModel(ignoreError)\n          )\n        } catch (e) {\n          if (process.env.NODE_ENV === 'development') {\n            console.error(e)\n          }\n\n          this.$message({\n            message: e.message || e,\n            type: 'warning'\n          })\n        }\n      }\n\n      next()\n    },\n    destroyed() {\n      NodeManager.clear()\n    },\n    methods: {\n      getUsingConditionFields() {\n        const localConditions = Object.keys(SPONSOR_TYPE_NAME)\n        const conditions = ((this.flowModel || {}).sequenceList || [])\n          .map((i) => i.conditionList)\n          .filter((i) => i && i.length)\n        let allResult = []\n        conditions.forEach((i) => allResult.push(...i))\n        let result = (allResult || [])\n          .map((i) => i.fieldKey)\n          .filter((i) => !localConditions.includes(i))\n        result.forEach((i) => {\n          if (!Reflect.has(this.usingConditionFields, i)) {\n            this.$set(\n              this.usingConditionFields,\n              i,\n              result.filter((x) => x === i).length\n            )\n          }\n        })\n      },\n      listenEvent() {\n        this.$root && this.$root.$on('wf-save', this.handleSave)\n        this.$root && this.$root.$on('wf-release', this.handleRelease)\n      },\n      initViewModel() {\n        this.startNode = toModel(\n          this.flowModel || {},\n          {\n            conditionFields: this.conditionFields,\n            flowFields: this.flowFields\n          },\n          this.isBusinessFlow\n        )\n\n        this.startNode &&\n          this.flowFields &&\n          this.flowFields.length &&\n          this.updateFieldsList()\n      },\n      updateStartNode() {\n        const currTitle = this.startNode && this.startNode.read()\n        const settings = this.flowSettings\n        const newTitle =\n          this.flowSponsors ||\n          (settings &&\n            settings.applyScope &&\n            settings.applyScope.applyScopeName)\n\n        if (this.startNode && (!currTitle || currTitle !== newTitle)) {\n          this.startNode.read(newTitle)\n        }\n      },\n      updateFieldsList() {\n        const nodeProps = this.startNode && this.startNode.props\n        const oldFields = nodeProps && nodeProps.formFieldList\n\n        if (\n          !oldFields ||\n          !oldFields.length ||\n          this.flowFields.length !== oldFields.length\n        ) {\n          nodeDeepIterator(this.startNode, (node) => {\n            node.updateProps({\n              formFieldList: updateFieldsWithMerge(\n                this.flowFields.map((field) => ({\n                  ...field,\n                  canWrite: this.usingConditionFields[field.fieldKey]\n                    ? false\n                    : this.joinPlan === 1\n                })),\n                node.formFieldList,\n                node.alias || node.type\n              )\n            })\n          })\n\n          this.handleUpdateNode(this.startNode)\n        }\n      },\n      updateFieldsWritable() {\n        nodeDeepIterator(this.startNode, (node) => {\n          if (node.type !== Node.TYPE.SPONSOR_NODE) {\n            (node.props.formFieldList || []).forEach((i) => {\n              if (this.usingConditionFields[i.fieldKey]) {\n                i.canWrite = false\n              }\n            })\n            node.updateProps({\n              formFieldList: node.props.formFieldList\n            })\n          }\n        })\n      },\n      geneFlowModel(ignoreError) {\n        if (process.env.NODE_ENV === 'development') {\n          console.log('ignoreError: ', ignoreError)\n        }\n\n        const flowData = toJSON(this.startNode, ignoreError)\n        const { flowCode = '', flowName = '' } = this.flowSettings || {}\n\n        const flowModel = {\n          ...this.flowModel,\n          flowCode,\n          flowName,\n          ...flowData\n        }\n\n        console.log('flowModel: ', flowModel)\n\n        return flowModel\n      },\n      handleSave(test) {\n        try {\n          if (test) {\n            this.dirty && this.geneFlowModel(test)\n          } else {\n            this.$store.dispatch(\n              'workFlow/saveDesignProcess',\n              this.dirty && this.geneFlowModel(true)\n            )\n          }\n        } catch (e) {\n          if (process.env.NODE_ENV === 'development') {\n            console.error(e)\n          }\n\n          this.$message({\n            message: e.message || e,\n            type: 'warning'\n          })\n        }\n      },\n      handleRelease() {\n        try {\n          this.$store.commit('workFlow/setDesignProcess', this.geneFlowModel())\n        } catch (e) {\n          if (process.env.NODE_ENV === 'development') {\n            console.error(e)\n          }\n\n          return this.$message({\n            message: e.message || e,\n            type: 'warning'\n          })\n        }\n\n        this.$store.dispatch('workFlow/publishFlow').then((path) => {\n          this.$router.push({ path })\n        })\n      },\n      handleClickNode(node) {\n        this.currNode = node\n\n        if (node.type === Node.TYPE.CONDITION_NODE) {\n          this.conditionVisible = true\n        } else {\n          this.visible = true\n        }\n      },\n      handleUpdateNode(node) {\n        const { props, ...params } = node || NodeManager.getNode(this.startNode)\n\n        this.startNode = Flow.createNode({ ...params, ...props })\n        this.dirty = true\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=04dd12b2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <DesignCenter />\n  </div>\n</template>\n\n<script>\n  import DesignCenter from './components/design-center'\n\n  export default {\n    name: 'App',\n    components: {\n      DesignCenter\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  // Normalize default styles across browsers,\n  // https://necolas.github.io/normalize.css/\n  @import '~normalize.css/normalize.css';\n\n  html {\n    overflow-x: auto !important;\n  }\n\n  html,\n  body {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  // ===\n  // Vendor\n  // ===\n\n  #nprogress .bar {\n    background: #ffd46b;\n  }\n\n  #app {\n    display: flex;\n    width: 100%;\n    height: 100%;\n    transition: 0.3s cubic-bezier(0.78, 0.14, 0.15, 0.86);\n  }\n\n  #app > div:only-child {\n    width: 100%;\n    min-width: 100%;\n    min-height: 100%;\n  }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6cbf40dd&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import 'core-js/stable'\nimport Vue from 'vue'\nimport './plugins'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: (h) => h(App)\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approver.vue?vue&type=style&index=1&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approver.vue?vue&type=style&index=0&id=24a56bc0&lang=scss&scoped=true&\""],"sourceRoot":""}